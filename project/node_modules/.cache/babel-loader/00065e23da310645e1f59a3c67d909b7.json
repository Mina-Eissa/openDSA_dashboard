{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { withIn, PointData, textElement, getElement, valueToCoefficient, drawSymbol, ChartLocation } from '../../common/utils/helper';\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\nimport { Tooltip, PathOption, TextOption, measureText, Size } from '@syncfusion/ej2-svg-base';\nimport { createElement, remove } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { stockEventRender } from '../../common/model/constants';\n/**\r\n * @private\r\n */\n\nvar StockEvents =\n/** @class */\nfunction (_super) {\n  __extends(StockEvents, _super);\n\n  function StockEvents(stockChart) {\n    var _this = _super.call(this, stockChart.chart) || this;\n    /** @private */\n\n\n    _this.symbolLocations = [];\n    _this.stockChart = stockChart;\n    _this.chartId = _this.stockChart.element.id;\n    return _this;\n  }\n  /**\r\n   * To render stock events in chart\r\n   *\r\n   * @returns {Element} Stock event element\r\n   * @private\r\n   */\n\n\n  StockEvents.prototype.renderStockEvents = function () {\n    var sChart = this.stockChart;\n    var stockEvent;\n    var stockEventElement;\n    var textSize; // Creation of group elements for stock events\n\n    var stockEventsElementGroup = sChart.renderer.createGroup({\n      id: this.chartId + '_StockEvents'\n    });\n    this.symbolLocations = initialArray(sChart.series.length, sChart.stockEvents.length, new ChartLocation(0, 0));\n\n    for (var i = 0; i < sChart.stockEvents.length; i++) {\n      stockEvent = this.stockChart.stockEvents[i];\n\n      for (var _i = 0, _a = sChart.chart.series; _i < _a.length; _i++) {\n        var series = _a[_i];\n        var argsData = {\n          name: stockEventRender,\n          stockChart: sChart,\n          text: stockEvent.text,\n          type: stockEvent.type,\n          cancel: false,\n          series: series\n        };\n        sChart.trigger(stockEventRender, argsData);\n        stockEvent.text = argsData.text;\n        stockEvent.type = argsData.type;\n        textSize = measureText(stockEvent.text + 'W', stockEvent.textStyle);\n\n        if (!argsData.cancel) {\n          stockEventElement = sChart.renderer.createGroup({\n            id: this.chartId + '_Series_' + series.index + '_StockEvents_' + i\n          });\n          var stockEventDate = this.dateParse(stockEvent.date).getTime();\n\n          if (withIn(stockEventDate, series.xAxis.visibleRange)) {\n            if (stockEvent.seriesIndexes.length > 0) {\n              for (var j = 0; j < stockEvent.seriesIndexes.length; j++) {\n                if (stockEvent.seriesIndexes[j] === series.index) {\n                  stockEventsElementGroup.appendChild(this.creatEventGroup(stockEventElement, series, stockEvent, i, textSize));\n                }\n              }\n            } else {\n              stockEventsElementGroup.appendChild(this.creatEventGroup(stockEventElement, series, stockEvent, i, textSize));\n            }\n          }\n        }\n      }\n    }\n\n    return stockEventsElementGroup;\n  };\n\n  StockEvents.prototype.creatEventGroup = function (stockEventElement, series, stockEvent, i, textSize) {\n    var symbolLocation = this.findClosePoint(series, stockEvent);\n\n    if (!stockEvent.showOnSeries) {\n      symbolLocation.y = series.yAxis.rect.y + series.yAxis.rect.height;\n    }\n\n    this.symbolLocations[series.index][i] = symbolLocation;\n    this.createStockElements(stockEventElement, stockEvent, series, i, symbolLocation, textSize);\n    return stockEventElement;\n  };\n\n  StockEvents.prototype.findClosePoint = function (series, sEvent) {\n    var stockEventDate = this.dateParse(sEvent.date).getTime();\n    var closeIndex = this.getClosest(series, stockEventDate);\n    var pointData;\n    var point;\n    var yPixel;\n\n    for (var k = 0; k < series.points.length; k++) {\n      point = series.points[k];\n\n      if (closeIndex === point.xValue && point.visible) {\n        pointData = new PointData(point, series);\n      } else if (k !== 0 && k !== series.points.length) {\n        if (closeIndex > series.points[k - 1].xValue && closeIndex < series.points[k + 1].xValue) {\n          pointData = new PointData(point, series);\n        }\n      }\n    }\n\n    var xPixel = series.xAxis.rect.x + valueToCoefficient(pointData.point.xValue, series.xAxis) * series.xAxis.rect.width;\n    yPixel = valueToCoefficient(pointData.point[sEvent.placeAt], series.yAxis) * series.yAxis.rect.height;\n    yPixel = yPixel * -1 + (series.yAxis.rect.y + series.yAxis.rect.height);\n    return new ChartLocation(xPixel, yPixel);\n  };\n\n  StockEvents.prototype.createStockElements = function (stockEventElement, stockEve, series, i, symbolLocation, textSize) {\n    var result = new Size(textSize.width > 20 ? textSize.width : 20, textSize.height > 20 ? textSize.height : 20);\n    var pathString;\n    var pathOption;\n    var lx = symbolLocation.x;\n    var ly = symbolLocation.y;\n    var stockId = this.chartId + '_Series_' + series.index + '_StockEvents_' + i;\n    var border = stockEve.border;\n\n    switch (stockEve.type) {\n      case 'Flag':\n      case 'Circle':\n      case 'Square':\n        stockEventElement.appendChild(drawSymbol(new ChartLocation(lx, ly), 'Circle', new Size(2, 2), '', new PathOption(stockId + '_Circle', 'transparent', border.width, border.color), this.dateParse(stockEve.date).toISOString()));\n        stockEventElement.appendChild(drawSymbol(new ChartLocation(lx, ly - 5), 'VerticalLine', new Size(9, 9), '', new PathOption(stockId + '_Path', border.color, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\n        stockEventElement.appendChild(drawSymbol(new ChartLocation(stockEve.type !== 'Flag' ? lx : lx + result.width / 2, ly - result.height), stockEve.type, result, '', new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\n        textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', stockEve.type !== 'Flag' ? symbolLocation.x : symbolLocation.x + result.width / 2, symbolLocation.y - result.height, 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\n        break;\n\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'ArrowRight':\n      case 'ArrowLeft':\n        pathString = 'M' + ' ' + lx + ' ' + ly + ' ' + this.findArrowpaths(stockEve.type);\n        pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\n        stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption));\n        break;\n\n      case 'Triangle':\n      case 'InvertedTriangle':\n        result.height = 3 * textSize.height;\n        result.width = textSize.width + 1.5 * textSize.width;\n        stockEventElement.appendChild(drawSymbol(new ChartLocation(symbolLocation.x, symbolLocation.y), stockEve.type, new Size(20, 20), '', new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\n        textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', symbolLocation.x, symbolLocation.y, 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\n        break;\n\n      case 'Text':\n        textSize.height += 8; //padding for text height\n\n        pathString = 'M' + ' ' + lx + ' ' + ly + ' ' + 'L' + ' ' + (lx - 5) + ' ' + (ly - 5) + ' ' + 'L' + ' ' + (lx - textSize.width / 2) + ' ' + (ly - 5) + ' ' + 'L' + ' ' + (lx - textSize.width / 2) + ' ' + (ly - textSize.height) + ' ' + 'L' + ' ' + (lx + textSize.width / 2) + ' ' + (ly - textSize.height) + ' ' + 'L' + ' ' + (lx + textSize.width / 2) + ' ' + (ly - 5) + ' ' + 'L' + ' ' + (lx + 5) + ' ' + (ly - 5) + ' ' + 'Z';\n        pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\n        stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption));\n        textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', lx, ly - textSize.height / 2, 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\n        break;\n\n      default:\n        //pin type calculation.\n        pathString = 'M' + ' ' + lx + ' ' + ly + ' ' + 'L' + ' ' + (lx - textSize.width / 2) + ' ' + (ly - textSize.height / 3) + ' ' + 'L' + ' ' + (lx - textSize.width / 2) + ' ' + (ly - textSize.height) + ' ' + 'L' + ' ' + (lx + textSize.width / 2) + ' ' + (ly - textSize.height) + ' ' + 'L' + ' ' + (lx + textSize.width / 2) + ' ' + (ly - textSize.height / 3) + ' ' + 'Z';\n        pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\n        stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption)); //append text element\n\n        textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', lx, ly - textSize.height / 2, 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\n    }\n  };\n\n  StockEvents.prototype.renderStockEventTooltip = function (targetId) {\n    var seriesIndex = parseInt(targetId.split('_StockEvents_')[0].split(this.chartId + '_Series_')[1], 10);\n    var pointIndex = parseInt(targetId.split('_StockEvents_')[1].replace(/\\D+/g, ''), 10);\n    var updatedLocation = this.symbolLocations[seriesIndex][pointIndex];\n    var pointLocation = new ChartLocation(updatedLocation.x, updatedLocation.y + this.stockChart.toolbarHeight + this.stockChart.titleSize.height);\n    this.applyHighLights(pointIndex, seriesIndex); //title size and toolbar height is added location for placing tooltip\n\n    var svgElement = this.getElement(this.chartId + '_StockEvents_Tooltip_svg');\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0;\n\n    if (!isTooltip) {\n      if (getElement(this.chartId + '_StockEvents_Tooltip_svg')) {\n        remove(getElement(this.chartId + '_StockEvents_Tooltip'));\n      }\n\n      var tooltipElement = createElement('div', {\n        id: this.chartId + '_StockEvents_Tooltip',\n        className: 'ejSVGTooltip',\n        attrs: {\n          'style': 'pointer-events:none; position:absolute;z-index: 1'\n        }\n      });\n      getElement(this.chartId + '_Secondary_Element').appendChild(tooltipElement);\n      this.stockEventTooltip = new Tooltip({\n        opacity: 1,\n        header: '',\n        content: [this.stockChart.stockEvents[pointIndex].description],\n        enableAnimation: true,\n        location: pointLocation,\n        theme: this.stockChart.theme,\n        inverted: true,\n        areaBounds: this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect\n      });\n      this.stockEventTooltip.areaBounds.y += this.stockChart.toolbarHeight + this.stockChart.titleSize.height;\n      this.stockEventTooltip.appendTo('#' + tooltipElement.id);\n    } else {\n      this.stockEventTooltip.content = [this.stockChart.stockEvents[pointIndex].description];\n      this.stockEventTooltip.location = pointLocation;\n      this.stockEventTooltip.dataBind();\n    }\n  };\n  /**\r\n   * Remove the stock event tooltip\r\n   *\r\n   * @param {number} duration tooltip timeout duration\r\n   * @returns {void}\r\n   */\n\n\n  StockEvents.prototype.removeStockEventTooltip = function (duration) {\n    var _this = this;\n\n    var tooltipElement = this.getElement(this.chartId + '_StockEvents_Tooltip');\n    this.stopAnimation();\n\n    if (tooltipElement && this.stockEventTooltip) {\n      this.toolTipInterval = +setTimeout(function () {\n        _this.stockEventTooltip.fadeOut();\n\n        _this.removeHighLights();\n      }, duration);\n    }\n  };\n\n  StockEvents.prototype.findArrowpaths = function (type) {\n    var arrowString = '';\n\n    switch (type) {\n      case 'ArrowUp':\n        arrowString = 'l -10 10 l 5 0 l 0 10 l 10 0 l 0 -10 l 5 0 z';\n        break;\n\n      case 'ArrowDown':\n        arrowString = 'l -10 -10 l 5 0 l 0 -10 l 10 0 l 0 10 l 5 0 z';\n        break;\n\n      case 'ArrowLeft':\n        arrowString = 'l -10 -10 l 0 5 l -10 0 l 0 10 l 10 0 l 0 5 z';\n        break;\n\n      case 'ArrowRight':\n        arrowString = 'l 10 -10 l 0 5 l 10 0 l 0 10 l -10 0 l 0 5 z';\n        break;\n    }\n\n    return arrowString;\n  };\n\n  StockEvents.prototype.applyHighLights = function (pointIndex, seriesIndex) {\n    if (this.pointIndex !== pointIndex || this.seriesIndex !== seriesIndex) {\n      this.removeHighLights();\n    }\n\n    this.pointIndex = pointIndex;\n    this.seriesIndex = seriesIndex;\n    var stockId = this.chartId + '_Series_' + seriesIndex + '_StockEvents_' + pointIndex;\n    this.setOpacity(stockId + '_Shape', 0.5);\n    this.setOpacity(stockId + '_Text', 0.5);\n  };\n\n  StockEvents.prototype.removeHighLights = function () {\n    var stockId = this.chartId + '_Series_' + this.seriesIndex + '_StockEvents_' + this.pointIndex;\n    this.setOpacity(stockId + '_Shape', 1);\n    this.setOpacity(stockId + '_Text', 1);\n  };\n\n  StockEvents.prototype.setOpacity = function (elementId, opacity) {\n    if (getElement(elementId)) {\n      getElement(elementId).setAttribute('opacity', opacity.toString());\n    }\n  };\n  /**\r\n   * To convert the c# or javascript date formats into js format\r\n   * refer chart control's dateTime processing.\r\n   *\r\n   * @param {Date | string} value date or string value\r\n   * @returns {Date} date format value\r\n   */\n\n\n  StockEvents.prototype.dateParse = function (value) {\n    var dateParser = this.chart.intl.getDateParser({\n      skeleton: 'full',\n      type: 'dateTime'\n    });\n    var dateFormatter = this.chart.intl.getDateFormat({\n      skeleton: 'full',\n      type: 'dateTime'\n    });\n    return new Date(Date.parse(dateParser(dateFormatter(new Date(DataUtil.parse.parseJson({\n      val: value\n    }).val)))));\n  };\n\n  return StockEvents;\n}(BaseTooltip);\n\nexport { StockEvents }; // eslint-disable-next-line valid-jsdoc\n\n/**\r\n * To initialthe array\r\n *\r\n * @param {number} numrows numrows\r\n * @param {number} numcols numcols\r\n * @param {ChartLocation} initial initial\r\n * @returns {ChartLocation[][]} ChartLocation\r\n */\n\nfunction initialArray(numrows, numcols, initial) {\n  var arr = [];\n\n  for (var i = 0; i < numrows; ++i) {\n    var columns = [];\n\n    for (var j = 0; j < numcols; ++j) {\n      columns[j] = initial;\n    }\n\n    arr[i] = columns;\n  }\n\n  return arr;\n}","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/stock-events.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","withIn","PointData","textElement","getElement","valueToCoefficient","drawSymbol","ChartLocation","BaseTooltip","Tooltip","PathOption","TextOption","measureText","Size","createElement","remove","DataUtil","stockEventRender","StockEvents","_super","stockChart","_this","call","chart","symbolLocations","chartId","element","id","renderStockEvents","sChart","stockEvent","stockEventElement","textSize","stockEventsElementGroup","renderer","createGroup","initialArray","series","length","stockEvents","i","_i","_a","argsData","name","text","type","cancel","trigger","textStyle","index","stockEventDate","dateParse","date","getTime","xAxis","visibleRange","seriesIndexes","j","appendChild","creatEventGroup","symbolLocation","findClosePoint","showOnSeries","y","yAxis","rect","height","createStockElements","sEvent","closeIndex","getClosest","pointData","point","yPixel","k","points","xValue","visible","xPixel","x","width","placeAt","stockEve","result","pathString","pathOption","lx","ly","stockId","border","color","toISOString","background","findArrowpaths","drawPath","renderStockEventTooltip","targetId","seriesIndex","parseInt","split","pointIndex","replace","updatedLocation","pointLocation","toolbarHeight","titleSize","applyHighLights","svgElement","isTooltip","getAttribute","tooltipElement","className","attrs","stockEventTooltip","opacity","header","content","description","enableAnimation","location","theme","inverted","areaBounds","chartAxisLayoutPanel","seriesClipRect","appendTo","dataBind","removeStockEventTooltip","duration","stopAnimation","toolTipInterval","setTimeout","fadeOut","removeHighLights","arrowString","setOpacity","elementId","setAttribute","toString","value","dateParser","intl","getDateParser","skeleton","dateFormatter","getDateFormat","Date","parse","parseJson","val","numrows","numcols","initial","arr","columns"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { withIn, PointData, textElement, getElement, valueToCoefficient, drawSymbol, ChartLocation } from '../../common/utils/helper';\r\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\r\nimport { Tooltip, PathOption, TextOption, measureText, Size } from '@syncfusion/ej2-svg-base';\r\nimport { createElement, remove } from '@syncfusion/ej2-base';\r\nimport { DataUtil } from '@syncfusion/ej2-data';\r\nimport { stockEventRender } from '../../common/model/constants';\r\n/**\r\n * @private\r\n */\r\nvar StockEvents = /** @class */ (function (_super) {\r\n    __extends(StockEvents, _super);\r\n    function StockEvents(stockChart) {\r\n        var _this = _super.call(this, stockChart.chart) || this;\r\n        /** @private */\r\n        _this.symbolLocations = [];\r\n        _this.stockChart = stockChart;\r\n        _this.chartId = _this.stockChart.element.id;\r\n        return _this;\r\n    }\r\n    /**\r\n     * To render stock events in chart\r\n     *\r\n     * @returns {Element} Stock event element\r\n     * @private\r\n     */\r\n    StockEvents.prototype.renderStockEvents = function () {\r\n        var sChart = this.stockChart;\r\n        var stockEvent;\r\n        var stockEventElement;\r\n        var textSize;\r\n        // Creation of group elements for stock events\r\n        var stockEventsElementGroup = sChart.renderer.createGroup({ id: this.chartId + '_StockEvents' });\r\n        this.symbolLocations = initialArray(sChart.series.length, sChart.stockEvents.length, new ChartLocation(0, 0));\r\n        for (var i = 0; i < sChart.stockEvents.length; i++) {\r\n            stockEvent = this.stockChart.stockEvents[i];\r\n            for (var _i = 0, _a = sChart.chart.series; _i < _a.length; _i++) {\r\n                var series = _a[_i];\r\n                var argsData = {\r\n                    name: stockEventRender, stockChart: sChart, text: stockEvent.text,\r\n                    type: stockEvent.type, cancel: false, series: series\r\n                };\r\n                sChart.trigger(stockEventRender, argsData);\r\n                stockEvent.text = argsData.text;\r\n                stockEvent.type = argsData.type;\r\n                textSize = measureText(stockEvent.text + 'W', stockEvent.textStyle);\r\n                if (!argsData.cancel) {\r\n                    stockEventElement = sChart.renderer.createGroup({ id: this.chartId + '_Series_' + series.index + '_StockEvents_' + i });\r\n                    var stockEventDate = this.dateParse(stockEvent.date).getTime();\r\n                    if (withIn(stockEventDate, series.xAxis.visibleRange)) {\r\n                        if (stockEvent.seriesIndexes.length > 0) {\r\n                            for (var j = 0; j < stockEvent.seriesIndexes.length; j++) {\r\n                                if (stockEvent.seriesIndexes[j] === series.index) {\r\n                                    stockEventsElementGroup.appendChild(this.creatEventGroup(stockEventElement, series, stockEvent, i, textSize));\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            stockEventsElementGroup.appendChild(this.creatEventGroup(stockEventElement, series, stockEvent, i, textSize));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return stockEventsElementGroup;\r\n    };\r\n    StockEvents.prototype.creatEventGroup = function (stockEventElement, series, stockEvent, i, textSize) {\r\n        var symbolLocation = this.findClosePoint(series, stockEvent);\r\n        if (!stockEvent.showOnSeries) {\r\n            symbolLocation.y = series.yAxis.rect.y + series.yAxis.rect.height;\r\n        }\r\n        this.symbolLocations[series.index][i] = symbolLocation;\r\n        this.createStockElements(stockEventElement, stockEvent, series, i, symbolLocation, textSize);\r\n        return stockEventElement;\r\n    };\r\n    StockEvents.prototype.findClosePoint = function (series, sEvent) {\r\n        var stockEventDate = this.dateParse(sEvent.date).getTime();\r\n        var closeIndex = this.getClosest(series, stockEventDate);\r\n        var pointData;\r\n        var point;\r\n        var yPixel;\r\n        for (var k = 0; k < series.points.length; k++) {\r\n            point = series.points[k];\r\n            if (closeIndex === point.xValue && point.visible) {\r\n                pointData = new PointData(point, series);\r\n            }\r\n            else if (k !== 0 && k !== series.points.length) {\r\n                if (closeIndex > series.points[k - 1].xValue && closeIndex < series.points[k + 1].xValue) {\r\n                    pointData = new PointData(point, series);\r\n                }\r\n            }\r\n        }\r\n        var xPixel = series.xAxis.rect.x + valueToCoefficient(pointData.point.xValue, series.xAxis) * series.xAxis.rect.width;\r\n        yPixel = valueToCoefficient(pointData.point[sEvent.placeAt], series.yAxis) * series.yAxis.rect.height;\r\n        yPixel = (yPixel * -1) + (series.yAxis.rect.y + series.yAxis.rect.height);\r\n        return new ChartLocation(xPixel, yPixel);\r\n    };\r\n    StockEvents.prototype.createStockElements = function (stockEventElement, stockEve, series, i, symbolLocation, textSize) {\r\n        var result = new Size(textSize.width > 20 ? textSize.width : 20, textSize.height > 20 ? textSize.height : 20);\r\n        var pathString;\r\n        var pathOption;\r\n        var lx = symbolLocation.x;\r\n        var ly = symbolLocation.y;\r\n        var stockId = this.chartId + '_Series_' + series.index + '_StockEvents_' + i;\r\n        var border = stockEve.border;\r\n        switch (stockEve.type) {\r\n            case 'Flag':\r\n            case 'Circle':\r\n            case 'Square':\r\n                stockEventElement.appendChild(drawSymbol(new ChartLocation(lx, ly), 'Circle', new Size(2, 2), '', new PathOption(stockId + '_Circle', 'transparent', border.width, border.color), this.dateParse(stockEve.date).toISOString()));\r\n                stockEventElement.appendChild(drawSymbol(new ChartLocation(lx, ly - 5), 'VerticalLine', new Size(9, 9), '', new PathOption(stockId + '_Path', border.color, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\r\n                stockEventElement.appendChild(drawSymbol(new ChartLocation(stockEve.type !== 'Flag' ? lx : lx + result.width / 2, ly - result.height), stockEve.type, result, '', new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\r\n                textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', stockEve.type !== 'Flag' ? symbolLocation.x : symbolLocation.x + result.width / 2, (symbolLocation.y - result.height), 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\r\n                break;\r\n            case 'ArrowUp':\r\n            case 'ArrowDown':\r\n            case 'ArrowRight':\r\n            case 'ArrowLeft':\r\n                pathString = 'M' + ' ' + lx + ' ' + ly + ' ' + this.findArrowpaths(stockEve.type);\r\n                pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\r\n                stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption));\r\n                break;\r\n            case 'Triangle':\r\n            case 'InvertedTriangle':\r\n                result.height = 3 * textSize.height;\r\n                result.width = textSize.width + (1.5 * textSize.width);\r\n                stockEventElement.appendChild(drawSymbol(new ChartLocation(symbolLocation.x, symbolLocation.y), stockEve.type, new Size(20, 20), '', new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color), this.dateParse(stockEve.date).toISOString()));\r\n                textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', symbolLocation.x, symbolLocation.y, 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\r\n                break;\r\n            case 'Text':\r\n                textSize.height += 8; //padding for text height\r\n                pathString = 'M' + ' ' + (lx) + ' ' + (ly) + ' ' +\r\n                    'L' + ' ' + (lx - 5) + ' ' + (ly - 5) + ' ' +\r\n                    'L' + ' ' + (lx - ((textSize.width) / 2)) + ' ' + (ly - 5) + ' ' +\r\n                    'L' + ' ' + (lx - ((textSize.width) / 2)) + ' ' + (ly - textSize.height) + ' ' +\r\n                    'L' + ' ' + (lx + ((textSize.width) / 2)) + ' ' + (ly - textSize.height) + ' ' +\r\n                    'L' + ' ' + (lx + ((textSize.width) / 2)) + ' ' + (ly - 5) + ' ' +\r\n                    'L' + ' ' + (lx + 5) + ' ' + (ly - 5) + ' ' + 'Z';\r\n                pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\r\n                stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption));\r\n                textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', lx, ly - (textSize.height / 2), 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\r\n                break;\r\n            default:\r\n                //pin type calculation.\r\n                pathString = 'M' + ' ' + lx + ' ' + ly + ' ' +\r\n                    'L' + ' ' + (lx - ((textSize.width) / 2)) + ' ' + (ly - textSize.height / 3) + ' ' +\r\n                    'L' + ' ' + (lx - ((textSize.width) / 2)) + ' ' + (ly - textSize.height) + ' ' +\r\n                    'L' + ' ' + (lx + ((textSize.width) / 2)) + ' ' + (ly - textSize.height) + ' ' +\r\n                    'L' + ' ' + (lx + ((textSize.width) / 2)) + ' ' + (ly - textSize.height / 3) + ' ' + 'Z';\r\n                pathOption = new PathOption(stockId + '_Shape', stockEve.background, border.width, border.color, 1, '', pathString);\r\n                stockEventElement.appendChild(this.stockChart.renderer.drawPath(pathOption));\r\n                //append text element\r\n                textElement(this.stockChart.renderer, new TextOption(stockId + '_Text', lx, ly - (textSize.height / 2), 'middle', stockEve.text, '', 'middle'), stockEve.textStyle, stockEve.textStyle.color, stockEventElement);\r\n        }\r\n    };\r\n    StockEvents.prototype.renderStockEventTooltip = function (targetId) {\r\n        var seriesIndex = parseInt((targetId.split('_StockEvents_')[0]).split(this.chartId + '_Series_')[1], 10);\r\n        var pointIndex = parseInt(targetId.split('_StockEvents_')[1].replace(/\\D+/g, ''), 10);\r\n        var updatedLocation = this.symbolLocations[seriesIndex][pointIndex];\r\n        var pointLocation = new ChartLocation(updatedLocation.x, updatedLocation.y + this.stockChart.toolbarHeight + this.stockChart.titleSize.height);\r\n        this.applyHighLights(pointIndex, seriesIndex);\r\n        //title size and toolbar height is added location for placing tooltip\r\n        var svgElement = this.getElement(this.chartId + '_StockEvents_Tooltip_svg');\r\n        var isTooltip = (svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0);\r\n        if (!isTooltip) {\r\n            if (getElement(this.chartId + '_StockEvents_Tooltip_svg')) {\r\n                remove(getElement(this.chartId + '_StockEvents_Tooltip'));\r\n            }\r\n            var tooltipElement = createElement('div', {\r\n                id: this.chartId + '_StockEvents_Tooltip', className: 'ejSVGTooltip',\r\n                attrs: { 'style': 'pointer-events:none; position:absolute;z-index: 1' }\r\n            });\r\n            getElement(this.chartId + '_Secondary_Element').appendChild(tooltipElement);\r\n            this.stockEventTooltip = new Tooltip({\r\n                opacity: 1,\r\n                header: '', content: [(this.stockChart.stockEvents[pointIndex].description)],\r\n                enableAnimation: true, location: pointLocation,\r\n                theme: this.stockChart.theme,\r\n                inverted: true,\r\n                areaBounds: this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect\r\n            });\r\n            this.stockEventTooltip.areaBounds.y += this.stockChart.toolbarHeight + this.stockChart.titleSize.height;\r\n            this.stockEventTooltip.appendTo('#' + tooltipElement.id);\r\n        }\r\n        else {\r\n            this.stockEventTooltip.content = [(this.stockChart.stockEvents[pointIndex].description)];\r\n            this.stockEventTooltip.location = pointLocation;\r\n            this.stockEventTooltip.dataBind();\r\n        }\r\n    };\r\n    /**\r\n     * Remove the stock event tooltip\r\n     *\r\n     * @param {number} duration tooltip timeout duration\r\n     * @returns {void}\r\n     */\r\n    StockEvents.prototype.removeStockEventTooltip = function (duration) {\r\n        var _this = this;\r\n        var tooltipElement = this.getElement(this.chartId + '_StockEvents_Tooltip');\r\n        this.stopAnimation();\r\n        if (tooltipElement && this.stockEventTooltip) {\r\n            this.toolTipInterval = +setTimeout(function () {\r\n                _this.stockEventTooltip.fadeOut();\r\n                _this.removeHighLights();\r\n            }, duration);\r\n        }\r\n    };\r\n    StockEvents.prototype.findArrowpaths = function (type) {\r\n        var arrowString = '';\r\n        switch (type) {\r\n            case 'ArrowUp':\r\n                arrowString = 'l -10 10 l 5 0 l 0 10 l 10 0 l 0 -10 l 5 0 z';\r\n                break;\r\n            case 'ArrowDown':\r\n                arrowString = 'l -10 -10 l 5 0 l 0 -10 l 10 0 l 0 10 l 5 0 z';\r\n                break;\r\n            case 'ArrowLeft':\r\n                arrowString = 'l -10 -10 l 0 5 l -10 0 l 0 10 l 10 0 l 0 5 z';\r\n                break;\r\n            case 'ArrowRight':\r\n                arrowString = 'l 10 -10 l 0 5 l 10 0 l 0 10 l -10 0 l 0 5 z';\r\n                break;\r\n        }\r\n        return arrowString;\r\n    };\r\n    StockEvents.prototype.applyHighLights = function (pointIndex, seriesIndex) {\r\n        if (this.pointIndex !== pointIndex || this.seriesIndex !== seriesIndex) {\r\n            this.removeHighLights();\r\n        }\r\n        this.pointIndex = pointIndex;\r\n        this.seriesIndex = seriesIndex;\r\n        var stockId = this.chartId + '_Series_' + seriesIndex + '_StockEvents_' + pointIndex;\r\n        this.setOpacity(stockId + '_Shape', 0.5);\r\n        this.setOpacity(stockId + '_Text', 0.5);\r\n    };\r\n    StockEvents.prototype.removeHighLights = function () {\r\n        var stockId = this.chartId + '_Series_' + this.seriesIndex + '_StockEvents_' + this.pointIndex;\r\n        this.setOpacity(stockId + '_Shape', 1);\r\n        this.setOpacity(stockId + '_Text', 1);\r\n    };\r\n    StockEvents.prototype.setOpacity = function (elementId, opacity) {\r\n        if (getElement(elementId)) {\r\n            getElement(elementId).setAttribute('opacity', opacity.toString());\r\n        }\r\n    };\r\n    /**\r\n     * To convert the c# or javascript date formats into js format\r\n     * refer chart control's dateTime processing.\r\n     *\r\n     * @param {Date | string} value date or string value\r\n     * @returns {Date} date format value\r\n     */\r\n    StockEvents.prototype.dateParse = function (value) {\r\n        var dateParser = this.chart.intl.getDateParser({ skeleton: 'full', type: 'dateTime' });\r\n        var dateFormatter = this.chart.intl.getDateFormat({ skeleton: 'full', type: 'dateTime' });\r\n        return new Date((Date.parse(dateParser(dateFormatter(new Date(DataUtil.parse.parseJson({ val: value }).val))))));\r\n    };\r\n    return StockEvents;\r\n}(BaseTooltip));\r\nexport { StockEvents };\r\n// eslint-disable-next-line valid-jsdoc\r\n/**\r\n * To initialthe array\r\n *\r\n * @param {number} numrows numrows\r\n * @param {number} numcols numcols\r\n * @param {ChartLocation} initial initial\r\n * @returns {ChartLocation[][]} ChartLocation\r\n */\r\nfunction initialArray(numrows, numcols, initial) {\r\n    var arr = [];\r\n    for (var i = 0; i < numrows; ++i) {\r\n        var columns = [];\r\n        for (var j = 0; j < numcols; ++j) {\r\n            columns[j] = initial;\r\n        }\r\n        arr[i] = columns;\r\n    }\r\n    return arr;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}