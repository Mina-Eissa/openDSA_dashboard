{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable @typescript-eslint/ban-types */\n\n/**\r\n * Cartesian chart renderer for financial chart\r\n */\nimport { Chart } from '../../chart/chart';\nimport { Size } from '@syncfusion/ej2-svg-base';\nimport { remove, extend } from '@syncfusion/ej2-base';\nimport { onZooming } from '../../common/model/constants';\nimport { getElement } from '../../common/utils/helper';\n/** @private */\n\nvar CartesianChart =\n/** @class */\nfunction () {\n  function CartesianChart(chart) {\n    this.stockChart = chart;\n  }\n\n  CartesianChart.prototype.initializeChart = function (chartArgsData) {\n    var _this = this;\n\n    var stockChart = this.stockChart;\n    var isProtect = 'isProtectedOnChange';\n    stockChart[isProtect] = true;\n\n    if (!stockChart.chartObject) {\n      stockChart.chartObject = stockChart.renderer.createGroup({\n        id: stockChart.element.id + '_stockChart_chart'\n      });\n      stockChart.mainObject.appendChild(stockChart.chartObject);\n    } else {\n      var chartElement = document.getElementById(stockChart.chartObject.id);\n\n      while (chartElement.firstChild) {\n        chartElement.removeChild(chartElement.firstChild);\n      }\n\n      if (getElement(stockChart.chartObject + '_tooltip')) {\n        remove(getElement(stockChart.chartObject + '_tooltip'));\n      }\n    }\n\n    this.cartesianChartSize = this.calculateChartSize();\n    stockChart.chart = new Chart({\n      chartArea: stockChart.chartArea,\n      margin: this.findMargin(stockChart),\n      primaryXAxis: this.copyObject(stockChart.primaryXAxis),\n      primaryYAxis: this.copyObject(stockChart.primaryYAxis),\n      rows: stockChart.rows,\n      indicators: stockChart.indicators,\n      axes: stockChart.axes,\n      tooltipRender: function (args) {\n        _this.stockChart.trigger('tooltipRender', args);\n      },\n      axisLabelRender: function (args) {\n        _this.stockChart.trigger('axisLabelRender', args);\n      },\n      seriesRender: function (args) {\n        if (args.data && _this.stockChart.startValue && _this.stockChart.endValue) {\n          args.data = args.data.filter(function (data) {\n            return new Date(Date.parse(data[args.series.xName])).getTime() >= _this.stockChart.startValue && new Date(Date.parse(data[args.series.xName])).getTime() <= _this.stockChart.endValue;\n          });\n        }\n\n        args.data = chartArgsData ? chartArgsData : args.data; //args.data = this.stockChart.findCurrentData(args.data ,args.series.xName);\n\n        _this.stockChart.trigger('seriesRender', args);\n      },\n      onZooming: function (args) {\n        _this.stockChart.trigger(onZooming, args);\n      },\n      pointClick: function (args) {\n        _this.stockChart.trigger('pointClick', args);\n      },\n      pointMove: function (args) {\n        _this.stockChart.trigger('pointMove', args);\n      },\n      dataSource: stockChart.dataSource,\n      series: this.findSeriesCollection(stockChart.series),\n      zoomSettings: this.copyObject(stockChart.zoomSettings),\n      tooltip: stockChart.tooltip,\n      crosshair: stockChart.crosshair,\n      height: this.cartesianChartSize.height.toString(),\n      selectedDataIndexes: stockChart.selectedDataIndexes,\n      selectionMode: stockChart.selectionMode,\n      isMultiSelect: stockChart.isMultiSelect,\n      annotations: stockChart.annotations,\n      theme: stockChart.theme,\n      legendSettings: {\n        visible: false\n      },\n      zoomComplete: function (args) {\n        if (args.axis.valueType === 'DateTime' && stockChart.rangeNavigator) {\n          _this.stockChart.zoomChange = true;\n\n          var newRange = _this.calculateUpdatedRange(args.currentZoomFactor, args.currentZoomPosition, args.axis);\n\n          stockChart.rangeSelector.sliderChange(newRange.start, newRange.end);\n        }\n      }\n    });\n\n    if (stockChart.indicators.length !== 0) {\n      if (stockChart.isSelect) {\n        for (var i = 0; i < stockChart.indicators.length; i++) {\n          stockChart.chart.indicators[i].animation.enable = false;\n          stockChart.chart.indicators[i].dataSource = extend([], stockChart.chart.series[0].dataSource, null, true);\n        }\n      }\n\n      stockChart.isSelect = true;\n    }\n\n    stockChart.chart.stockChart = stockChart;\n    stockChart.chart.appendTo(stockChart.chartObject);\n    stockChart[isProtect] = false;\n  };\n\n  CartesianChart.prototype.findMargin = function (stockChart) {\n    var margin = {};\n    margin.top = stockChart.stockLegendModule && stockChart.legendSettings.visible && stockChart.legendSettings.position === \"Top\" ? stockChart.margin.top : stockChart.margin.top * 2;\n    margin.left = stockChart.margin.left;\n    margin.right = stockChart.margin.right;\n    margin.bottom = stockChart.margin.bottom;\n    return margin;\n  };\n\n  CartesianChart.prototype.findSeriesCollection = function (series) {\n    var chartSeries = [];\n\n    for (var i = 0, len = series.length; i < len; i++) {\n      chartSeries.push(series[i]);\n      chartSeries[i].high = series[i].high;\n      chartSeries[i].low = series[i].low;\n      chartSeries[i].open = series[i].open;\n      chartSeries[i].close = series[i].close;\n      chartSeries[i].xName = series[i].xName;\n      chartSeries[i].volume = series[i].volume;\n      chartSeries[i].animation = series[i].animation;\n\n      if (series[i].localData) {\n        chartSeries[i].dataSource = series[i].localData;\n      }\n\n      chartSeries[i].yName = series[i].yName === '' ? series[i].close : series[i].yName;\n    }\n\n    return chartSeries;\n  };\n\n  CartesianChart.prototype.calculateChartSize = function () {\n    var stockChart = this.stockChart;\n    return new Size(stockChart.availableSize.width, stockChart.enablePeriodSelector && stockChart.enableSelector ? stockChart.availableSize.height - stockChart.toolbarHeight - 80 : stockChart.enableSelector && !stockChart.enablePeriodSelector ? stockChart.availableSize.height - 80 : stockChart.enablePeriodSelector && !stockChart.enableSelector ? stockChart.availableSize.height - stockChart.toolbarHeight : stockChart.availableSize.height);\n  };\n\n  CartesianChart.prototype.calculateUpdatedRange = function (zoomFactor, zoomPosition, axis) {\n    var start;\n    var end; //if (zoomFactor < 1 || zoomPosition > 0) {\n\n    var chartRange = axis.actualRange;\n    var inversed = false;\n\n    if (!inversed) {\n      start = chartRange.min + zoomPosition * chartRange.delta;\n      end = start + zoomFactor * chartRange.delta;\n    } else {\n      start = chartRange.max - zoomPosition * chartRange.delta;\n      end = start - zoomFactor * chartRange.delta;\n    } //}\n\n\n    var result = {\n      start: start,\n      end: end\n    };\n    return result;\n  };\n  /**\r\n   * Cartesian chart refreshes based on start and end value\r\n   *\r\n   * @param {StockChart} stockChart stock chart instance\r\n   * @param {Object[]} data stock chart data\r\n   * @returns {void}\r\n   */\n\n\n  CartesianChart.prototype.cartesianChartRefresh = function (stockChart, data) {\n    stockChart.cartesianChart.initializeChart(data);\n  };\n\n  CartesianChart.prototype.copyObject = function (originalObject) {\n    return extend({}, originalObject, {}, true);\n  };\n\n  return CartesianChart;\n}();\n\nexport { CartesianChart };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/stock-chart/renderer/cartesian-chart.js"],"names":["Chart","Size","remove","extend","onZooming","getElement","CartesianChart","chart","stockChart","prototype","initializeChart","chartArgsData","_this","isProtect","chartObject","renderer","createGroup","id","element","mainObject","appendChild","chartElement","document","getElementById","firstChild","removeChild","cartesianChartSize","calculateChartSize","chartArea","margin","findMargin","primaryXAxis","copyObject","primaryYAxis","rows","indicators","axes","tooltipRender","args","trigger","axisLabelRender","seriesRender","data","startValue","endValue","filter","Date","parse","series","xName","getTime","pointClick","pointMove","dataSource","findSeriesCollection","zoomSettings","tooltip","crosshair","height","toString","selectedDataIndexes","selectionMode","isMultiSelect","annotations","theme","legendSettings","visible","zoomComplete","axis","valueType","rangeNavigator","zoomChange","newRange","calculateUpdatedRange","currentZoomFactor","currentZoomPosition","rangeSelector","sliderChange","start","end","length","isSelect","i","animation","enable","appendTo","top","stockLegendModule","position","left","right","bottom","chartSeries","len","push","high","low","open","close","volume","localData","yName","availableSize","width","enablePeriodSelector","enableSelector","toolbarHeight","zoomFactor","zoomPosition","chartRange","actualRange","inversed","min","delta","max","result","cartesianChartRefresh","cartesianChart","originalObject"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-inferrable-types */\r\n/* eslint-disable @typescript-eslint/ban-types */\r\n/**\r\n * Cartesian chart renderer for financial chart\r\n */\r\nimport { Chart } from '../../chart/chart';\r\nimport { Size } from '@syncfusion/ej2-svg-base';\r\nimport { remove, extend } from '@syncfusion/ej2-base';\r\nimport { onZooming } from '../../common/model/constants';\r\nimport { getElement } from '../../common/utils/helper';\r\n/** @private */\r\nvar CartesianChart = /** @class */ (function () {\r\n    function CartesianChart(chart) {\r\n        this.stockChart = chart;\r\n    }\r\n    CartesianChart.prototype.initializeChart = function (chartArgsData) {\r\n        var _this = this;\r\n        var stockChart = this.stockChart;\r\n        var isProtect = 'isProtectedOnChange';\r\n        stockChart[isProtect] = true;\r\n        if (!stockChart.chartObject) {\r\n            stockChart.chartObject = stockChart.renderer.createGroup({\r\n                id: stockChart.element.id + '_stockChart_chart'\r\n            });\r\n            stockChart.mainObject.appendChild(stockChart.chartObject);\r\n        }\r\n        else {\r\n            var chartElement = document.getElementById(stockChart.chartObject.id);\r\n            while (chartElement.firstChild) {\r\n                chartElement.removeChild(chartElement.firstChild);\r\n            }\r\n            if (getElement(stockChart.chartObject + '_tooltip')) {\r\n                remove(getElement(stockChart.chartObject + '_tooltip'));\r\n            }\r\n        }\r\n        this.cartesianChartSize = this.calculateChartSize();\r\n        stockChart.chart = new Chart({\r\n            chartArea: stockChart.chartArea,\r\n            margin: this.findMargin(stockChart),\r\n            primaryXAxis: this.copyObject(stockChart.primaryXAxis),\r\n            primaryYAxis: this.copyObject(stockChart.primaryYAxis),\r\n            rows: stockChart.rows,\r\n            indicators: stockChart.indicators,\r\n            axes: stockChart.axes,\r\n            tooltipRender: function (args) {\r\n                _this.stockChart.trigger('tooltipRender', args);\r\n            },\r\n            axisLabelRender: function (args) {\r\n                _this.stockChart.trigger('axisLabelRender', args);\r\n            },\r\n            seriesRender: function (args) {\r\n                if (args.data && _this.stockChart.startValue && _this.stockChart.endValue) {\r\n                    args.data = args.data\r\n                        .filter(function (data) {\r\n                        return (new Date(Date.parse(data[args.series.xName])).getTime() >= _this.stockChart.startValue &&\r\n                            new Date(Date.parse(data[args.series.xName])).getTime() <= _this.stockChart.endValue);\r\n                    });\r\n                }\r\n                args.data = chartArgsData ? chartArgsData : args.data;\r\n                //args.data = this.stockChart.findCurrentData(args.data ,args.series.xName);\r\n                _this.stockChart.trigger('seriesRender', args);\r\n            },\r\n            onZooming: function (args) { _this.stockChart.trigger(onZooming, args); },\r\n            pointClick: function (args) {\r\n                _this.stockChart.trigger('pointClick', args);\r\n            },\r\n            pointMove: function (args) {\r\n                _this.stockChart.trigger('pointMove', args);\r\n            },\r\n            dataSource: stockChart.dataSource,\r\n            series: this.findSeriesCollection(stockChart.series),\r\n            zoomSettings: this.copyObject(stockChart.zoomSettings),\r\n            tooltip: stockChart.tooltip,\r\n            crosshair: stockChart.crosshair,\r\n            height: this.cartesianChartSize.height.toString(),\r\n            selectedDataIndexes: stockChart.selectedDataIndexes,\r\n            selectionMode: stockChart.selectionMode,\r\n            isMultiSelect: stockChart.isMultiSelect,\r\n            annotations: stockChart.annotations,\r\n            theme: stockChart.theme,\r\n            legendSettings: { visible: false },\r\n            zoomComplete: function (args) {\r\n                if (args.axis.valueType === 'DateTime' && stockChart.rangeNavigator) {\r\n                    _this.stockChart.zoomChange = true;\r\n                    var newRange = _this.calculateUpdatedRange(args.currentZoomFactor, args.currentZoomPosition, args.axis);\r\n                    stockChart.rangeSelector.sliderChange(newRange.start, newRange.end);\r\n                }\r\n            }\r\n        });\r\n        if (stockChart.indicators.length !== 0) {\r\n            if (stockChart.isSelect) {\r\n                for (var i = 0; i < stockChart.indicators.length; i++) {\r\n                    stockChart.chart.indicators[i].animation.enable = false;\r\n                    stockChart.chart.indicators[i].dataSource = extend([], stockChart.chart.series[0].dataSource, null, true);\r\n                }\r\n            }\r\n            stockChart.isSelect = true;\r\n        }\r\n        stockChart.chart.stockChart = stockChart;\r\n        stockChart.chart.appendTo(stockChart.chartObject);\r\n        stockChart[isProtect] = false;\r\n    };\r\n    CartesianChart.prototype.findMargin = function (stockChart) {\r\n        var margin = {};\r\n        margin.top = stockChart.stockLegendModule && stockChart.legendSettings.visible && stockChart.legendSettings.position === \"Top\" ?\r\n            stockChart.margin.top : stockChart.margin.top * 2;\r\n        margin.left = stockChart.margin.left;\r\n        margin.right = stockChart.margin.right;\r\n        margin.bottom = stockChart.margin.bottom;\r\n        return margin;\r\n    };\r\n    CartesianChart.prototype.findSeriesCollection = function (series) {\r\n        var chartSeries = [];\r\n        for (var i = 0, len = series.length; i < len; i++) {\r\n            chartSeries.push(series[i]);\r\n            chartSeries[i].high = series[i].high;\r\n            chartSeries[i].low = series[i].low;\r\n            chartSeries[i].open = series[i].open;\r\n            chartSeries[i].close = series[i].close;\r\n            chartSeries[i].xName = series[i].xName;\r\n            chartSeries[i].volume = series[i].volume;\r\n            chartSeries[i].animation = series[i].animation;\r\n            if (series[i].localData) {\r\n                chartSeries[i].dataSource = series[i].localData;\r\n            }\r\n            chartSeries[i].yName = series[i].yName === '' ? series[i].close : series[i].yName;\r\n        }\r\n        return chartSeries;\r\n    };\r\n    CartesianChart.prototype.calculateChartSize = function () {\r\n        var stockChart = this.stockChart;\r\n        return (new Size(stockChart.availableSize.width, (stockChart.enablePeriodSelector && stockChart.enableSelector) ?\r\n            ((stockChart.availableSize.height - stockChart.toolbarHeight - 80)) :\r\n            (stockChart.enableSelector && !stockChart.enablePeriodSelector) ? (stockChart.availableSize.height - 80) :\r\n                (stockChart.enablePeriodSelector && !stockChart.enableSelector) ?\r\n                    stockChart.availableSize.height - stockChart.toolbarHeight : stockChart.availableSize.height));\r\n    };\r\n    CartesianChart.prototype.calculateUpdatedRange = function (zoomFactor, zoomPosition, axis) {\r\n        var start;\r\n        var end;\r\n        //if (zoomFactor < 1 || zoomPosition > 0) {\r\n        var chartRange = axis.actualRange;\r\n        var inversed = false;\r\n        if (!inversed) {\r\n            start = chartRange.min + zoomPosition * chartRange.delta;\r\n            end = start + zoomFactor * chartRange.delta;\r\n        }\r\n        else {\r\n            start = chartRange.max - (zoomPosition * chartRange.delta);\r\n            end = start - (zoomFactor * chartRange.delta);\r\n        }\r\n        //}\r\n        var result = { start: start, end: end };\r\n        return result;\r\n    };\r\n    /**\r\n     * Cartesian chart refreshes based on start and end value\r\n     *\r\n     * @param {StockChart} stockChart stock chart instance\r\n     * @param {Object[]} data stock chart data\r\n     * @returns {void}\r\n     */\r\n    CartesianChart.prototype.cartesianChartRefresh = function (stockChart, data) {\r\n        stockChart.cartesianChart.initializeChart(data);\r\n    };\r\n    CartesianChart.prototype.copyObject = function (originalObject) {\r\n        return (extend({}, originalObject, {}, true));\r\n    };\r\n    return CartesianChart;\r\n}());\r\nexport { CartesianChart };\r\n"]},"metadata":{},"sourceType":"module"}