{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { getUnicodeText, textTrim, withInBounds } from \"../../common/utils/helper\";\nimport { BaseLegend, LegendOptions, Location } from \"../../common/legend/legend\";\nimport { measureText } from '@syncfusion/ej2-svg-base';\nimport { legendClick, legendRender, regSub, regSup } from \"../../common/model/constants\";\nimport { StockChartBorder, StockChartFont, StockMargin } from \"../model/base\";\nimport { Browser } from \"@syncfusion/ej2-base\";\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\nimport { Theme } from \"../../common/model/theme\";\nimport { ContainerPadding } from '../../common/model/base';\n/**\r\n * Configures the legends in charts.\r\n */\n\nvar StockChartLegendSettings =\n/** @class */\nfunction (_super) {\n  __extends(StockChartLegendSettings, _super);\n\n  function StockChartLegendSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(false)], StockChartLegendSettings.prototype, \"visible\", void 0);\n\n  __decorate([Property(null)], StockChartLegendSettings.prototype, \"height\", void 0);\n\n  __decorate([Property(null)], StockChartLegendSettings.prototype, \"width\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, Location)], StockChartLegendSettings.prototype, \"location\", void 0);\n\n  __decorate([Property('Auto')], StockChartLegendSettings.prototype, \"position\", void 0);\n\n  __decorate([Property('Series')], StockChartLegendSettings.prototype, \"mode\", void 0);\n\n  __decorate([Property(8)], StockChartLegendSettings.prototype, \"padding\", void 0);\n\n  __decorate([Property('Center')], StockChartLegendSettings.prototype, \"alignment\", void 0);\n\n  __decorate([Complex(Theme.legendLabelFont, StockChartFont)], StockChartLegendSettings.prototype, \"textStyle\", void 0);\n\n  __decorate([Property(10)], StockChartLegendSettings.prototype, \"shapeHeight\", void 0);\n\n  __decorate([Property(10)], StockChartLegendSettings.prototype, \"shapeWidth\", void 0);\n\n  __decorate([Complex({}, StockChartBorder)], StockChartLegendSettings.prototype, \"border\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, StockMargin)], StockChartLegendSettings.prototype, \"margin\", void 0);\n\n  __decorate([Complex({\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  }, ContainerPadding)], StockChartLegendSettings.prototype, \"containerPadding\", void 0);\n\n  __decorate([Property(5)], StockChartLegendSettings.prototype, \"shapePadding\", void 0);\n\n  __decorate([Property('transparent')], StockChartLegendSettings.prototype, \"background\", void 0);\n\n  __decorate([Property(1)], StockChartLegendSettings.prototype, \"opacity\", void 0);\n\n  __decorate([Property(true)], StockChartLegendSettings.prototype, \"toggleVisibility\", void 0);\n\n  __decorate([Property(null)], StockChartLegendSettings.prototype, \"description\", void 0);\n\n  __decorate([Property(3)], StockChartLegendSettings.prototype, \"tabIndex\", void 0);\n\n  __decorate([Property(null)], StockChartLegendSettings.prototype, \"title\", void 0);\n\n  __decorate([Complex(Theme.legendTitleFont, StockChartFont)], StockChartLegendSettings.prototype, \"titleStyle\", void 0);\n\n  __decorate([Property('Top')], StockChartLegendSettings.prototype, \"titlePosition\", void 0);\n\n  __decorate([Property(100)], StockChartLegendSettings.prototype, \"maximumTitleWidth\", void 0);\n\n  __decorate([Property(true)], StockChartLegendSettings.prototype, \"enablePages\", void 0);\n\n  __decorate([Property(false)], StockChartLegendSettings.prototype, \"isInversed\", void 0);\n\n  return StockChartLegendSettings;\n}(ChildProperty);\n\nexport { StockChartLegendSettings };\n/**\r\n * `Legend` module is used to render legend for the stockchart.\r\n */\n\nvar StockLegend =\n/** @class */\nfunction (_super) {\n  __extends(StockLegend, _super);\n\n  function StockLegend(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.library = _this;\n\n    _this.addEventListener();\n\n    return _this;\n  }\n  /**\r\n   * Binding events for Stocklegend module.\r\n   */\n\n\n  StockLegend.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.on('click', this.click, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\n    this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\n  };\n  /**\r\n   * UnBinding events for Stocklegend module.\r\n   */\n\n\n  StockLegend.prototype.removeEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.off('click', this.click);\n    this.chart.off(Browser.touchEndEvent, this.mouseEnd);\n    this.chart.off(Browser.touchMoveEvent, this.mouseMove);\n  };\n  /**\r\n   * To handle mosue move for Stocklegend module\r\n   */\n\n\n  StockLegend.prototype.mouseMove = function (e) {\n    if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n      this.move(e);\n    }\n  };\n  /**\r\n   * To handle mosue end for Stocklegend module\r\n   */\n\n\n  StockLegend.prototype.mouseEnd = function (e) {\n    if (this.chart.legendSettings.visible && this.chart.isTouch) {\n      this.move(e);\n    }\n  };\n\n  StockLegend.prototype.getLegendOptions = function (visibleSeriesCollection, chart) {\n    this.legendCollections = [];\n    var seriesType;\n    var fillColor;\n\n    if (visibleSeriesCollection.length > 1) {\n      this.legend.mode = 'Series';\n    }\n\n    for (var _i = 0, visibleSeriesCollection_1 = visibleSeriesCollection; _i < visibleSeriesCollection_1.length; _i++) {\n      var series = visibleSeriesCollection_1[_i];\n\n      if (this.legend.mode === 'Series') {\n        series;\n\n        if (series.category !== 'Indicator') {\n          seriesType = series.type;\n          fillColor = series.pointColorMapping && series.points.length > 0 ? series.points[0].interior ? series.points[0].interior : series.interior : series.interior;\n          this.legendCollections.push(new LegendOptions(series.name, fillColor, series.legendShape, series.category === 'TrendLine' ? this.chart.series[series.sourceIndex].trendlines[series.index].visible : series.visible, seriesType, series.legendImageUrl, series.marker.shape, series.marker.visible));\n        }\n      }\n    }\n  };\n  /** @private */\n\n\n  StockLegend.prototype.getLegendBounds = function (availableSize, legendBound, legend) {\n    this.calculateLegendTitle(legend, legendBound);\n    var padding = legend.padding;\n    this.isTitle = legend.title ? true : false;\n    var titlePosition = legend.titlePosition;\n    var extraWidth = 0;\n    var extraHeight = 0;\n    var arrowHeight = this.arrowHeight;\n    var arrowWidth = this.arrowWidth;\n    var verticalArrowSpace = this.isVertical && !legend.enablePages ? arrowHeight : 0;\n    var titleSpace = this.isTitle && titlePosition === 'Top' ? this.fivePixel + this.legendTitleSize.height : 0;\n    titleSpace = this.isTitle && this.isVertical && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.height : titleSpace;\n\n    if (!this.isVertical) {\n      extraHeight = !legend.height ? availableSize.height / 100 * 5 : 0;\n    } else {\n      extraWidth = !legend.width ? availableSize.width / 100 * 5 : 0;\n    }\n\n    legendBound.height += extraHeight;\n    legendBound.width += extraWidth;\n    var shapePadding = legend.shapePadding;\n    var shapeWidth = legend.shapeWidth;\n    var maximum_Width = 0;\n    var row_Width = 0;\n    var legend_Width = 0;\n    var column_Height = 0;\n    var row_Count = 0;\n    var titlePlusArrowSpace = 0;\n    var legendEventArgs;\n    this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n    var render = false;\n\n    for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n      var legendOption = _a[_i];\n\n      if (regSup.test(legendOption.text)) {\n        legendOption.text = getUnicodeText(legendOption.text, regSup);\n      }\n\n      if (regSub.test(legendOption.text)) {\n        legendOption.text = getUnicodeText(legendOption.text, regSub);\n      }\n\n      legendEventArgs = {\n        fill: legendOption.fill,\n        text: legendOption.text,\n        shape: legendOption.shape,\n        markerShape: legendOption.markerShape,\n        name: legendRender,\n        cancel: false\n      };\n      this.chart.trigger(legendRender, legendEventArgs);\n      legendOption.text = legendEventArgs.text;\n      legendOption.render = !legendEventArgs.cancel;\n      legendOption.shape = legendEventArgs.shape;\n      legendOption.fill = legendEventArgs.fill;\n      legendOption.markerShape = legendEventArgs.markerShape;\n      legendOption.textSize = measureText(legendOption.text, legend.textStyle);\n\n      if (legendOption.render) {\n        render = true;\n        legend_Width = shapePadding + shapeWidth + legendOption.textSize.width + padding;\n        row_Width = row_Width + legend_Width;\n\n        if (!legend.enablePages && !this.isVertical) {\n          titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\n          titlePlusArrowSpace += arrowWidth;\n        }\n\n        if (legendBound.width < padding + row_Width + titlePlusArrowSpace || this.isVertical) {\n          maximum_Width = Math.max(maximum_Width, row_Width + padding + titlePlusArrowSpace - (this.isVertical ? 0 : legend_Width));\n\n          if (row_Count === 0 && legend_Width !== row_Width) {\n            row_Count = 1;\n          }\n\n          row_Width = this.isVertical ? 0 : legend_Width;\n          row_Count++;\n          column_Height = row_Count * (this.maxItemHeight + padding) + padding + titleSpace + verticalArrowSpace;\n        }\n      }\n    }\n\n    column_Height = Math.max(column_Height, this.maxItemHeight + padding + padding + titleSpace);\n    this.isPaging = legendBound.height < column_Height;\n\n    if (this.isPaging && !legend.enablePages) {\n      if (this.isVertical) {\n        // eslint-disable-next-line no-self-assign\n        column_Height = column_Height;\n      } else {\n        column_Height = this.maxItemHeight + padding + padding + (titlePosition === 'Top' ? titleSpace : 0);\n      }\n    }\n\n    this.totalPages = row_Count;\n\n    if (!this.isPaging && !this.isVertical) {\n      row_Width += this.isTitle && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.width + this.fivePixel : 0;\n    }\n\n    if (render) {\n      this.setBounds(Math.max(row_Width + padding, maximum_Width), column_Height, legend, legendBound);\n    } else {\n      this.setBounds(0, 0, legend, legendBound);\n    }\n  };\n  /** @private */\n\n\n  StockLegend.prototype.getRenderPoint = function (legendOptions, start, textPadding, prevLegend, rect, count, firstLegend) {\n    var previousBound = prevLegend.location.x + textPadding + prevLegend.textSize.width;\n    var padding = this.legend.padding;\n\n    if (previousBound + (legendOptions.textSize.width + textPadding) > rect.x + rect.width + this.legend.shapeWidth / 2 || this.isVertical) {\n      legendOptions.location.x = start.x;\n      legendOptions.location.y = count === firstLegend ? prevLegend.location.y : prevLegend.location.y + this.maxItemHeight + padding;\n    } else {\n      legendOptions.location.x = count === firstLegend ? prevLegend.location.x : previousBound;\n      legendOptions.location.y = prevLegend.location.y;\n    }\n\n    var availwidth = this.legendBounds.width + this.legendBounds.x - (legendOptions.location.x + textPadding - this.legend.shapeWidth / 2);\n    legendOptions.text = textTrim(+availwidth.toFixed(4), legendOptions.text, this.legend.textStyle);\n  };\n  /** @private */\n\n\n  StockLegend.prototype.legendClick = function (index, event) {\n    var chart = this.chart;\n    var seriesIndex = chart.legendSettings.mode === 'Series' ? index : 0;\n    var targetSeries = chart.visibleSeries[seriesIndex];\n    var targetLegend = this.legendCollections[index];\n    var legendClickArgs = {\n      legendText: targetLegend.text,\n      legendShape: targetLegend.shape,\n      chart: chart,\n      series: targetSeries,\n      name: legendClick,\n      cancel: false\n    };\n    this.chart.trigger(legendClick, legendClickArgs);\n    targetSeries.legendShape = legendClickArgs.legendShape;\n\n    if (targetSeries.fill !== null) {\n      chart.visibleSeries[index].interior = targetSeries.fill;\n    }\n\n    if (chart.legendSettings.toggleVisibility) {\n      this.changeSeriesVisiblity(targetSeries, targetSeries.visible);\n      targetLegend.visible = targetSeries.category === 'TrendLine' ? chart.series[targetSeries.sourceIndex].trendlines[targetSeries.index].visible : targetSeries.visible;\n      this.refreshLegendToggle(chart, targetSeries);\n    }\n  };\n\n  StockLegend.prototype.refreshLegendToggle = function (chart, series) {\n    var bounds = chart.stockLegendModule.legendBounds;\n    chart.stockLegendModule.renderLegend(chart, chart.legendSettings, bounds);\n    chart.cartesianChart.cartesianChartRefresh(chart);\n  };\n\n  StockLegend.prototype.changeSeriesVisiblity = function (series, visibility) {\n    series.visible = !visibility;\n\n    if (this.SecondaryAxis(series.yAxis)) {\n      series.yAxis.internalVisibility = series.yAxis.series.some(function (value) {\n        return value.visible;\n      });\n    }\n\n    if (this.SecondaryAxis(series.xAxis)) {\n      series.xAxis.internalVisibility = series.xAxis.series.some(function (value) {\n        return value.visible;\n      });\n    }\n  };\n\n  StockLegend.prototype.SecondaryAxis = function (axis) {\n    return this.chart.axes.indexOf(axis) > -1;\n  };\n  /**\r\n   * To show the tooltip for the trimmed text in legend.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  StockLegend.prototype.click = function (event) {\n    var _this = this;\n\n    if (!this.chart.legendSettings.visible) {\n      return;\n    }\n\n    var pageY = this.chart.mouseY;\n    var pageX = this.chart.mouseX;\n    var legendRegion = [];\n    var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_', this.legendID + '_shape_'];\n    var targetId = event.target.id;\n    var seriesIndex;\n\n    for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n      var id = legendItemsId_1[_i];\n\n      if (targetId.indexOf(id) > -1) {\n        seriesIndex = parseInt(targetId.split(id)[1], 10);\n        this.legendClick(seriesIndex, event);\n        break;\n      }\n    }\n\n    if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n      this.changePage(event, false);\n    } else if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n      this.changePage(event, true);\n    }\n\n    legendRegion = this.legendRegions.filter(function (region) {\n      return withInBounds(pageX, pageY + (_this.isPaging ? (_this.currentPageNumber - 1) * _this.translatePage(null, 1, 2) : 0), region.rect);\n    });\n  };\n  /**\r\n   * Get module name\r\n   */\n\n\n  StockLegend.prototype.getModuleName = function () {\n    return 'StockLegend';\n  };\n  /**\r\n   * To destroy the Legend.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  StockLegend.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return StockLegend;\n}(BaseLegend);\n\nexport { StockLegend };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/stock-chart/legend/legend.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","getUnicodeText","textTrim","withInBounds","BaseLegend","LegendOptions","Location","measureText","legendClick","legendRender","regSub","regSup","StockChartBorder","StockChartFont","StockMargin","Browser","Property","Complex","ChildProperty","Theme","ContainerPadding","StockChartLegendSettings","_super","apply","x","y","legendLabelFont","left","right","top","bottom","legendTitleFont","StockLegend","chart","_this","call","library","addEventListener","isDestroyed","on","click","touchEndEvent","mouseEnd","touchMoveEvent","mouseMove","removeEventListener","off","e","legendSettings","visible","isTouch","move","getLegendOptions","visibleSeriesCollection","legendCollections","seriesType","fillColor","legend","mode","_i","visibleSeriesCollection_1","series","category","type","pointColorMapping","points","interior","push","name","legendShape","sourceIndex","trendlines","index","legendImageUrl","marker","shape","getLegendBounds","availableSize","legendBound","calculateLegendTitle","padding","isTitle","title","titlePosition","extraWidth","extraHeight","arrowHeight","arrowWidth","verticalArrowSpace","isVertical","enablePages","titleSpace","fivePixel","legendTitleSize","height","width","shapePadding","shapeWidth","maximum_Width","row_Width","legend_Width","column_Height","row_Count","titlePlusArrowSpace","legendEventArgs","maxItemHeight","Math","max","textStyle","shapeHeight","render","_a","legendOption","test","text","fill","markerShape","cancel","trigger","textSize","isPaging","totalPages","setBounds","getRenderPoint","legendOptions","start","textPadding","prevLegend","rect","count","firstLegend","previousBound","location","availwidth","legendBounds","toFixed","event","seriesIndex","targetSeries","visibleSeries","targetLegend","legendClickArgs","legendText","toggleVisibility","changeSeriesVisiblity","refreshLegendToggle","bounds","stockLegendModule","renderLegend","cartesianChart","cartesianChartRefresh","visibility","SecondaryAxis","yAxis","internalVisibility","some","value","xAxis","axis","axes","indexOf","pageY","mouseY","pageX","mouseX","legendRegion","legendItemsId","legendID","targetId","id","legendItemsId_1","parseInt","split","changePage","legendRegions","filter","region","currentPageNumber","translatePage","getModuleName","destroy"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,UAAU,GAAI,QAAQ,KAAKA,UAAd,IAA6B,UAAUC,UAAV,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACnF,MAAIC,CAAC,GAAGC,SAAS,CAACC,MAAlB;AAAA,MAA0BC,CAAC,GAAGH,CAAC,GAAG,CAAJ,GAAQH,MAAR,GAAiBE,IAAI,KAAK,IAAT,GAAgBA,IAAI,GAAGd,MAAM,CAACmB,wBAAP,CAAgCP,MAAhC,EAAwCC,GAAxC,CAAvB,GAAsEC,IAArH;AAAA,MAA2HhB,CAA3H;AACA,MAAI,OAAOsB,OAAP,KAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACC,QAAf,KAA4B,UAA/D,EAA2EH,CAAC,GAAGE,OAAO,CAACC,QAAR,CAAiBV,UAAjB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIQ,CAAC,GAAGX,UAAU,CAACM,MAAX,GAAoB,CAAjC,EAAoCK,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD,IAAIxB,CAAC,GAAGa,UAAU,CAACW,CAAD,CAAlB,EAAuBJ,CAAC,GAAG,CAACH,CAAC,GAAG,CAAJ,GAAQjB,CAAC,CAACoB,CAAD,CAAT,GAAeH,CAAC,GAAG,CAAJ,GAAQjB,CAAC,CAACc,MAAD,EAASC,GAAT,EAAcK,CAAd,CAAT,GAA4BpB,CAAC,CAACc,MAAD,EAASC,GAAT,CAA7C,KAA+DK,CAAnE;AAC7E,SAAOH,CAAC,GAAG,CAAJ,IAASG,CAAT,IAAclB,MAAM,CAACuB,cAAP,CAAsBX,MAAtB,EAA8BC,GAA9B,EAAmCK,CAAnC,CAAd,EAAqDA,CAA5D;AACH,CALD;;AAMA,SAASM,cAAT,EAAyBC,QAAzB,EAAmCC,YAAnC,QAAuD,2BAAvD;AACA,SAASC,UAAT,EAAqBC,aAArB,EAAoCC,QAApC,QAAoD,4BAApD;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,WAAT,EAAsBC,YAAtB,EAAoCC,MAApC,EAA4CC,MAA5C,QAA0D,8BAA1D;AACA,SAASC,gBAAT,EAA2BC,cAA3B,EAA2CC,WAA3C,QAA8D,eAA9D;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,QAAT,EAAmBC,OAAnB,EAA4BC,aAA5B,QAAiD,sBAAjD;AACA,SAASC,KAAT,QAAsB,0BAAtB;AACA,SAASC,gBAAT,QAAiC,yBAAjC;AACA;AACA;AACA;;AACA,IAAIC,wBAAwB;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC5DjD,EAAAA,SAAS,CAACgD,wBAAD,EAA2BC,MAA3B,CAAT;;AACA,WAASD,wBAAT,GAAoC;AAChC,WAAOC,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACC,KAAP,CAAa,IAAb,EAAmB9B,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDN,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,KAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,SAF7B,EAEwC,KAAK,CAF7C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,QAF7B,EAEuC,KAAK,CAF5C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,OAF7B,EAEsC,KAAK,CAF3C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAAC;AAAEO,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAAD,EAAiBnB,QAAjB,CADA,CAAD,EAEPe,wBAAwB,CAACpC,SAFlB,EAE6B,UAF7B,EAEyC,KAAK,CAF9C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,MAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,UAF7B,EAEyC,KAAK,CAF9C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,QAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,MAF7B,EAEqC,KAAK,CAF1C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,CAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,SAF7B,EAEwC,KAAK,CAF7C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,QAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,WAF7B,EAE0C,KAAK,CAF/C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAACE,KAAK,CAACO,eAAP,EAAwBb,cAAxB,CADA,CAAD,EAEPQ,wBAAwB,CAACpC,SAFlB,EAE6B,WAF7B,EAE0C,KAAK,CAF/C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,EAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,aAF7B,EAE4C,KAAK,CAFjD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,EAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,YAF7B,EAE2C,KAAK,CAFhD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAAC,EAAD,EAAKL,gBAAL,CADA,CAAD,EAEPS,wBAAwB,CAACpC,SAFlB,EAE6B,QAF7B,EAEuC,KAAK,CAF5C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAAC;AAAEU,IAAAA,IAAI,EAAE,CAAR;AAAWC,IAAAA,KAAK,EAAE,CAAlB;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,MAAM,EAAE;AAArC,GAAD,EAA2ChB,WAA3C,CADA,CAAD,EAEPO,wBAAwB,CAACpC,SAFlB,EAE6B,QAF7B,EAEuC,KAAK,CAF5C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAAC;AAAEU,IAAAA,IAAI,EAAE,CAAR;AAAWC,IAAAA,KAAK,EAAE,CAAlB;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,MAAM,EAAE;AAArC,GAAD,EAA2CV,gBAA3C,CADA,CAAD,EAEPC,wBAAwB,CAACpC,SAFlB,EAE6B,kBAF7B,EAEiD,KAAK,CAFtD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,CAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,cAF7B,EAE6C,KAAK,CAFlD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,aAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,YAF7B,EAE2C,KAAK,CAFhD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,CAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,SAF7B,EAEwC,KAAK,CAF7C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,kBAF7B,EAEiD,KAAK,CAFtD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,aAF7B,EAE4C,KAAK,CAFjD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,CAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,UAF7B,EAEyC,KAAK,CAF9C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,OAF7B,EAEsC,KAAK,CAF3C,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP8B,OAAO,CAACE,KAAK,CAACY,eAAP,EAAwBlB,cAAxB,CADA,CAAD,EAEPQ,wBAAwB,CAACpC,SAFlB,EAE6B,YAF7B,EAE2C,KAAK,CAFhD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,KAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,eAF7B,EAE8C,KAAK,CAFnD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,GAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,mBAF7B,EAEkD,KAAK,CAFvD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,IAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,aAF7B,EAE4C,KAAK,CAFjD,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACP6B,QAAQ,CAAC,KAAD,CADD,CAAD,EAEPK,wBAAwB,CAACpC,SAFlB,EAE6B,YAF7B,EAE2C,KAAK,CAFhD,CAAV;;AAGA,SAAOoC,wBAAP;AACH,CApF6C,CAoF5CH,aApF4C,CAA9C;;AAqFA,SAASG,wBAAT;AACA;AACA;AACA;;AACA,IAAIW,WAAW;AAAG;AAAe,UAAUV,MAAV,EAAkB;AAC/CjD,EAAAA,SAAS,CAAC2D,WAAD,EAAcV,MAAd,CAAT;;AACA,WAASU,WAAT,CAAqBC,KAArB,EAA4B;AACxB,QAAIC,KAAK,GAAGZ,MAAM,CAACa,IAAP,CAAY,IAAZ,EAAkBF,KAAlB,KAA4B,IAAxC;;AACAC,IAAAA,KAAK,CAACE,OAAN,GAAgBF,KAAhB;;AACAA,IAAAA,KAAK,CAACG,gBAAN;;AACA,WAAOH,KAAP;AACH;AACD;AACJ;AACA;;;AACIF,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBoD,gBAAtB,GAAyC,YAAY;AACjD,QAAI,KAAKJ,KAAL,CAAWK,WAAf,EAA4B;AACxB;AACH;;AACD,SAAKL,KAAL,CAAWM,EAAX,CAAc,OAAd,EAAuB,KAAKC,KAA5B,EAAmC,IAAnC;AACA,SAAKP,KAAL,CAAWM,EAAX,CAAcxB,OAAO,CAAC0B,aAAtB,EAAqC,KAAKC,QAA1C,EAAoD,IAApD;AACA,SAAKT,KAAL,CAAWM,EAAX,CAAcxB,OAAO,CAAC4B,cAAtB,EAAsC,KAAKC,SAA3C,EAAsD,IAAtD;AACH,GAPD;AAQA;AACJ;AACA;;;AACIZ,EAAAA,WAAW,CAAC/C,SAAZ,CAAsB4D,mBAAtB,GAA4C,YAAY;AACpD,QAAI,KAAKZ,KAAL,CAAWK,WAAf,EAA4B;AACxB;AACH;;AACD,SAAKL,KAAL,CAAWa,GAAX,CAAe,OAAf,EAAwB,KAAKN,KAA7B;AACA,SAAKP,KAAL,CAAWa,GAAX,CAAe/B,OAAO,CAAC0B,aAAvB,EAAsC,KAAKC,QAA3C;AACA,SAAKT,KAAL,CAAWa,GAAX,CAAe/B,OAAO,CAAC4B,cAAvB,EAAuC,KAAKC,SAA5C;AACH,GAPD;AAQA;AACJ;AACA;;;AACIZ,EAAAA,WAAW,CAAC/C,SAAZ,CAAsB2D,SAAtB,GAAkC,UAAUG,CAAV,EAAa;AAC3C,QAAI,KAAKd,KAAL,CAAWe,cAAX,CAA0BC,OAA1B,IAAqC,CAAC,KAAKhB,KAAL,CAAWiB,OAArD,EAA8D;AAC1D,WAAKC,IAAL,CAAUJ,CAAV;AACH;AACJ,GAJD;AAKA;AACJ;AACA;;;AACIf,EAAAA,WAAW,CAAC/C,SAAZ,CAAsByD,QAAtB,GAAiC,UAAUK,CAAV,EAAa;AAC1C,QAAI,KAAKd,KAAL,CAAWe,cAAX,CAA0BC,OAA1B,IAAqC,KAAKhB,KAAL,CAAWiB,OAApD,EAA6D;AACzD,WAAKC,IAAL,CAAUJ,CAAV;AACH;AACJ,GAJD;;AAKAf,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBmE,gBAAtB,GAAyC,UAAUC,uBAAV,EAAmCpB,KAAnC,EAA0C;AAC/E,SAAKqB,iBAAL,GAAyB,EAAzB;AACA,QAAIC,UAAJ;AACA,QAAIC,SAAJ;;AACA,QAAIH,uBAAuB,CAAC3D,MAAxB,GAAiC,CAArC,EAAwC;AACpC,WAAK+D,MAAL,CAAYC,IAAZ,GAAmB,QAAnB;AACH;;AACD,SAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,yBAAyB,GAAGP,uBAA7C,EAAsEM,EAAE,GAAGC,yBAAyB,CAAClE,MAArG,EAA6GiE,EAAE,EAA/G,EAAmH;AAC/G,UAAIE,MAAM,GAAGD,yBAAyB,CAACD,EAAD,CAAtC;;AACA,UAAI,KAAKF,MAAL,CAAYC,IAAZ,KAAqB,QAAzB,EAAmC;AAC/BG,QAAAA,MAAM;;AACN,YAAIA,MAAM,CAACC,QAAP,KAAoB,WAAxB,EAAqC;AACjCP,UAAAA,UAAU,GAAGM,MAAM,CAACE,IAApB;AACAP,UAAAA,SAAS,GAAIK,MAAM,CAACG,iBAAP,IAA4BH,MAAM,CAACI,MAAP,CAAcvE,MAAd,GAAuB,CAApD,GACPmE,MAAM,CAACI,MAAP,CAAc,CAAd,EAAiBC,QAAjB,GAA4BL,MAAM,CAACI,MAAP,CAAc,CAAd,EAAiBC,QAA7C,GAAwDL,MAAM,CAACK,QADxD,GACoEL,MAAM,CAACK,QADvF;AAEA,eAAKZ,iBAAL,CAAuBa,IAAvB,CAA4B,IAAI9D,aAAJ,CAAkBwD,MAAM,CAACO,IAAzB,EAA+BZ,SAA/B,EAA0CK,MAAM,CAACQ,WAAjD,EAA+DR,MAAM,CAACC,QAAP,KAAoB,WAApB,GACvF,KAAK7B,KAAL,CAAW4B,MAAX,CAAkBA,MAAM,CAACS,WAAzB,EAAsCC,UAAtC,CAAiDV,MAAM,CAACW,KAAxD,EAA+DvB,OADwB,GACdY,MAAM,CAACZ,OADxD,EACkEM,UADlE,EAC8EM,MAAM,CAACY,cADrF,EACqGZ,MAAM,CAACa,MAAP,CAAcC,KADnH,EAC0Hd,MAAM,CAACa,MAAP,CAAczB,OADxI,CAA5B;AAEH;AACJ;AACJ;AACJ,GApBD;AAqBA;;;AACAjB,EAAAA,WAAW,CAAC/C,SAAZ,CAAsB2F,eAAtB,GAAwC,UAAUC,aAAV,EAAyBC,WAAzB,EAAsCrB,MAAtC,EAA8C;AAClF,SAAKsB,oBAAL,CAA0BtB,MAA1B,EAAkCqB,WAAlC;AACA,QAAIE,OAAO,GAAGvB,MAAM,CAACuB,OAArB;AACA,SAAKC,OAAL,GAAexB,MAAM,CAACyB,KAAP,GAAe,IAAf,GAAsB,KAArC;AACA,QAAIC,aAAa,GAAG1B,MAAM,CAAC0B,aAA3B;AACA,QAAIC,UAAU,GAAG,CAAjB;AACA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,WAAW,GAAG,KAAKA,WAAvB;AACA,QAAIC,UAAU,GAAG,KAAKA,UAAtB;AACA,QAAIC,kBAAkB,GAAG,KAAKC,UAAL,IAAmB,CAAChC,MAAM,CAACiC,WAA3B,GAAyCJ,WAAzC,GAAuD,CAAhF;AACA,QAAIK,UAAU,GAAG,KAAKV,OAAL,IAAgBE,aAAa,KAAK,KAAlC,GAA0C,KAAKS,SAAL,GAAiB,KAAKC,eAAL,CAAqBC,MAAhF,GAAyF,CAA1G;AACAH,IAAAA,UAAU,GAAG,KAAKV,OAAL,IAAgB,KAAKQ,UAArB,IAAmCN,aAAa,KAAK,KAArD,GAA6D,KAAKS,SAAL,GAAiB,KAAKC,eAAL,CAAqBC,MAAnG,GAA4GH,UAAzH;;AACA,QAAI,CAAC,KAAKF,UAAV,EAAsB;AAClBJ,MAAAA,WAAW,GAAG,CAAC5B,MAAM,CAACqC,MAAR,GAAmBjB,aAAa,CAACiB,MAAd,GAAuB,GAAxB,GAA+B,CAAjD,GAAsD,CAApE;AACH,KAFD,MAGK;AACDV,MAAAA,UAAU,GAAG,CAAC3B,MAAM,CAACsC,KAAR,GAAkBlB,aAAa,CAACkB,KAAd,GAAsB,GAAvB,GAA8B,CAA/C,GAAoD,CAAjE;AACH;;AACDjB,IAAAA,WAAW,CAACgB,MAAZ,IAAuBT,WAAvB;AACAP,IAAAA,WAAW,CAACiB,KAAZ,IAAqBX,UAArB;AACA,QAAIY,YAAY,GAAGvC,MAAM,CAACuC,YAA1B;AACA,QAAIC,UAAU,GAAGxC,MAAM,CAACwC,UAAxB;AACA,QAAIC,aAAa,GAAG,CAApB;AACA,QAAIC,SAAS,GAAG,CAAhB;AACA,QAAIC,YAAY,GAAG,CAAnB;AACA,QAAIC,aAAa,GAAG,CAApB;AACA,QAAIC,SAAS,GAAG,CAAhB;AACA,QAAIC,mBAAmB,GAAG,CAA1B;AACA,QAAIC,eAAJ;AACA,SAAKC,aAAL,GAAqBC,IAAI,CAACC,GAAL,CAASpG,WAAW,CAAC,aAAD,EAAgBkD,MAAM,CAACmD,SAAvB,CAAX,CAA6Cd,MAAtD,EAA8DrC,MAAM,CAACoD,WAArE,CAArB;AACA,QAAIC,MAAM,GAAG,KAAb;;AACA,SAAK,IAAInD,EAAE,GAAG,CAAT,EAAYoD,EAAE,GAAG,KAAKzD,iBAA3B,EAA8CK,EAAE,GAAGoD,EAAE,CAACrH,MAAtD,EAA8DiE,EAAE,EAAhE,EAAoE;AAChE,UAAIqD,YAAY,GAAGD,EAAE,CAACpD,EAAD,CAArB;;AACA,UAAIhD,MAAM,CAACsG,IAAP,CAAYD,YAAY,CAACE,IAAzB,CAAJ,EAAoC;AAChCF,QAAAA,YAAY,CAACE,IAAb,GAAoBjH,cAAc,CAAC+G,YAAY,CAACE,IAAd,EAAoBvG,MAApB,CAAlC;AACH;;AACD,UAAID,MAAM,CAACuG,IAAP,CAAYD,YAAY,CAACE,IAAzB,CAAJ,EAAoC;AAChCF,QAAAA,YAAY,CAACE,IAAb,GAAoBjH,cAAc,CAAC+G,YAAY,CAACE,IAAd,EAAoBxG,MAApB,CAAlC;AACH;;AACD8F,MAAAA,eAAe,GAAG;AACdW,QAAAA,IAAI,EAAEH,YAAY,CAACG,IADL;AACWD,QAAAA,IAAI,EAAEF,YAAY,CAACE,IAD9B;AACoCvC,QAAAA,KAAK,EAAEqC,YAAY,CAACrC,KADxD;AAEdyC,QAAAA,WAAW,EAAEJ,YAAY,CAACI,WAFZ;AAEyBhD,QAAAA,IAAI,EAAE3D,YAF/B;AAE6C4G,QAAAA,MAAM,EAAE;AAFrD,OAAlB;AAIA,WAAKpF,KAAL,CAAWqF,OAAX,CAAmB7G,YAAnB,EAAiC+F,eAAjC;AACAQ,MAAAA,YAAY,CAACE,IAAb,GAAoBV,eAAe,CAACU,IAApC;AACAF,MAAAA,YAAY,CAACF,MAAb,GAAsB,CAACN,eAAe,CAACa,MAAvC;AACAL,MAAAA,YAAY,CAACrC,KAAb,GAAqB6B,eAAe,CAAC7B,KAArC;AACAqC,MAAAA,YAAY,CAACG,IAAb,GAAoBX,eAAe,CAACW,IAApC;AACAH,MAAAA,YAAY,CAACI,WAAb,GAA2BZ,eAAe,CAACY,WAA3C;AACAJ,MAAAA,YAAY,CAACO,QAAb,GAAwBhH,WAAW,CAACyG,YAAY,CAACE,IAAd,EAAoBzD,MAAM,CAACmD,SAA3B,CAAnC;;AACA,UAAII,YAAY,CAACF,MAAjB,EAAyB;AACrBA,QAAAA,MAAM,GAAG,IAAT;AACAV,QAAAA,YAAY,GAAGJ,YAAY,GAAGC,UAAf,GAA4Be,YAAY,CAACO,QAAb,CAAsBxB,KAAlD,GAA0Df,OAAzE;AACAmB,QAAAA,SAAS,GAAGA,SAAS,GAAGC,YAAxB;;AACA,YAAI,CAAC3C,MAAM,CAACiC,WAAR,IAAuB,CAAC,KAAKD,UAAjC,EAA6C;AACzCc,UAAAA,mBAAmB,GAAG,KAAKtB,OAAL,IAAgBE,aAAa,KAAK,KAAlC,GAA0C,KAAKU,eAAL,CAAqBE,KAArB,GAA6B,KAAKH,SAA5E,GAAwF,CAA9G;AACAW,UAAAA,mBAAmB,IAAIhB,UAAvB;AACH;;AACD,YAAIT,WAAW,CAACiB,KAAZ,GAAqBf,OAAO,GAAGmB,SAAV,GAAsBI,mBAA3C,IAAmE,KAAKd,UAA5E,EAAwF;AACpFS,UAAAA,aAAa,GAAGQ,IAAI,CAACC,GAAL,CAAST,aAAT,EAAyBC,SAAS,GAAGnB,OAAZ,GAAsBuB,mBAAtB,IAA6C,KAAKd,UAAL,GAAkB,CAAlB,GAAsBW,YAAnE,CAAzB,CAAhB;;AACA,cAAIE,SAAS,KAAK,CAAd,IAAoBF,YAAY,KAAKD,SAAzC,EAAqD;AACjDG,YAAAA,SAAS,GAAG,CAAZ;AACH;;AACDH,UAAAA,SAAS,GAAG,KAAKV,UAAL,GAAkB,CAAlB,GAAsBW,YAAlC;AACAE,UAAAA,SAAS;AACTD,UAAAA,aAAa,GAAIC,SAAS,IAAI,KAAKG,aAAL,GAAqBzB,OAAzB,CAAV,GAA+CA,OAA/C,GAAyDW,UAAzD,GAAsEH,kBAAtF;AACH;AACJ;AACJ;;AACDa,IAAAA,aAAa,GAAGK,IAAI,CAACC,GAAL,CAASN,aAAT,EAAyB,KAAKI,aAAL,GAAqBzB,OAAtB,GAAiCA,OAAjC,GAA2CW,UAAnE,CAAhB;AACA,SAAK6B,QAAL,GAAgB1C,WAAW,CAACgB,MAAZ,GAAqBO,aAArC;;AACA,QAAI,KAAKmB,QAAL,IAAiB,CAAC/D,MAAM,CAACiC,WAA7B,EAA0C;AACtC,UAAI,KAAKD,UAAT,EAAqB;AACjB;AACAY,QAAAA,aAAa,GAAGA,aAAhB;AACH,OAHD,MAIK;AACDA,QAAAA,aAAa,GAAI,KAAKI,aAAL,GAAqBzB,OAAtB,GAAiCA,OAAjC,IAA4CG,aAAa,KAAK,KAAlB,GAA0BQ,UAA1B,GAAuC,CAAnF,CAAhB;AACH;AACJ;;AACD,SAAK8B,UAAL,GAAkBnB,SAAlB;;AACA,QAAI,CAAC,KAAKkB,QAAN,IAAkB,CAAC,KAAK/B,UAA5B,EAAwC;AACpCU,MAAAA,SAAS,IAAI,KAAKlB,OAAL,IAAgBE,aAAa,KAAK,KAAlC,GAA2C,KAAKS,SAAL,GAAiB,KAAKC,eAAL,CAAqBE,KAAtC,GAA8C,KAAKH,SAA9F,GAA2G,CAAxH;AACH;;AACD,QAAIkB,MAAJ,EAAY;AACR,WAAKY,SAAL,CAAehB,IAAI,CAACC,GAAL,CAAUR,SAAS,GAAGnB,OAAtB,EAAgCkB,aAAhC,CAAf,EAA+DG,aAA/D,EAA8E5C,MAA9E,EAAsFqB,WAAtF;AACH,KAFD,MAGK;AACD,WAAK4C,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAAqBjE,MAArB,EAA6BqB,WAA7B;AACH;AACJ,GA1FD;AA2FA;;;AACA9C,EAAAA,WAAW,CAAC/C,SAAZ,CAAsB0I,cAAtB,GAAuC,UAAUC,aAAV,EAAyBC,KAAzB,EAAgCC,WAAhC,EAA6CC,UAA7C,EAAyDC,IAAzD,EAA+DC,KAA/D,EAAsEC,WAAtE,EAAmF;AACtH,QAAIC,aAAa,GAAIJ,UAAU,CAACK,QAAX,CAAoB5G,CAApB,GAAwBsG,WAAxB,GAAsCC,UAAU,CAACR,QAAX,CAAoBxB,KAA/E;AACA,QAAIf,OAAO,GAAG,KAAKvB,MAAL,CAAYuB,OAA1B;;AACA,QAAKmD,aAAa,IAAIP,aAAa,CAACL,QAAd,CAAuBxB,KAAvB,GAA+B+B,WAAnC,CAAd,GAAkEE,IAAI,CAACxG,CAAL,GAASwG,IAAI,CAACjC,KAAd,GAAsB,KAAKtC,MAAL,CAAYwC,UAAZ,GAAyB,CAAjH,IACA,KAAKR,UADT,EACqB;AACjBmC,MAAAA,aAAa,CAACQ,QAAd,CAAuB5G,CAAvB,GAA2BqG,KAAK,CAACrG,CAAjC;AACAoG,MAAAA,aAAa,CAACQ,QAAd,CAAuB3G,CAAvB,GAA4BwG,KAAK,KAAKC,WAAX,GAA0BH,UAAU,CAACK,QAAX,CAAoB3G,CAA9C,GACvBsG,UAAU,CAACK,QAAX,CAAoB3G,CAApB,GAAwB,KAAKgF,aAA7B,GAA6CzB,OADjD;AAEH,KALD,MAMK;AACD4C,MAAAA,aAAa,CAACQ,QAAd,CAAuB5G,CAAvB,GAA4ByG,KAAK,KAAKC,WAAX,GAA0BH,UAAU,CAACK,QAAX,CAAoB5G,CAA9C,GAAkD2G,aAA7E;AACAP,MAAAA,aAAa,CAACQ,QAAd,CAAuB3G,CAAvB,GAA2BsG,UAAU,CAACK,QAAX,CAAoB3G,CAA/C;AACH;;AACD,QAAI4G,UAAU,GAAI,KAAKC,YAAL,CAAkBvC,KAAlB,GAA0B,KAAKuC,YAAL,CAAkB9G,CAA7C,IAAmDoG,aAAa,CAACQ,QAAd,CAAuB5G,CAAvB,GAChEsG,WADgE,GAClD,KAAKrE,MAAL,CAAYwC,UAAZ,GAAyB,CAD1B,CAAjB;AAEA2B,IAAAA,aAAa,CAACV,IAAd,GAAqBhH,QAAQ,CAAC,CAACmI,UAAU,CAACE,OAAX,CAAmB,CAAnB,CAAF,EAAyBX,aAAa,CAACV,IAAvC,EAA6C,KAAKzD,MAAL,CAAYmD,SAAzD,CAA7B;AACH,GAhBD;AAiBA;;;AACA5E,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBuB,WAAtB,GAAoC,UAAUgE,KAAV,EAAiBgE,KAAjB,EAAwB;AACxD,QAAIvG,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIwG,WAAW,GAAGxG,KAAK,CAACe,cAAN,CAAqBU,IAArB,KAA8B,QAA9B,GAAyCc,KAAzC,GAAiD,CAAnE;AACA,QAAIkE,YAAY,GAAGzG,KAAK,CAAC0G,aAAN,CAAoBF,WAApB,CAAnB;AACA,QAAIG,YAAY,GAAG,KAAKtF,iBAAL,CAAuBkB,KAAvB,CAAnB;AACA,QAAIqE,eAAe,GAAG;AAClBC,MAAAA,UAAU,EAAEF,YAAY,CAAC1B,IADP;AACa7C,MAAAA,WAAW,EAAEuE,YAAY,CAACjE,KADvC;AAElB1C,MAAAA,KAAK,EAAEA,KAFW;AAEJ4B,MAAAA,MAAM,EAAE6E,YAFJ;AAEkBtE,MAAAA,IAAI,EAAE5D,WAFxB;AAEqC6G,MAAAA,MAAM,EAAE;AAF7C,KAAtB;AAIA,SAAKpF,KAAL,CAAWqF,OAAX,CAAmB9G,WAAnB,EAAgCqI,eAAhC;AACAH,IAAAA,YAAY,CAACrE,WAAb,GAA2BwE,eAAe,CAACxE,WAA3C;;AACA,QAAIqE,YAAY,CAACvB,IAAb,KAAsB,IAA1B,EAAgC;AAC5BlF,MAAAA,KAAK,CAAC0G,aAAN,CAAoBnE,KAApB,EAA2BN,QAA3B,GAAsCwE,YAAY,CAACvB,IAAnD;AACH;;AACD,QAAIlF,KAAK,CAACe,cAAN,CAAqB+F,gBAAzB,EAA2C;AACvC,WAAKC,qBAAL,CAA2BN,YAA3B,EAAyCA,YAAY,CAACzF,OAAtD;AACA2F,MAAAA,YAAY,CAAC3F,OAAb,GAAuByF,YAAY,CAAC5E,QAAb,KAA0B,WAA1B,GAAwC7B,KAAK,CAAC4B,MAAN,CAAa6E,YAAY,CAACpE,WAA1B,EAAuCC,UAAvC,CAAkDmE,YAAY,CAAClE,KAA/D,EAAsEvB,OAA9G,GAClByF,YAAY,CAACzF,OADlB;AAEA,WAAKgG,mBAAL,CAAyBhH,KAAzB,EAAgCyG,YAAhC;AACH;AACJ,GApBD;;AAqBA1G,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBgK,mBAAtB,GAA4C,UAAUhH,KAAV,EAAiB4B,MAAjB,EAAyB;AACjE,QAAIqF,MAAM,GAAGjH,KAAK,CAACkH,iBAAN,CAAwBb,YAArC;AACArG,IAAAA,KAAK,CAACkH,iBAAN,CAAwBC,YAAxB,CAAqCnH,KAArC,EAA4CA,KAAK,CAACe,cAAlD,EAAkEkG,MAAlE;AACAjH,IAAAA,KAAK,CAACoH,cAAN,CAAqBC,qBAArB,CAA2CrH,KAA3C;AACH,GAJD;;AAKAD,EAAAA,WAAW,CAAC/C,SAAZ,CAAsB+J,qBAAtB,GAA8C,UAAUnF,MAAV,EAAkB0F,UAAlB,EAA8B;AACxE1F,IAAAA,MAAM,CAACZ,OAAP,GAAiB,CAACsG,UAAlB;;AACA,QAAI,KAAKC,aAAL,CAAmB3F,MAAM,CAAC4F,KAA1B,CAAJ,EAAsC;AAClC5F,MAAAA,MAAM,CAAC4F,KAAP,CAAaC,kBAAb,GAAkC7F,MAAM,CAAC4F,KAAP,CAAa5F,MAAb,CAAoB8F,IAApB,CAAyB,UAAUC,KAAV,EAAiB;AAAE,eAAQA,KAAK,CAAC3G,OAAd;AAAyB,OAArE,CAAlC;AACH;;AACD,QAAI,KAAKuG,aAAL,CAAmB3F,MAAM,CAACgG,KAA1B,CAAJ,EAAsC;AAClChG,MAAAA,MAAM,CAACgG,KAAP,CAAaH,kBAAb,GAAkC7F,MAAM,CAACgG,KAAP,CAAahG,MAAb,CAAoB8F,IAApB,CAAyB,UAAUC,KAAV,EAAiB;AAAE,eAAQA,KAAK,CAAC3G,OAAd;AAAyB,OAArE,CAAlC;AACH;AACJ,GARD;;AASAjB,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBuK,aAAtB,GAAsC,UAAUM,IAAV,EAAgB;AAClD,WAAQ,KAAK7H,KAAL,CAAW8H,IAAX,CAAgBC,OAAhB,CAAwBF,IAAxB,IAAgC,CAAC,CAAzC;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;;;AACI9H,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBuD,KAAtB,GAA8B,UAAUgG,KAAV,EAAiB;AAC3C,QAAItG,KAAK,GAAG,IAAZ;;AACA,QAAI,CAAC,KAAKD,KAAL,CAAWe,cAAX,CAA0BC,OAA/B,EAAwC;AACpC;AACH;;AACD,QAAIgH,KAAK,GAAG,KAAKhI,KAAL,CAAWiI,MAAvB;AACA,QAAIC,KAAK,GAAG,KAAKlI,KAAL,CAAWmI,MAAvB;AACA,QAAIC,YAAY,GAAG,EAAnB;AACA,QAAIC,aAAa,GAAG,CAAC,KAAKC,QAAL,GAAgB,QAAjB,EAA2B,KAAKA,QAAL,GAAgB,gBAA3C,EAChB,KAAKA,QAAL,GAAgB,SADA,CAApB;AAEA,QAAIC,QAAQ,GAAGhC,KAAK,CAACnJ,MAAN,CAAaoL,EAA5B;AACA,QAAIhC,WAAJ;;AACA,SAAK,IAAI9E,EAAE,GAAG,CAAT,EAAY+G,eAAe,GAAGJ,aAAnC,EAAkD3G,EAAE,GAAG+G,eAAe,CAAChL,MAAvE,EAA+EiE,EAAE,EAAjF,EAAqF;AACjF,UAAI8G,EAAE,GAAGC,eAAe,CAAC/G,EAAD,CAAxB;;AACA,UAAI6G,QAAQ,CAACR,OAAT,CAAiBS,EAAjB,IAAuB,CAAC,CAA5B,EAA+B;AAC3BhC,QAAAA,WAAW,GAAGkC,QAAQ,CAACH,QAAQ,CAACI,KAAT,CAAeH,EAAf,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAAtB;AACA,aAAKjK,WAAL,CAAiBiI,WAAjB,EAA8BD,KAA9B;AACA;AACH;AACJ;;AACD,QAAIgC,QAAQ,CAACR,OAAT,CAAiB,KAAKO,QAAL,GAAgB,WAAjC,IAAgD,CAAC,CAArD,EAAwD;AACpD,WAAKM,UAAL,CAAgBrC,KAAhB,EAAuB,KAAvB;AACH,KAFD,MAGK,IAAIgC,QAAQ,CAACR,OAAT,CAAiB,KAAKO,QAAL,GAAgB,SAAjC,IAA8C,CAAC,CAAnD,EAAsD;AACvD,WAAKM,UAAL,CAAgBrC,KAAhB,EAAuB,IAAvB;AACH;;AACD6B,IAAAA,YAAY,GAAG,KAAKS,aAAL,CAAmBC,MAAnB,CAA0B,UAAUC,MAAV,EAAkB;AACvD,aAAQ7K,YAAY,CAACgK,KAAD,EAASF,KAAK,IAAI/H,KAAK,CAACsF,QAAN,GAAiB,CAACtF,KAAK,CAAC+I,iBAAN,GAA0B,CAA3B,IAAgC/I,KAAK,CAACgJ,aAAN,CAAoB,IAApB,EAA0B,CAA1B,EAA6B,CAA7B,CAAjD,GAAmF,CAAvF,CAAd,EAA0GF,MAAM,CAAChD,IAAjH,CAApB;AACH,KAFc,CAAf;AAGH,GA7BD;AA8BA;AACJ;AACA;;;AACIhG,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBkM,aAAtB,GAAsC,YAAY;AAC9C,WAAO,aAAP;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AACInJ,EAAAA,WAAW,CAAC/C,SAAZ,CAAsBmM,OAAtB,GAAgC,YAAY;AACxC,SAAKvI,mBAAL;AACH,GAFD;;AAGA,SAAOb,WAAP;AACH,CA3QgC,CA2Q/B5B,UA3Q+B,CAAjC;;AA4QA,SAAS4B,WAAT","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { getUnicodeText, textTrim, withInBounds } from \"../../common/utils/helper\";\r\nimport { BaseLegend, LegendOptions, Location } from \"../../common/legend/legend\";\r\nimport { measureText } from '@syncfusion/ej2-svg-base';\r\nimport { legendClick, legendRender, regSub, regSup } from \"../../common/model/constants\";\r\nimport { StockChartBorder, StockChartFont, StockMargin } from \"../model/base\";\r\nimport { Browser } from \"@syncfusion/ej2-base\";\r\nimport { Property, Complex, ChildProperty } from '@syncfusion/ej2-base';\r\nimport { Theme } from \"../../common/model/theme\";\r\nimport { ContainerPadding } from '../../common/model/base';\r\n/**\r\n * Configures the legends in charts.\r\n */\r\nvar StockChartLegendSettings = /** @class */ (function (_super) {\r\n    __extends(StockChartLegendSettings, _super);\r\n    function StockChartLegendSettings() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property(false)\r\n    ], StockChartLegendSettings.prototype, \"visible\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], StockChartLegendSettings.prototype, \"height\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], StockChartLegendSettings.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Complex({ x: 0, y: 0 }, Location)\r\n    ], StockChartLegendSettings.prototype, \"location\", void 0);\r\n    __decorate([\r\n        Property('Auto')\r\n    ], StockChartLegendSettings.prototype, \"position\", void 0);\r\n    __decorate([\r\n        Property('Series')\r\n    ], StockChartLegendSettings.prototype, \"mode\", void 0);\r\n    __decorate([\r\n        Property(8)\r\n    ], StockChartLegendSettings.prototype, \"padding\", void 0);\r\n    __decorate([\r\n        Property('Center')\r\n    ], StockChartLegendSettings.prototype, \"alignment\", void 0);\r\n    __decorate([\r\n        Complex(Theme.legendLabelFont, StockChartFont)\r\n    ], StockChartLegendSettings.prototype, \"textStyle\", void 0);\r\n    __decorate([\r\n        Property(10)\r\n    ], StockChartLegendSettings.prototype, \"shapeHeight\", void 0);\r\n    __decorate([\r\n        Property(10)\r\n    ], StockChartLegendSettings.prototype, \"shapeWidth\", void 0);\r\n    __decorate([\r\n        Complex({}, StockChartBorder)\r\n    ], StockChartLegendSettings.prototype, \"border\", void 0);\r\n    __decorate([\r\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, StockMargin)\r\n    ], StockChartLegendSettings.prototype, \"margin\", void 0);\r\n    __decorate([\r\n        Complex({ left: 0, right: 0, top: 0, bottom: 0 }, ContainerPadding)\r\n    ], StockChartLegendSettings.prototype, \"containerPadding\", void 0);\r\n    __decorate([\r\n        Property(5)\r\n    ], StockChartLegendSettings.prototype, \"shapePadding\", void 0);\r\n    __decorate([\r\n        Property('transparent')\r\n    ], StockChartLegendSettings.prototype, \"background\", void 0);\r\n    __decorate([\r\n        Property(1)\r\n    ], StockChartLegendSettings.prototype, \"opacity\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], StockChartLegendSettings.prototype, \"toggleVisibility\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], StockChartLegendSettings.prototype, \"description\", void 0);\r\n    __decorate([\r\n        Property(3)\r\n    ], StockChartLegendSettings.prototype, \"tabIndex\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], StockChartLegendSettings.prototype, \"title\", void 0);\r\n    __decorate([\r\n        Complex(Theme.legendTitleFont, StockChartFont)\r\n    ], StockChartLegendSettings.prototype, \"titleStyle\", void 0);\r\n    __decorate([\r\n        Property('Top')\r\n    ], StockChartLegendSettings.prototype, \"titlePosition\", void 0);\r\n    __decorate([\r\n        Property(100)\r\n    ], StockChartLegendSettings.prototype, \"maximumTitleWidth\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], StockChartLegendSettings.prototype, \"enablePages\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], StockChartLegendSettings.prototype, \"isInversed\", void 0);\r\n    return StockChartLegendSettings;\r\n}(ChildProperty));\r\nexport { StockChartLegendSettings };\r\n/**\r\n * `Legend` module is used to render legend for the stockchart.\r\n */\r\nvar StockLegend = /** @class */ (function (_super) {\r\n    __extends(StockLegend, _super);\r\n    function StockLegend(chart) {\r\n        var _this = _super.call(this, chart) || this;\r\n        _this.library = _this;\r\n        _this.addEventListener();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Binding events for Stocklegend module.\r\n     */\r\n    StockLegend.prototype.addEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        this.chart.on('click', this.click, this);\r\n        this.chart.on(Browser.touchEndEvent, this.mouseEnd, this);\r\n        this.chart.on(Browser.touchMoveEvent, this.mouseMove, this);\r\n    };\r\n    /**\r\n     * UnBinding events for Stocklegend module.\r\n     */\r\n    StockLegend.prototype.removeEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        this.chart.off('click', this.click);\r\n        this.chart.off(Browser.touchEndEvent, this.mouseEnd);\r\n        this.chart.off(Browser.touchMoveEvent, this.mouseMove);\r\n    };\r\n    /**\r\n     * To handle mosue move for Stocklegend module\r\n     */\r\n    StockLegend.prototype.mouseMove = function (e) {\r\n        if (this.chart.legendSettings.visible && !this.chart.isTouch) {\r\n            this.move(e);\r\n        }\r\n    };\r\n    /**\r\n     * To handle mosue end for Stocklegend module\r\n     */\r\n    StockLegend.prototype.mouseEnd = function (e) {\r\n        if (this.chart.legendSettings.visible && this.chart.isTouch) {\r\n            this.move(e);\r\n        }\r\n    };\r\n    StockLegend.prototype.getLegendOptions = function (visibleSeriesCollection, chart) {\r\n        this.legendCollections = [];\r\n        var seriesType;\r\n        var fillColor;\r\n        if (visibleSeriesCollection.length > 1) {\r\n            this.legend.mode = 'Series';\r\n        }\r\n        for (var _i = 0, visibleSeriesCollection_1 = visibleSeriesCollection; _i < visibleSeriesCollection_1.length; _i++) {\r\n            var series = visibleSeriesCollection_1[_i];\r\n            if (this.legend.mode === 'Series') {\r\n                series;\r\n                if (series.category !== 'Indicator') {\r\n                    seriesType = series.type;\r\n                    fillColor = (series.pointColorMapping && series.points.length > 0) ?\r\n                        (series.points[0].interior ? series.points[0].interior : series.interior) : series.interior;\r\n                    this.legendCollections.push(new LegendOptions(series.name, fillColor, series.legendShape, (series.category === 'TrendLine' ?\r\n                        this.chart.series[series.sourceIndex].trendlines[series.index].visible : series.visible), seriesType, series.legendImageUrl, series.marker.shape, series.marker.visible));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /** @private */\r\n    StockLegend.prototype.getLegendBounds = function (availableSize, legendBound, legend) {\r\n        this.calculateLegendTitle(legend, legendBound);\r\n        var padding = legend.padding;\r\n        this.isTitle = legend.title ? true : false;\r\n        var titlePosition = legend.titlePosition;\r\n        var extraWidth = 0;\r\n        var extraHeight = 0;\r\n        var arrowHeight = this.arrowHeight;\r\n        var arrowWidth = this.arrowWidth;\r\n        var verticalArrowSpace = this.isVertical && !legend.enablePages ? arrowHeight : 0;\r\n        var titleSpace = this.isTitle && titlePosition === 'Top' ? this.fivePixel + this.legendTitleSize.height : 0;\r\n        titleSpace = this.isTitle && this.isVertical && titlePosition !== 'Top' ? this.fivePixel + this.legendTitleSize.height : titleSpace;\r\n        if (!this.isVertical) {\r\n            extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\r\n        }\r\n        else {\r\n            extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\r\n        }\r\n        legendBound.height += (extraHeight);\r\n        legendBound.width += extraWidth;\r\n        var shapePadding = legend.shapePadding;\r\n        var shapeWidth = legend.shapeWidth;\r\n        var maximum_Width = 0;\r\n        var row_Width = 0;\r\n        var legend_Width = 0;\r\n        var column_Height = 0;\r\n        var row_Count = 0;\r\n        var titlePlusArrowSpace = 0;\r\n        var legendEventArgs;\r\n        this.maxItemHeight = Math.max(measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\r\n        var render = false;\r\n        for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\r\n            var legendOption = _a[_i];\r\n            if (regSup.test(legendOption.text)) {\r\n                legendOption.text = getUnicodeText(legendOption.text, regSup);\r\n            }\r\n            if (regSub.test(legendOption.text)) {\r\n                legendOption.text = getUnicodeText(legendOption.text, regSub);\r\n            }\r\n            legendEventArgs = {\r\n                fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\r\n                markerShape: legendOption.markerShape, name: legendRender, cancel: false\r\n            };\r\n            this.chart.trigger(legendRender, legendEventArgs);\r\n            legendOption.text = legendEventArgs.text;\r\n            legendOption.render = !legendEventArgs.cancel;\r\n            legendOption.shape = legendEventArgs.shape;\r\n            legendOption.fill = legendEventArgs.fill;\r\n            legendOption.markerShape = legendEventArgs.markerShape;\r\n            legendOption.textSize = measureText(legendOption.text, legend.textStyle);\r\n            if (legendOption.render) {\r\n                render = true;\r\n                legend_Width = shapePadding + shapeWidth + legendOption.textSize.width + padding;\r\n                row_Width = row_Width + legend_Width;\r\n                if (!legend.enablePages && !this.isVertical) {\r\n                    titlePlusArrowSpace = this.isTitle && titlePosition !== 'Top' ? this.legendTitleSize.width + this.fivePixel : 0;\r\n                    titlePlusArrowSpace += arrowWidth;\r\n                }\r\n                if (legendBound.width < (padding + row_Width + titlePlusArrowSpace) || this.isVertical) {\r\n                    maximum_Width = Math.max(maximum_Width, (row_Width + padding + titlePlusArrowSpace - (this.isVertical ? 0 : legend_Width)));\r\n                    if (row_Count === 0 && (legend_Width !== row_Width)) {\r\n                        row_Count = 1;\r\n                    }\r\n                    row_Width = this.isVertical ? 0 : legend_Width;\r\n                    row_Count++;\r\n                    column_Height = (row_Count * (this.maxItemHeight + padding)) + padding + titleSpace + verticalArrowSpace;\r\n                }\r\n            }\r\n        }\r\n        column_Height = Math.max(column_Height, (this.maxItemHeight + padding) + padding + titleSpace);\r\n        this.isPaging = legendBound.height < column_Height;\r\n        if (this.isPaging && !legend.enablePages) {\r\n            if (this.isVertical) {\r\n                // eslint-disable-next-line no-self-assign\r\n                column_Height = column_Height;\r\n            }\r\n            else {\r\n                column_Height = (this.maxItemHeight + padding) + padding + (titlePosition === 'Top' ? titleSpace : 0);\r\n            }\r\n        }\r\n        this.totalPages = row_Count;\r\n        if (!this.isPaging && !this.isVertical) {\r\n            row_Width += this.isTitle && titlePosition !== 'Top' ? (this.fivePixel + this.legendTitleSize.width + this.fivePixel) : 0;\r\n        }\r\n        if (render) {\r\n            this.setBounds(Math.max((row_Width + padding), maximum_Width), column_Height, legend, legendBound);\r\n        }\r\n        else {\r\n            this.setBounds(0, 0, legend, legendBound);\r\n        }\r\n    };\r\n    /** @private */\r\n    StockLegend.prototype.getRenderPoint = function (legendOptions, start, textPadding, prevLegend, rect, count, firstLegend) {\r\n        var previousBound = (prevLegend.location.x + textPadding + prevLegend.textSize.width);\r\n        var padding = this.legend.padding;\r\n        if ((previousBound + (legendOptions.textSize.width + textPadding)) > (rect.x + rect.width + this.legend.shapeWidth / 2) ||\r\n            this.isVertical) {\r\n            legendOptions.location.x = start.x;\r\n            legendOptions.location.y = (count === firstLegend) ? prevLegend.location.y :\r\n                prevLegend.location.y + this.maxItemHeight + padding;\r\n        }\r\n        else {\r\n            legendOptions.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\r\n            legendOptions.location.y = prevLegend.location.y;\r\n        }\r\n        var availwidth = (this.legendBounds.width + this.legendBounds.x) - (legendOptions.location.x +\r\n            textPadding - this.legend.shapeWidth / 2);\r\n        legendOptions.text = textTrim(+availwidth.toFixed(4), legendOptions.text, this.legend.textStyle);\r\n    };\r\n    /** @private */\r\n    StockLegend.prototype.legendClick = function (index, event) {\r\n        var chart = this.chart;\r\n        var seriesIndex = chart.legendSettings.mode === 'Series' ? index : 0;\r\n        var targetSeries = chart.visibleSeries[seriesIndex];\r\n        var targetLegend = this.legendCollections[index];\r\n        var legendClickArgs = {\r\n            legendText: targetLegend.text, legendShape: targetLegend.shape,\r\n            chart: chart, series: targetSeries, name: legendClick, cancel: false\r\n        };\r\n        this.chart.trigger(legendClick, legendClickArgs);\r\n        targetSeries.legendShape = legendClickArgs.legendShape;\r\n        if (targetSeries.fill !== null) {\r\n            chart.visibleSeries[index].interior = targetSeries.fill;\r\n        }\r\n        if (chart.legendSettings.toggleVisibility) {\r\n            this.changeSeriesVisiblity(targetSeries, targetSeries.visible);\r\n            targetLegend.visible = targetSeries.category === 'TrendLine' ? chart.series[targetSeries.sourceIndex].trendlines[targetSeries.index].visible :\r\n                (targetSeries.visible);\r\n            this.refreshLegendToggle(chart, targetSeries);\r\n        }\r\n    };\r\n    StockLegend.prototype.refreshLegendToggle = function (chart, series) {\r\n        var bounds = chart.stockLegendModule.legendBounds;\r\n        chart.stockLegendModule.renderLegend(chart, chart.legendSettings, bounds);\r\n        chart.cartesianChart.cartesianChartRefresh(chart);\r\n    };\r\n    StockLegend.prototype.changeSeriesVisiblity = function (series, visibility) {\r\n        series.visible = !visibility;\r\n        if (this.SecondaryAxis(series.yAxis)) {\r\n            series.yAxis.internalVisibility = series.yAxis.series.some(function (value) { return (value.visible); });\r\n        }\r\n        if (this.SecondaryAxis(series.xAxis)) {\r\n            series.xAxis.internalVisibility = series.xAxis.series.some(function (value) { return (value.visible); });\r\n        }\r\n    };\r\n    StockLegend.prototype.SecondaryAxis = function (axis) {\r\n        return (this.chart.axes.indexOf(axis) > -1);\r\n    };\r\n    /**\r\n     * To show the tooltip for the trimmed text in legend.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    StockLegend.prototype.click = function (event) {\r\n        var _this = this;\r\n        if (!this.chart.legendSettings.visible) {\r\n            return;\r\n        }\r\n        var pageY = this.chart.mouseY;\r\n        var pageX = this.chart.mouseX;\r\n        var legendRegion = [];\r\n        var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_',\r\n            this.legendID + '_shape_'];\r\n        var targetId = event.target.id;\r\n        var seriesIndex;\r\n        for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\r\n            var id = legendItemsId_1[_i];\r\n            if (targetId.indexOf(id) > -1) {\r\n                seriesIndex = parseInt(targetId.split(id)[1], 10);\r\n                this.legendClick(seriesIndex, event);\r\n                break;\r\n            }\r\n        }\r\n        if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\r\n            this.changePage(event, false);\r\n        }\r\n        else if (targetId.indexOf(this.legendID + '_pageup') > -1) {\r\n            this.changePage(event, true);\r\n        }\r\n        legendRegion = this.legendRegions.filter(function (region) {\r\n            return (withInBounds(pageX, (pageY + (_this.isPaging ? (_this.currentPageNumber - 1) * _this.translatePage(null, 1, 2) : 0)), region.rect));\r\n        });\r\n    };\r\n    /**\r\n     * Get module name\r\n     */\r\n    StockLegend.prototype.getModuleName = function () {\r\n        return 'StockLegend';\r\n    };\r\n    /**\r\n     * To destroy the Legend.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    StockLegend.prototype.destroy = function () {\r\n        this.removeEventListener();\r\n    };\r\n    return StockLegend;\r\n}(BaseLegend));\r\nexport { StockLegend };\r\n"]},"metadata":{},"sourceType":"module"}