{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable valid-jsdoc */\n\n\nimport { drawSymbol } from '../../common/utils/helper';\nimport { PathOption, Size } from '@syncfusion/ej2-svg-base';\nimport { Browser, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ChartData } from '../../chart/utils/get-data';\nimport { withInBounds, PointData, stopTimer } from '../../common/utils/helper';\nimport { colorNameToHex, convertHexToColor } from '../../common/utils/helper';\n/**\r\n * Marker Module used to render the marker for line type series.\r\n */\n\nvar MarkerExplode =\n/** @class */\nfunction (_super) {\n  __extends(MarkerExplode, _super);\n  /**\r\n   * Constructor for the marker module.\r\n   *\r\n   * @private\r\n   */\n\n\n  function MarkerExplode(chart) {\n    var _this = _super.call(this, chart) || this;\n\n    _this.elementId = chart.element.id;\n    _this.commonXvalues = [];\n    return _this;\n  }\n  /**\r\n   * @hidden\r\n   */\n\n\n  MarkerExplode.prototype.addEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  MarkerExplode.prototype.removeEventListener = function () {\n    if (this.chart.isDestroyed) {\n      return;\n    }\n\n    this.chart.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n    this.chart.off(Browser.touchEndEvent, this.mouseUpHandler);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  MarkerExplode.prototype.mouseUpHandler = function () {\n    var chart = this.chart;\n\n    if (chart.isTouch && !chart.crosshair.enable && !this.isSelected(chart)) {\n      this.markerMove(true);\n    }\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  MarkerExplode.prototype.mouseMoveHandler = function () {\n    var chart = this.chart;\n\n    if ((!chart.crosshair.enable || chart.tooltip.enable) && (!chart.isTouch || chart.startMove) && !this.isSelected(chart)) {\n      this.markerMove(false);\n    }\n  };\n\n  MarkerExplode.prototype.markerMove = function (remove) {\n    var _this = this;\n\n    var chart = this.chart;\n    this.currentPoints = [];\n    var data;\n    var previous;\n    var explodeSeries;\n    var series;\n\n    if (!chart.tooltip.shared || !chart.tooltip.enable) {\n      data = this.getData();\n      series = data.series;\n      previous = this.previousPoints[0];\n      explodeSeries = series && (series.type === 'Bubble' || series.drawType === 'Scatter' || series.type === 'Scatter' || series.type !== 'Candle' && series.type !== 'Hilo' && series.type !== 'HiloOpenClose' && series.marker.visible && series.marker.width !== 0 && series.marker.height !== 0);\n      data.lierIndex = this.lierIndex;\n\n      if (data.point && explodeSeries && (!previous || previous.point !== data.point || previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex)) {\n        this.currentPoints.push(data);\n      }\n\n      if (data.point && explodeSeries && chart.isPointMouseDown) {\n        this.currentPoints.push(data);\n      }\n    } else {\n      if (!withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n        return null;\n      }\n\n      if (chart.tooltip.enable) {\n        var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n        var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\n\n        for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n          var chartSeries = _a[_i];\n\n          if (!chartSeries.enableTooltip || chartSeries.category === 'Indicator') {\n            continue;\n          }\n\n          if (chart.chartAreaType === 'Cartesian' && chartSeries.visible) {\n            data = this.getClosestX(chart, chartSeries, commonXvalues);\n          } else if (chart.chartAreaType === 'PolarRadar' && chartSeries.visible && pointData.point !== null) {\n            data = new PointData(chartSeries.points[pointData.point.index], chartSeries);\n          }\n\n          if (data) {\n            this.currentPoints.push(data);\n            data = null;\n          }\n        }\n      }\n    }\n\n    var length = this.previousPoints.length;\n\n    if (this.currentPoints.length > 0) {\n      if (length === 0 || chart.isPointMouseDown || length > 0 && this.previousPoints[0].point !== this.currentPoints[0].point) {\n        if (this.previousPoints.length > 0) {\n          this.removeHighlightedMarker();\n        }\n\n        var _loop_1 = function (data_1) {\n          if (data_1 && data_1.point || series.type !== 'Candle' && series.type !== 'Hilo' && series.type !== 'HiloOpenClose') {\n            stopTimer(this_1.markerExplode);\n            this_1.isRemove = true;\n            data_1.point.symbolLocations.map(function (location, index) {\n              if (!data_1.series.isRectSeries || data_1.point.marker.visible) {\n                _this.drawTrackBall(data_1.series, data_1.point, location, index);\n              }\n            });\n          }\n        };\n\n        var this_1 = this;\n\n        for (var _b = 0, _c = this.currentPoints; _b < _c.length; _b++) {\n          var data_1 = _c[_b];\n\n          _loop_1(data_1);\n        }\n\n        this.previousPoints = extend([], this.currentPoints, null, true);\n      }\n    }\n\n    if (!chart.tooltip.enable && (this.currentPoints.length === 0 && this.isRemove || remove && this.isRemove || !withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect))) {\n      this.isRemove = false;\n      this.markerExplode = +setTimeout(function () {\n        _this.removeHighlightedMarker();\n      }, 2000);\n    }\n\n    this.currentPoints = [];\n  };\n\n  MarkerExplode.prototype.drawTrackBall = function (series, point, location, index) {\n    var marker = point.marker;\n    var seriesMarker = series.marker;\n    var shape = marker.shape || seriesMarker.shape;\n\n    if (shape === 'None') {\n      return null;\n    }\n\n    var element = series.symbolElement || series.seriesElement;\n    var className;\n\n    if (this.chart.highlightModule && this.chart.highlightMode !== 'None') {\n      className = this.chart.highlightModule.generateStyle(series);\n    }\n\n    if (this.chart.selectionModule && this.chart.selectionMode !== 'None') {\n      className = this.chart.selectionModule.generateStyle(series);\n    }\n\n    var symbolId = this.elementId + '_Series_' + series.index + '_Point_' + point.index + '_Trackball' + (index ? index : '');\n    var size = new Size((marker.width || seriesMarker.width) + 5, (marker.height || seriesMarker.height) + 5);\n    var border = marker.border || series.border;\n    var explodeSeries = series.type === 'BoxAndWhisker' || series.type === 'Bubble' || series.type === 'Scatter';\n    var borderColor = border.color && border.color !== 'transparent' ? border.color : marker.fill || point.interior || (explodeSeries ? point.color : series.interior);\n    var colorValue = convertHexToColor(colorNameToHex(borderColor));\n    var borderWidth = marker.border ? marker.border.width : seriesMarker.border.width;\n    var markerShadow = series.chart.themeStyle.markerShadow || 'rgba(' + colorValue.r + ',' + colorValue.g + ',' + colorValue.b + ',0.2)';\n\n    for (var i = 0; i < 2; i++) {\n      var options = new PathOption(symbolId + '_' + i, i ? marker.fill || point.color || (explodeSeries ? series.interior : '#ffffff') : 'transparent', borderWidth + (i ? 0 : 8), i ? borderColor : markerShadow, marker.opacity || seriesMarker.opacity, null, null);\n      var symbol = drawSymbol(location, shape, size, marker.imageUrl, options, '', this.chart.svgRenderer, series.clipRect); // incident: 252450 point click selection not working while maker explode\n      //symbol.setAttribute('style', 'pointer-events:none');\n\n      symbol.setAttribute('class', 'EJ2-Trackball');\n      var selectionId = element.id.indexOf('Symbol') !== -1 ? '_Symbol' : '';\n      var seletionElem = document.getElementById(this.elementId + '_Series_' + series.index + '_Point_' + point.index + selectionId);\n\n      if (className !== '' && !isNullOrUndefined(className) && !isNullOrUndefined(seletionElem) && seletionElem.hasAttribute('class') && className === seletionElem.getAttribute('class')) {\n        symbol.classList.add(className);\n      }\n\n      symbol.setAttribute('clip-path', element.getAttribute('clip-path'));\n      symbol.setAttribute('transform', element.getAttribute('transform'));\n      this.chart.svgObject.appendChild(symbol);\n    }\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  MarkerExplode.prototype.removeHighlightedMarker = function () {\n    var elements = document.getElementsByClassName('EJ2-Trackball');\n\n    for (var i = 0, len = elements.length; i < len; i++) {\n      remove(elements[0]);\n    }\n\n    this.previousPoints = [];\n  };\n\n  return MarkerExplode;\n}(ChartData);\n\nexport { MarkerExplode };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/chart/series/marker-explode.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","drawSymbol","PathOption","Size","Browser","extend","remove","isNullOrUndefined","ChartData","withInBounds","PointData","stopTimer","colorNameToHex","convertHexToColor","MarkerExplode","_super","chart","_this","call","elementId","element","id","commonXvalues","addEventListener","isDestroyed","on","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","removeEventListener","off","isTouch","crosshair","enable","isSelected","markerMove","tooltip","startMove","currentPoints","data","previous","explodeSeries","series","shared","getData","previousPoints","type","drawType","marker","visible","width","height","lierIndex","point","push","isPointMouseDown","mouseX","mouseY","chartAxisLayoutPanel","seriesClipRect","pointData","chartAreaType","mergeXvalues","visibleSeries","_i","_a","length","chartSeries","enableTooltip","category","getClosestX","points","index","removeHighlightedMarker","_loop_1","data_1","this_1","markerExplode","isRemove","symbolLocations","map","location","isRectSeries","drawTrackBall","_b","_c","setTimeout","seriesMarker","shape","symbolElement","seriesElement","className","highlightModule","highlightMode","generateStyle","selectionModule","selectionMode","symbolId","size","border","borderColor","color","fill","interior","colorValue","borderWidth","markerShadow","themeStyle","r","g","i","options","opacity","symbol","imageUrl","svgRenderer","clipRect","setAttribute","selectionId","indexOf","seletionElem","document","getElementById","hasAttribute","getAttribute","classList","add","svgObject","appendChild","elements","getElementsByClassName","len"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* eslint-disable @typescript-eslint/no-inferrable-types */\r\n/* eslint-disable valid-jsdoc */\r\nimport { drawSymbol } from '../../common/utils/helper';\r\nimport { PathOption, Size } from '@syncfusion/ej2-svg-base';\r\nimport { Browser, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { ChartData } from '../../chart/utils/get-data';\r\nimport { withInBounds, PointData, stopTimer } from '../../common/utils/helper';\r\nimport { colorNameToHex, convertHexToColor } from '../../common/utils/helper';\r\n/**\r\n * Marker Module used to render the marker for line type series.\r\n */\r\nvar MarkerExplode = /** @class */ (function (_super) {\r\n    __extends(MarkerExplode, _super);\r\n    /**\r\n     * Constructor for the marker module.\r\n     *\r\n     * @private\r\n     */\r\n    function MarkerExplode(chart) {\r\n        var _this = _super.call(this, chart) || this;\r\n        _this.elementId = chart.element.id;\r\n        _this.commonXvalues = [];\r\n        return _this;\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    MarkerExplode.prototype.addEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        this.chart.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\r\n        this.chart.on(Browser.touchEndEvent, this.mouseUpHandler, this);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    MarkerExplode.prototype.removeEventListener = function () {\r\n        if (this.chart.isDestroyed) {\r\n            return;\r\n        }\r\n        this.chart.off(Browser.touchMoveEvent, this.mouseMoveHandler);\r\n        this.chart.off(Browser.touchEndEvent, this.mouseUpHandler);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    MarkerExplode.prototype.mouseUpHandler = function () {\r\n        var chart = this.chart;\r\n        if (chart.isTouch && !chart.crosshair.enable && !this.isSelected(chart)) {\r\n            this.markerMove(true);\r\n        }\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    MarkerExplode.prototype.mouseMoveHandler = function () {\r\n        var chart = this.chart;\r\n        if ((!chart.crosshair.enable || (chart.tooltip.enable)) && (!chart.isTouch || chart.startMove) && !this.isSelected(chart)) {\r\n            this.markerMove(false);\r\n        }\r\n    };\r\n    MarkerExplode.prototype.markerMove = function (remove) {\r\n        var _this = this;\r\n        var chart = this.chart;\r\n        this.currentPoints = [];\r\n        var data;\r\n        var previous;\r\n        var explodeSeries;\r\n        var series;\r\n        if (!chart.tooltip.shared || !chart.tooltip.enable) {\r\n            data = this.getData();\r\n            series = data.series;\r\n            previous = this.previousPoints[0];\r\n            explodeSeries = series && ((series.type === 'Bubble' || series.drawType === 'Scatter' || series.type === 'Scatter') ||\r\n                (((series.type !== 'Candle') && (series.type !== 'Hilo') && (series.type !== 'HiloOpenClose')) &&\r\n                    (series.marker.visible && series.marker.width !== 0 && series.marker.height !== 0)));\r\n            data.lierIndex = this.lierIndex;\r\n            if (data.point && explodeSeries && ((!previous || (previous.point !== data.point)) ||\r\n                (previous && previous.lierIndex > 3 && previous.lierIndex !== this.lierIndex))) {\r\n                this.currentPoints.push(data);\r\n            }\r\n            if (data.point && explodeSeries && chart.isPointMouseDown) {\r\n                this.currentPoints.push(data);\r\n            }\r\n        }\r\n        else {\r\n            if (!withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\r\n                return null;\r\n            }\r\n            if (chart.tooltip.enable) {\r\n                var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\r\n                var commonXvalues = this.mergeXvalues(this.chart.visibleSeries);\r\n                for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\r\n                    var chartSeries = _a[_i];\r\n                    if (!chartSeries.enableTooltip || chartSeries.category === 'Indicator') {\r\n                        continue;\r\n                    }\r\n                    if (chart.chartAreaType === 'Cartesian' && chartSeries.visible) {\r\n                        data = this.getClosestX(chart, chartSeries, commonXvalues);\r\n                    }\r\n                    else if (chart.chartAreaType === 'PolarRadar' && chartSeries.visible && pointData.point !== null) {\r\n                        data = new PointData(chartSeries.points[pointData.point.index], chartSeries);\r\n                    }\r\n                    if (data) {\r\n                        this.currentPoints.push(data);\r\n                        data = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var length = this.previousPoints.length;\r\n        if (this.currentPoints.length > 0) {\r\n            if (length === 0 || chart.isPointMouseDown || (length > 0 && this.previousPoints[0].point !== this.currentPoints[0].point)) {\r\n                if (this.previousPoints.length > 0) {\r\n                    this.removeHighlightedMarker();\r\n                }\r\n                var _loop_1 = function (data_1) {\r\n                    if ((data_1 && data_1.point) || ((series.type !== 'Candle') &&\r\n                        (series.type !== 'Hilo') && (series.type !== 'HiloOpenClose'))) {\r\n                        stopTimer(this_1.markerExplode);\r\n                        this_1.isRemove = true;\r\n                        data_1.point.symbolLocations.map(function (location, index) {\r\n                            if (!data_1.series.isRectSeries || data_1.point.marker.visible) {\r\n                                _this.drawTrackBall(data_1.series, data_1.point, location, index);\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                var this_1 = this;\r\n                for (var _b = 0, _c = this.currentPoints; _b < _c.length; _b++) {\r\n                    var data_1 = _c[_b];\r\n                    _loop_1(data_1);\r\n                }\r\n                this.previousPoints = extend([], this.currentPoints, null, true);\r\n            }\r\n        }\r\n        if (!chart.tooltip.enable && ((this.currentPoints.length === 0 && this.isRemove) || (remove && this.isRemove) ||\r\n            !withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect))) {\r\n            this.isRemove = false;\r\n            this.markerExplode = +setTimeout(function () {\r\n                _this.removeHighlightedMarker();\r\n            }, 2000);\r\n        }\r\n        this.currentPoints = [];\r\n    };\r\n    MarkerExplode.prototype.drawTrackBall = function (series, point, location, index) {\r\n        var marker = point.marker;\r\n        var seriesMarker = series.marker;\r\n        var shape = marker.shape || seriesMarker.shape;\r\n        if (shape === 'None') {\r\n            return null;\r\n        }\r\n        var element = series.symbolElement || series.seriesElement;\r\n        var className;\r\n        if (this.chart.highlightModule && this.chart.highlightMode !== 'None') {\r\n            className = this.chart.highlightModule.generateStyle(series);\r\n        }\r\n        if (this.chart.selectionModule && this.chart.selectionMode !== 'None') {\r\n            className = this.chart.selectionModule.generateStyle(series);\r\n        }\r\n        var symbolId = this.elementId + '_Series_' + series.index + '_Point_' + point.index + '_Trackball' +\r\n            (index ? index : '');\r\n        var size = new Size((marker.width || seriesMarker.width) + 5, (marker.height || seriesMarker.height) + 5);\r\n        var border = (marker.border || series.border);\r\n        var explodeSeries = (series.type === 'BoxAndWhisker' || series.type === 'Bubble' || series.type === 'Scatter');\r\n        var borderColor = (border.color && border.color !== 'transparent') ? border.color :\r\n            marker.fill || point.interior || (explodeSeries ? point.color : series.interior);\r\n        var colorValue = convertHexToColor(colorNameToHex(borderColor));\r\n        var borderWidth = marker.border ? marker.border.width : seriesMarker.border.width;\r\n        var markerShadow = series.chart.themeStyle.markerShadow ||\r\n            'rgba(' + colorValue.r + ',' + colorValue.g + ',' + colorValue.b + ',0.2)';\r\n        for (var i = 0; i < 2; i++) {\r\n            var options = new PathOption(symbolId + '_' + i, i ? (marker.fill || point.color || (explodeSeries ? series.interior : '#ffffff')) : 'transparent', borderWidth + (i ? 0 : 8), i ? borderColor : markerShadow, (marker.opacity || seriesMarker.opacity), null, null);\r\n            var symbol = drawSymbol(location, shape, size, marker.imageUrl, options, '', this.chart.svgRenderer, series.clipRect);\r\n            // incident: 252450 point click selection not working while maker explode\r\n            //symbol.setAttribute('style', 'pointer-events:none');\r\n            symbol.setAttribute('class', 'EJ2-Trackball');\r\n            var selectionId = element.id.indexOf('Symbol') !== -1 ? '_Symbol' : '';\r\n            var seletionElem = document.getElementById(this.elementId + '_Series_' + series.index + '_Point_' +\r\n                point.index + selectionId);\r\n            if (className !== '' && !isNullOrUndefined(className) && !isNullOrUndefined(seletionElem) &&\r\n                seletionElem.hasAttribute('class') && (className === seletionElem.getAttribute('class'))) {\r\n                symbol.classList.add(className);\r\n            }\r\n            symbol.setAttribute('clip-path', element.getAttribute('clip-path'));\r\n            symbol.setAttribute('transform', element.getAttribute('transform'));\r\n            this.chart.svgObject.appendChild(symbol);\r\n        }\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    MarkerExplode.prototype.removeHighlightedMarker = function () {\r\n        var elements = document.getElementsByClassName('EJ2-Trackball');\r\n        for (var i = 0, len = elements.length; i < len; i++) {\r\n            remove(elements[0]);\r\n        }\r\n        this.previousPoints = [];\r\n    };\r\n    return MarkerExplode;\r\n}(ChartData));\r\nexport { MarkerExplode };\r\n"]},"metadata":{},"sourceType":"module"}