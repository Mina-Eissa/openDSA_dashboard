{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\r\n * ShapeLayouter.ts class for EJ2-PDF\r\n * @private\r\n */\n\n\nimport { ElementLayouter, PdfLayoutResult } from './element-layouter';\nimport { RectangleF, PointF } from './../../../drawing/pdf-drawing';\nimport { PdfLayoutBreakType, PdfLayoutType } from './../../figures/enum';\nimport { BeginPageLayoutEventArgs, EndPageLayoutEventArgs } from './../../../structured-elements/grid/layout/grid-layouter';\n/**\r\n * ShapeLayouter class.\r\n * @private\r\n */\n\nvar ShapeLayouter =\n/** @class */\nfunction (_super) {\n  __extends(ShapeLayouter, _super); // Constructors\n\n  /**\r\n   * Initializes a new instance of the `ShapeLayouter` class.\r\n   * @private\r\n   */\n\n\n  function ShapeLayouter(element) {\n    var _this = _super.call(this, element) || this; // Fields\n\n    /**\r\n     * Initializes the object to store `older form elements` of previous page.\r\n     * @default 0\r\n     * @private\r\n     */\n\n\n    _this.olderPdfForm = 0;\n    /**\r\n     * The `bounds` of the shape element.\r\n     * * @default new RectangleF()\r\n     * @private\r\n     */\n\n    _this.shapeBounds = new RectangleF();\n    /**\r\n     * Total Page size of the web page.\r\n     * * @default 0\r\n     * @private\r\n     */\n\n    _this.totalPageSize = 0;\n    return _this;\n  }\n\n  Object.defineProperty(ShapeLayouter.prototype, \"element\", {\n    // Properties\n\n    /**\r\n     * Gets shape element.\r\n     * @private\r\n     */\n    get: function () {\n      return this.elements;\n    },\n    enumerable: true,\n    configurable: true\n  }); // Implementation\n\n  /**\r\n   * Layouts the element.\r\n   * @private\r\n   */\n\n  ShapeLayouter.prototype.layoutInternal = function (param) {\n    var currentPage = param.page;\n    var currentBounds = param.bounds;\n    var shapeLayoutBounds = this.element.getBounds();\n    shapeLayoutBounds.x = 0;\n    shapeLayoutBounds.y = 0;\n    /* tslint:disable */\n\n    var isEmpty = this.shapeBounds.x === this.shapeBounds.y && this.shapeBounds.y === this.shapeBounds.width && this.shapeBounds.width === this.shapeBounds.height && this.shapeBounds.height === 0 ? true : false;\n    /* tslint:enable */\n\n    if (this.isPdfGrid && !isEmpty) {\n      shapeLayoutBounds = this.shapeBounds;\n    }\n\n    var result = null;\n    var pageResult = new ShapeLayoutResult();\n    pageResult.page = currentPage;\n    /*tslint:disable:no-constant-condition */\n\n    while (true) {\n      // Raise event.\n      var result1 = this.raiseBeforePageLayout(currentPage, currentBounds);\n      currentBounds = result1.currentBounds;\n      var endArgs = null;\n\n      if (!result1.cancel) {\n        pageResult = this.layoutOnPage(currentPage, currentBounds, shapeLayoutBounds, param); // Raise event.\n\n        endArgs = this.raiseEndPageLayout(pageResult);\n        result1.cancel = endArgs === null ? false : endArgs.cancel;\n      }\n\n      if (!pageResult.end && !result1.cancel) {\n        currentBounds = this.getPaginateBounds(param);\n        shapeLayoutBounds = this.getNextShapeBounds(shapeLayoutBounds, pageResult);\n        currentPage = endArgs === null || endArgs.nextPage === null ? this.getNextPage(currentPage) : endArgs.nextPage;\n\n        if (this.isPdfGrid) {\n          result = this.getLayoutResult(pageResult);\n          break;\n        }\n      } else {\n        result = this.getLayoutResult(pageResult);\n        break;\n      }\n    }\n\n    return result;\n  };\n  /**\r\n   * Raises BeforePageLayout event.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.raiseBeforePageLayout = function (currentPage, currentBounds) {\n    var cancel = false;\n\n    if (this.element.raiseBeginPageLayout) {\n      var args = new BeginPageLayoutEventArgs(currentBounds, currentPage);\n      this.element.onBeginPageLayout(args);\n      cancel = args.cancel;\n      currentBounds = args.bounds;\n    }\n\n    return {\n      currentBounds: currentBounds,\n      cancel: cancel\n    };\n  };\n  /**\r\n   * Raises PageLayout event if needed.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.raiseEndPageLayout = function (pageResult) {\n    var args = null;\n\n    if (this.element.raiseEndPageLayout) {\n      var res = this.getLayoutResult(pageResult);\n      args = new EndPageLayoutEventArgs(res);\n      this.element.onEndPageLayout(args);\n    }\n\n    return args;\n  };\n  /**\r\n   * Creates layout result.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.getLayoutResult = function (pageResult) {\n    var result = new PdfLayoutResult(pageResult.page, pageResult.bounds);\n    return result;\n  };\n  /**\r\n   * Calculates the next active shape bounds.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.getNextShapeBounds = function (shapeLayoutBounds, pageResult) {\n    var layoutedBounds = pageResult.bounds;\n    shapeLayoutBounds.y = shapeLayoutBounds.y + layoutedBounds.height;\n    shapeLayoutBounds.height = shapeLayoutBounds.height - layoutedBounds.height;\n    return shapeLayoutBounds;\n  };\n  /**\r\n   * Layouts the element on the current page.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.layoutOnPage = function (currentPage, curBounds, sBounds, param) {\n    var result = new ShapeLayoutResult();\n    curBounds = this.checkCorrectCurrentBounds(currentPage, curBounds, param);\n    var fitToPage = this.fitsToBounds(curBounds, sBounds);\n    var canDraw = !(param.format.break === PdfLayoutBreakType.FitElement && !fitToPage && currentPage === param.page);\n    var shapeFinished = false;\n\n    if (canDraw) {\n      var drawRectangle = this.getDrawBounds(curBounds, sBounds);\n      this.drawShape(currentPage.graphics, curBounds, drawRectangle);\n      result.bounds = this.getPageResultBounds(curBounds, sBounds);\n      shapeFinished = curBounds.height >= sBounds.height;\n    }\n\n    result.end = shapeFinished || param.format.layout === PdfLayoutType.OnePage;\n    result.page = currentPage;\n    return result;\n  };\n  /**\r\n   * Returns Rectangle for element drawing on the page.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.getDrawBounds = function (currentBounds, shapeLayoutBounds) {\n    var result = currentBounds;\n    result.y = result.y - shapeLayoutBounds.y;\n    result.height = result.height + shapeLayoutBounds.y;\n    return result;\n  };\n  /**\r\n   * Draws the shape.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.drawShape = function (g, currentBounds, drawRectangle) {\n    var gState = g.save();\n\n    try {\n      g.setClip(currentBounds);\n      this.element.drawGraphicsHelper(g, new PointF(drawRectangle.x, drawRectangle.y));\n    } finally {\n      g.restore(gState);\n    }\n  };\n  /**\r\n   * Corrects current bounds on the page.\r\n   * @protected\r\n   */\n\n\n  ShapeLayouter.prototype.checkCorrectCurrentBounds = function (currentPage, curBounds, param) {\n    var pageSize = currentPage.graphics.clientSize;\n    curBounds.width = curBounds.width > 0 ? curBounds.width : pageSize.width - curBounds.x;\n    curBounds.height = curBounds.height > 0 ? curBounds.height : pageSize.height - curBounds.y;\n\n    if (this.isPdfGrid) {\n      curBounds.height = curBounds.height - this.bottomCellPadding;\n    }\n\n    return curBounds;\n  };\n  /**\r\n   * Calculates bounds where the shape was layout on the page.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.getPageResultBounds = function (currentBounds, shapeLayoutBounds) {\n    var result = currentBounds;\n    result.height = Math.min(result.height, shapeLayoutBounds.height);\n    return result;\n  };\n  /**\r\n   * Checks whether shape rectangle fits to the lay outing bounds.\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.prototype.fitsToBounds = function (currentBounds, shapeLayoutBounds) {\n    var fits = shapeLayoutBounds.height <= currentBounds.height;\n    return fits;\n  };\n  /**\r\n   * Initializes the offset `index`.\r\n   * * @default 0\r\n   * @private\r\n   */\n\n\n  ShapeLayouter.index = 0;\n  /**\r\n   * Initializes the `difference in page height`.\r\n   * * @default 0\r\n   * @private\r\n   */\n\n  ShapeLayouter.splitDiff = 0;\n  /**\r\n   * Determines the `end of Vertical offset` values.\r\n   * * @default false\r\n   * @private\r\n   */\n\n  ShapeLayouter.last = false;\n  /**\r\n   * Determines the document link annotation `border width`.\r\n   * * @default 0\r\n   * @private\r\n   */\n\n  ShapeLayouter.borderWidth = 0;\n  return ShapeLayouter;\n}(ElementLayouter);\n\nexport { ShapeLayouter };\n/**\r\n * Contains lay outing result settings.\r\n * @private\r\n */\n\nvar ShapeLayoutResult =\n/** @class */\nfunction () {\n  function ShapeLayoutResult() {}\n\n  return ShapeLayoutResult;\n}();","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-pdf-export/src/implementation/graphics/figures/base/shape-layouter.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","ElementLayouter","PdfLayoutResult","RectangleF","PointF","PdfLayoutBreakType","PdfLayoutType","BeginPageLayoutEventArgs","EndPageLayoutEventArgs","ShapeLayouter","_super","element","_this","call","olderPdfForm","shapeBounds","totalPageSize","defineProperty","get","elements","enumerable","configurable","layoutInternal","param","currentPage","page","currentBounds","bounds","shapeLayoutBounds","getBounds","x","y","isEmpty","width","height","isPdfGrid","result","pageResult","ShapeLayoutResult","result1","raiseBeforePageLayout","endArgs","cancel","layoutOnPage","raiseEndPageLayout","end","getPaginateBounds","getNextShapeBounds","nextPage","getNextPage","getLayoutResult","raiseBeginPageLayout","args","onBeginPageLayout","res","onEndPageLayout","layoutedBounds","curBounds","sBounds","checkCorrectCurrentBounds","fitToPage","fitsToBounds","canDraw","format","break","FitElement","shapeFinished","drawRectangle","getDrawBounds","drawShape","graphics","getPageResultBounds","layout","OnePage","g","gState","save","setClip","drawGraphicsHelper","restore","pageSize","clientSize","bottomCellPadding","Math","min","fits","index","splitDiff","last","borderWidth"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * ShapeLayouter.ts class for EJ2-PDF\r\n * @private\r\n */\r\nimport { ElementLayouter, PdfLayoutResult } from './element-layouter';\r\nimport { RectangleF, PointF } from './../../../drawing/pdf-drawing';\r\nimport { PdfLayoutBreakType, PdfLayoutType } from './../../figures/enum';\r\nimport { BeginPageLayoutEventArgs, EndPageLayoutEventArgs } from './../../../structured-elements/grid/layout/grid-layouter';\r\n/**\r\n * ShapeLayouter class.\r\n * @private\r\n */\r\nvar ShapeLayouter = /** @class */ (function (_super) {\r\n    __extends(ShapeLayouter, _super);\r\n    // Constructors\r\n    /**\r\n     * Initializes a new instance of the `ShapeLayouter` class.\r\n     * @private\r\n     */\r\n    function ShapeLayouter(element) {\r\n        var _this = _super.call(this, element) || this;\r\n        // Fields\r\n        /**\r\n         * Initializes the object to store `older form elements` of previous page.\r\n         * @default 0\r\n         * @private\r\n         */\r\n        _this.olderPdfForm = 0;\r\n        /**\r\n         * The `bounds` of the shape element.\r\n         * * @default new RectangleF()\r\n         * @private\r\n         */\r\n        _this.shapeBounds = new RectangleF();\r\n        /**\r\n         * Total Page size of the web page.\r\n         * * @default 0\r\n         * @private\r\n         */\r\n        _this.totalPageSize = 0;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ShapeLayouter.prototype, \"element\", {\r\n        // Properties\r\n        /**\r\n         * Gets shape element.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.elements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // Implementation\r\n    /**\r\n     * Layouts the element.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.layoutInternal = function (param) {\r\n        var currentPage = param.page;\r\n        var currentBounds = param.bounds;\r\n        var shapeLayoutBounds = this.element.getBounds();\r\n        shapeLayoutBounds.x = 0;\r\n        shapeLayoutBounds.y = 0;\r\n        /* tslint:disable */\r\n        var isEmpty = (this.shapeBounds.x === this.shapeBounds.y && this.shapeBounds.y === this.shapeBounds.width && this.shapeBounds.width === this.shapeBounds.height && this.shapeBounds.height === 0) ? true : false;\r\n        /* tslint:enable */\r\n        if ((this.isPdfGrid) && (!(isEmpty))) {\r\n            shapeLayoutBounds = this.shapeBounds;\r\n        }\r\n        var result = null;\r\n        var pageResult = new ShapeLayoutResult();\r\n        pageResult.page = currentPage;\r\n        /*tslint:disable:no-constant-condition */\r\n        while (true) {\r\n            // Raise event.\r\n            var result1 = this.raiseBeforePageLayout(currentPage, currentBounds);\r\n            currentBounds = result1.currentBounds;\r\n            var endArgs = null;\r\n            if (!result1.cancel) {\r\n                pageResult = this.layoutOnPage(currentPage, currentBounds, shapeLayoutBounds, param);\r\n                // Raise event.\r\n                endArgs = this.raiseEndPageLayout(pageResult);\r\n                result1.cancel = (endArgs === null) ? false : endArgs.cancel;\r\n            }\r\n            if (!pageResult.end && !result1.cancel) {\r\n                currentBounds = this.getPaginateBounds(param);\r\n                shapeLayoutBounds = this.getNextShapeBounds(shapeLayoutBounds, pageResult);\r\n                currentPage = (endArgs === null || endArgs.nextPage === null) ?\r\n                    this.getNextPage(currentPage) : endArgs.nextPage;\r\n                if (this.isPdfGrid) {\r\n                    result = this.getLayoutResult(pageResult);\r\n                    break;\r\n                }\r\n            }\r\n            else {\r\n                result = this.getLayoutResult(pageResult);\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Raises BeforePageLayout event.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.raiseBeforePageLayout = function (currentPage, currentBounds) {\r\n        var cancel = false;\r\n        if (this.element.raiseBeginPageLayout) {\r\n            var args = new BeginPageLayoutEventArgs(currentBounds, currentPage);\r\n            this.element.onBeginPageLayout(args);\r\n            cancel = args.cancel;\r\n            currentBounds = args.bounds;\r\n        }\r\n        return { currentBounds: currentBounds, cancel: cancel };\r\n    };\r\n    /**\r\n     * Raises PageLayout event if needed.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.raiseEndPageLayout = function (pageResult) {\r\n        var args = null;\r\n        if (this.element.raiseEndPageLayout) {\r\n            var res = this.getLayoutResult(pageResult);\r\n            args = new EndPageLayoutEventArgs(res);\r\n            this.element.onEndPageLayout(args);\r\n        }\r\n        return args;\r\n    };\r\n    /**\r\n     * Creates layout result.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.getLayoutResult = function (pageResult) {\r\n        var result = new PdfLayoutResult(pageResult.page, pageResult.bounds);\r\n        return result;\r\n    };\r\n    /**\r\n     * Calculates the next active shape bounds.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.getNextShapeBounds = function (shapeLayoutBounds, pageResult) {\r\n        var layoutedBounds = pageResult.bounds;\r\n        shapeLayoutBounds.y = (shapeLayoutBounds.y + layoutedBounds.height);\r\n        shapeLayoutBounds.height = (shapeLayoutBounds.height - layoutedBounds.height);\r\n        return shapeLayoutBounds;\r\n    };\r\n    /**\r\n     * Layouts the element on the current page.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.layoutOnPage = function (currentPage, curBounds, sBounds, param) {\r\n        var result = new ShapeLayoutResult();\r\n        curBounds = this.checkCorrectCurrentBounds(currentPage, curBounds, param);\r\n        var fitToPage = this.fitsToBounds(curBounds, sBounds);\r\n        var canDraw = !((param.format.break === PdfLayoutBreakType.FitElement)\r\n            && (!fitToPage && (currentPage === param.page)));\r\n        var shapeFinished = false;\r\n        if (canDraw) {\r\n            var drawRectangle = this.getDrawBounds(curBounds, sBounds);\r\n            this.drawShape(currentPage.graphics, curBounds, drawRectangle);\r\n            result.bounds = this.getPageResultBounds(curBounds, sBounds);\r\n            shapeFinished = ((curBounds.height) >= (sBounds.height));\r\n        }\r\n        result.end = (shapeFinished || (param.format.layout === PdfLayoutType.OnePage));\r\n        result.page = currentPage;\r\n        return result;\r\n    };\r\n    /**\r\n     * Returns Rectangle for element drawing on the page.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.getDrawBounds = function (currentBounds, shapeLayoutBounds) {\r\n        var result = currentBounds;\r\n        result.y = (result.y - shapeLayoutBounds.y);\r\n        result.height = (result.height + shapeLayoutBounds.y);\r\n        return result;\r\n    };\r\n    /**\r\n     * Draws the shape.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.drawShape = function (g, currentBounds, drawRectangle) {\r\n        var gState = g.save();\r\n        try {\r\n            g.setClip(currentBounds);\r\n            this.element.drawGraphicsHelper(g, new PointF(drawRectangle.x, drawRectangle.y));\r\n        }\r\n        finally {\r\n            g.restore(gState);\r\n        }\r\n    };\r\n    /**\r\n     * Corrects current bounds on the page.\r\n     * @protected\r\n     */\r\n    ShapeLayouter.prototype.checkCorrectCurrentBounds = function (currentPage, curBounds, param) {\r\n        var pageSize = currentPage.graphics.clientSize;\r\n        curBounds.width = (curBounds.width > 0) ? curBounds.width : (pageSize.width - curBounds.x);\r\n        curBounds.height = (curBounds.height > 0) ? curBounds.height : (pageSize.height - curBounds.y);\r\n        if (this.isPdfGrid) {\r\n            curBounds.height = (curBounds.height - this.bottomCellPadding);\r\n        }\r\n        return curBounds;\r\n    };\r\n    /**\r\n     * Calculates bounds where the shape was layout on the page.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.getPageResultBounds = function (currentBounds, shapeLayoutBounds) {\r\n        var result = currentBounds;\r\n        result.height = Math.min(result.height, shapeLayoutBounds.height);\r\n        return result;\r\n    };\r\n    /**\r\n     * Checks whether shape rectangle fits to the lay outing bounds.\r\n     * @private\r\n     */\r\n    ShapeLayouter.prototype.fitsToBounds = function (currentBounds, shapeLayoutBounds) {\r\n        var fits = (shapeLayoutBounds.height <= currentBounds.height);\r\n        return fits;\r\n    };\r\n    /**\r\n     * Initializes the offset `index`.\r\n     * * @default 0\r\n     * @private\r\n     */\r\n    ShapeLayouter.index = 0;\r\n    /**\r\n     * Initializes the `difference in page height`.\r\n     * * @default 0\r\n     * @private\r\n     */\r\n    ShapeLayouter.splitDiff = 0;\r\n    /**\r\n     * Determines the `end of Vertical offset` values.\r\n     * * @default false\r\n     * @private\r\n     */\r\n    ShapeLayouter.last = false;\r\n    /**\r\n     * Determines the document link annotation `border width`.\r\n     * * @default 0\r\n     * @private\r\n     */\r\n    ShapeLayouter.borderWidth = 0;\r\n    return ShapeLayouter;\r\n}(ElementLayouter));\r\nexport { ShapeLayouter };\r\n/**\r\n * Contains lay outing result settings.\r\n * @private\r\n */\r\nvar ShapeLayoutResult = /** @class */ (function () {\r\n    function ShapeLayoutResult() {\r\n    }\r\n    return ShapeLayoutResult;\r\n}());\r\n"]},"metadata":{},"sourceType":"module"}