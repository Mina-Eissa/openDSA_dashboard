{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/ban-types */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable jsdoc/require-returns */\n\n/* eslint-disable valid-jsdoc */\n\n\nimport { NotifyPropertyChanges, Property, Event, Complex, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { extend, compile as templateComplier, Component, resetBlazorTemplate, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '../svg-render/index';\nimport { ChildProperty, createElement, remove, Browser, Animation } from '@syncfusion/ej2-base';\nimport { getTooltipThemeColor } from './interface';\nimport { Size, Rect, Side, measureText, getElement, findDirection, drawSymbol, textElement } from './helper';\nimport { removeElement, TextOption, TooltipLocation, PathOption } from './helper';\n/**\r\n * Configures the fonts in charts.\r\n *\r\n * @private\r\n */\n\nvar TextStyle =\n/** @class */\nfunction (_super) {\n  __extends(TextStyle, _super);\n\n  function TextStyle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(null)], TextStyle.prototype, \"size\", void 0);\n\n  __decorate([Property('')], TextStyle.prototype, \"color\", void 0);\n\n  __decorate([Property('Segoe UI')], TextStyle.prototype, \"fontFamily\", void 0);\n\n  __decorate([Property('Normal')], TextStyle.prototype, \"fontWeight\", void 0);\n\n  __decorate([Property('Normal')], TextStyle.prototype, \"fontStyle\", void 0);\n\n  __decorate([Property(1)], TextStyle.prototype, \"opacity\", void 0);\n\n  return TextStyle;\n}(ChildProperty);\n\nexport { TextStyle };\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\n\nvar TooltipBorder =\n/** @class */\nfunction (_super) {\n  __extends(TooltipBorder, _super);\n\n  function TooltipBorder() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], TooltipBorder.prototype, \"color\", void 0);\n\n  __decorate([Property(1)], TooltipBorder.prototype, \"width\", void 0);\n\n  return TooltipBorder;\n}(ChildProperty);\n\nexport { TooltipBorder };\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\n\nvar AreaBounds =\n/** @class */\nfunction (_super) {\n  __extends(AreaBounds, _super);\n\n  function AreaBounds() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(0)], AreaBounds.prototype, \"x\", void 0);\n\n  __decorate([Property(0)], AreaBounds.prototype, \"y\", void 0);\n\n  __decorate([Property(0)], AreaBounds.prototype, \"width\", void 0);\n\n  __decorate([Property(0)], AreaBounds.prototype, \"height\", void 0);\n\n  return AreaBounds;\n}(ChildProperty);\n\nexport { AreaBounds };\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\n\nvar ToolLocation =\n/** @class */\nfunction (_super) {\n  __extends(ToolLocation, _super);\n\n  function ToolLocation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(0)], ToolLocation.prototype, \"x\", void 0);\n\n  __decorate([Property(0)], ToolLocation.prototype, \"y\", void 0);\n\n  return ToolLocation;\n}(ChildProperty);\n\nexport { ToolLocation };\n/**\r\n * Represents the Tooltip control.\r\n * ```html\r\n * <div id=\"tooltip\"/>\r\n * <script>\r\n *   var tooltipObj = new Tooltip({ isResponsive : true });\r\n *   tooltipObj.appendTo(\"#tooltip\");\r\n * </script>\r\n * ```\r\n *\r\n * @private\r\n */\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n  /**\r\n   * Constructor for creating the widget\r\n   *\r\n   * @hidden\r\n   */\n\n\n  function Tooltip(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\r\n   * Initialize the event handler.\r\n   *\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.preRender = function () {\n    this.allowServerDataBinding = false;\n    this.initPrivateVariable();\n\n    if (!this.isCanvas) {\n      this.removeSVG();\n    }\n\n    this.createTooltipElement();\n  };\n\n  Tooltip.prototype.initPrivateVariable = function () {\n    this.renderer = new SvgRenderer(this.element.id);\n    this.themeStyle = getTooltipThemeColor(this.theme);\n    this.formattedText = [];\n    this.padding = 5;\n    this.isFirst = true;\n    this.markerPoint = [];\n  };\n\n  Tooltip.prototype.removeSVG = function () {\n    var svgObject = document.getElementById(this.element.id + '_svg');\n    var templateObject = document.getElementById(this.element.id + 'parent_template');\n\n    if (this.blazorTemplate) {\n      resetBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate');\n    }\n\n    if (svgObject && svgObject.parentNode) {\n      remove(svgObject);\n    }\n\n    if (templateObject && templateObject.parentNode) {\n      remove(templateObject);\n    }\n  };\n  /**\r\n   * To Initialize the control rendering.\r\n   */\n\n\n  Tooltip.prototype.render = function () {\n    this.fadeOuted = false;\n\n    if (!this.template) {\n      this.renderText(this.isFirst);\n      var argsData = {\n        cancel: false,\n        name: 'tooltipRender',\n        tooltip: this\n      };\n      this.trigger('tooltipRender', argsData);\n      var markerSide = this.renderTooltipElement(this.areaBounds, this.location);\n      this.drawMarker(markerSide.isBottom, markerSide.isRight, this.markerSize);\n    } else {\n      this.updateTemplateFn();\n      this.createTemplate(this.areaBounds, this.location);\n    }\n\n    this.trigger('loaded', {\n      tooltip: this\n    });\n    var element = document.getElementById('chartmeasuretext');\n\n    if (element) {\n      remove(element);\n    }\n\n    this.allowServerDataBinding = true;\n  };\n\n  Tooltip.prototype.createTooltipElement = function () {\n    this.textElements = [];\n\n    if (!this.template || this.shared) {\n      // SVG element for tooltip\n      if (this.enableRTL) {\n        this.element.setAttribute('dir', 'ltr');\n      }\n\n      var svgObject = this.renderer.createSvg({\n        id: this.element.id + '_svg'\n      });\n      this.element.appendChild(svgObject); // Group to hold text and path.\n\n      var groupElement = document.getElementById(this.element.id + '_group');\n\n      if (!groupElement) {\n        groupElement = this.renderer.createGroup({\n          id: this.element.id + '_group'\n        });\n        groupElement.setAttribute('transform', 'translate(0,0)');\n      }\n\n      svgObject.appendChild(groupElement);\n      var pathElement = this.renderer.drawPath({\n        'id': this.element.id + '_path',\n        'stroke-width': this.border.width,\n        'fill': this.fill || this.themeStyle.tooltipFill,\n        'opacity': (this.theme === 'TailwindDark' || this.theme === 'Tailwind' || this.theme === 'Bootstrap5' || this.theme === 'Bootstrap5Dark') && this.opacity === 0.75 ? 1 : this.opacity,\n        'stroke': this.border.color\n      });\n      groupElement.appendChild(pathElement);\n    }\n  };\n\n  Tooltip.prototype.drawMarker = function (isBottom, isRight, size) {\n    if (this.shapes.length <= 0) {\n      return null;\n    }\n\n    var shapeOption;\n    var count = 0;\n    var markerGroup = this.renderer.createGroup({\n      id: this.element.id + '_trackball_group'\n    });\n    var groupElement = getElement(this.element.id + '_group');\n    var x = (this.enableRTL ? this.elementSize.width - size / 2 : this.marginX * 2 + size / 2) + (isRight ? this.arrowPadding : 0);\n\n    for (var _i = 0, _a = this.shapes; _i < _a.length; _i++) {\n      var shape = _a[_i];\n\n      if (shape !== 'None') {\n        shapeOption = new PathOption(this.element.id + '_Trackball_' + count, this.palette[count], 1, '#cccccc', 1, null);\n\n        if (this.markerPoint[count]) {\n          markerGroup.appendChild(drawSymbol(new TooltipLocation(x, this.markerPoint[count] - this.padding + (isBottom ? this.arrowPadding : 0)), shape, new Size(size, size), '', shapeOption, null));\n        }\n\n        count++;\n      }\n    }\n\n    groupElement.appendChild(markerGroup);\n  };\n\n  Tooltip.prototype.renderTooltipElement = function (areaBounds, location) {\n    var tooltipDiv = getElement(this.element.id);\n    var arrowLocation = new TooltipLocation(0, 0);\n    var tipLocation = new TooltipLocation(0, 0);\n    var svgObject = getElement(this.element.id + '_svg');\n    var groupElement = getElement(this.element.id + '_group');\n    var pathElement = getElement(this.element.id + '_path');\n    var rect;\n    var isTop = false;\n    var isLeft = false;\n    var isBottom = false;\n    var x = 0;\n    var y = 0;\n    this.tipRadius = 1;\n\n    if (this.header !== '') {\n      this.elementSize.height += this.marginY;\n    }\n\n    if (this.content.length > 1) {\n      rect = this.sharedTooltipLocation(areaBounds, this.location.x, this.location.y);\n      isTop = true;\n    } else {\n      rect = this.tooltipLocation(areaBounds, location, arrowLocation, tipLocation);\n\n      if (!this.inverted) {\n        isTop = rect.y < location.y + this.clipBounds.y;\n        isBottom = !isTop;\n        y = isTop ? 0 : this.arrowPadding;\n      } else {\n        isLeft = rect.x < location.x + this.clipBounds.x;\n        x = isLeft ? 0 : this.arrowPadding;\n      }\n    }\n\n    if (this.header !== '') {\n      var wrapPadding = 2;\n      var wrapHeader = this.isWrap ? this.wrappedText : this.header;\n\n      if (this.isWrap && typeof wrapHeader === 'string' && (wrapHeader.indexOf('<') > -1 || wrapHeader.indexOf('>') > -1)) {\n        var textArray = wrapHeader.split('<br>');\n        wrapPadding = textArray.length;\n      }\n\n      var headerSize = measureText(this.isWrap ? this.wrappedText : this.header, this.textStyle).height + this.marginY * wrapPadding + (isBottom ? this.arrowPadding : 0) + (this.isWrap ? 5 : 0); //header padding;\n\n      var xLength = this.marginX * 3 + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0);\n      var direction = 'M ' + xLength + ' ' + headerSize + 'L ' + (rect.width + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0) - this.marginX * 2) + ' ' + headerSize;\n      var pathElement_1 = this.renderer.drawPath({\n        'id': this.element.id + '_header_path',\n        'stroke-width': 1,\n        'fill': null,\n        'opacity': 0.8,\n        'stroke': this.themeStyle.tooltipHeaderLine,\n        'd': direction\n      });\n      groupElement.appendChild(pathElement_1);\n    }\n\n    var start = this.border.width / 2;\n    var pointRect = new Rect(start + x, start + y, rect.width - start, rect.height - start);\n    groupElement.setAttribute('opacity', '1');\n\n    if (this.enableAnimation && !this.shared && !this.isFirst) {\n      this.animateTooltipDiv(tooltipDiv, rect);\n    } else {\n      this.updateDiv(tooltipDiv, rect.x, rect.y);\n    } // eslint-disable-next-line no-extra-boolean-cast\n\n\n    svgObject.setAttribute('height', (rect.height + this.border.width + (!!this.inverted ? 0 : this.arrowPadding) + 5).toString());\n    svgObject.setAttribute('width', (rect.width + this.border.width + (!this.inverted ? 0 : this.arrowPadding) + 5).toString());\n    svgObject.setAttribute('opacity', '1');\n\n    if (!isNullOrUndefined(this.tooltipPlacement)) {\n      isTop = this.tooltipPlacement.indexOf('Top') > -1;\n      isBottom = this.tooltipPlacement.indexOf('Bottom') > -1;\n      isLeft = this.tooltipPlacement.indexOf('Left') > -1;\n    }\n\n    pathElement.setAttribute('d', findDirection(this.rx, this.ry, pointRect, arrowLocation, this.arrowPadding, isTop, isBottom, isLeft, tipLocation.x, tipLocation.y, this.tipRadius));\n\n    if (this.enableShadow && this.theme !== 'Bootstrap4') {\n      // To fix next chart initial tooltip opacity issue in tab control\n      var shadowId = this.element.id + '_shadow';\n\n      if (this.theme === 'Tailwind' || this.theme === 'TailwindDark' || this.theme === 'Bootstrap5' || this.theme === 'Bootstrap5Dark') {\n        pathElement.setAttribute('box-shadow', '0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)');\n      } else {\n        pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\n      }\n\n      var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\n      shadow += '<feOffset dx=\"3\" dy=\"3\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.5\"/>';\n      shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n      var defElement = this.renderer.createDefs();\n      defElement.setAttribute('id', this.element.id + 'SVG_tooltip_definition');\n      groupElement.appendChild(defElement);\n      defElement.innerHTML = shadow;\n    }\n\n    pathElement.setAttribute('stroke', this.border.color);\n    this.changeText(new TooltipLocation(x, y), isBottom, !isLeft && !isTop && !isBottom);\n    return new Side(isBottom, !isLeft && !isTop && !isBottom);\n  };\n\n  Tooltip.prototype.changeText = function (point, isBottom, isRight) {\n    var element = document.getElementById(this.element.id + '_text');\n\n    if (isBottom) {\n      element.setAttribute('transform', 'translate(0,' + this.arrowPadding + ')');\n    }\n\n    if (isRight) {\n      element.setAttribute('transform', 'translate(' + this.arrowPadding + ' 0)');\n    }\n  };\n\n  Tooltip.prototype.findFormattedText = function () {\n    this.formattedText = [];\n\n    if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n      this.formattedText = this.formattedText.concat(this.header);\n    }\n\n    this.formattedText = this.formattedText.concat(this.content);\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  Tooltip.prototype.renderText = function (isRender) {\n    var height = 0;\n    var width = 0; // Padding for text;\n\n    var subWidth = 0;\n    var lines;\n    var key = 'properties';\n    var font = extend({}, this.textStyle, null, true)[key];\n    var groupElement = getElement(this.element.id + '_group');\n    var tspanElement;\n    var textCollection;\n    var tspanStyle = '';\n    var line;\n    var tspanOption;\n    this.findFormattedText();\n    this.isWrap = false;\n    var isRtlEnabled = document.body.getAttribute('dir') === 'rtl';\n    var anchor = isRtlEnabled && !this.enableRTL ? 'end' : 'start';\n    this.leftSpace = this.areaBounds.x + this.location.x;\n    this.rightSpace = this.areaBounds.x + this.areaBounds.width - this.leftSpace;\n    var headerContent = this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim();\n    var isBoldTag = this.header.indexOf('<b>') > -1 && this.header.indexOf('</b>') > -1;\n    var headerWidth = measureText(this.formattedText[0], font).width + 2 * this.marginX + this.arrowPadding;\n    var isLeftSpace = this.location.x - headerWidth < this.location.x;\n    var isRightSpace = this.areaBounds.x + this.areaBounds.width < this.location.x + headerWidth;\n    var header;\n    var headerSpace = headerContent !== '' ? this.marginY : 0;\n    var isRow = true;\n    var isColumn = true;\n    this.markerPoint = [];\n    var markerSize = this.shapes.length > 0 ? 10 : 0;\n    var markerPadding = this.shapes.length > 0 ? 5 : 0;\n    var spaceWidth = 4;\n    var subStringLength;\n    var fontSize = '13px';\n    var fontWeight = 'Normal';\n    var labelColor = this.themeStyle.tooltipLightLabel;\n    var dy = 22 / parseFloat(fontSize) * parseFloat(font.size);\n    var contentWidth = [];\n\n    if (!isRender || this.isCanvas) {\n      removeElement(this.element.id + '_text');\n      removeElement(this.element.id + '_header_path');\n      removeElement(this.element.id + '_trackball_group');\n      removeElement(this.element.id + 'SVG_tooltip_definition');\n    }\n\n    var options = new TextOption(this.element.id + '_text', this.marginX * 2, this.marginY * 2 + this.padding * 2 + (this.marginY === 2 ? 3 : 0), anchor, '');\n    var parentElement = textElement(options, font, null, groupElement);\n    var withoutHeader = this.formattedText.length === 1 && this.formattedText[0].indexOf(' : <b>') > -1;\n    var isHeader = this.header !== '';\n    var size = isHeader && isBoldTag ? 16 : 13;\n\n    for (var k = 0, pointsLength = this.formattedText.length; k < pointsLength; k++) {\n      textCollection = this.formattedText[k].replace(/<(b|strong)>/g, '<b>').replace(/<\\/(b|strong)>/g, '</b>').split(/<br.*?>/g);\n\n      if (k === 0 && !withoutHeader && this.isTextWrap && (this.leftSpace < headerWidth || isLeftSpace) && (this.rightSpace < headerWidth || isRightSpace)) {\n        subStringLength = Math.round(this.leftSpace > this.rightSpace ? this.leftSpace / size : this.rightSpace / size);\n        header = headerContent !== '' ? headerContent : this.formattedText[k];\n        textCollection = header.match(new RegExp('.{1,' + subStringLength + '}', 'g'));\n        this.wrappedText = isBoldTag ? '<b>' + textCollection.join('<br>') + '</b>' : textCollection.join('<br>');\n        this.isWrap = textCollection.length > 1;\n      }\n\n      if (textCollection[0] === '') {\n        continue;\n      }\n\n      if (k !== 0 || headerContent === '') {\n        this.markerPoint.push((headerContent !== '' ? this.marginY : 0) + options.y + height);\n      }\n\n      for (var i = 0, len = textCollection.length; i < len; i++) {\n        // string value of unicode for LTR is \\u200E\n        lines = textCollection[i].replace(/<b>/g, '<br><b>').replace(/<\\/b>/g, '</b><br>').replace(/:/g, this.enableRTL ? '<br>\\u200E: <br>' : '<br>\\u200E:<br>').split('<br>');\n\n        if (this.enableRTL && lines.length > 0 && textCollection[i].match(/:/g)) {\n          lines[0] = lines[0].trim();\n          lines.reverse();\n        }\n\n        subWidth = 0;\n        isColumn = true;\n        height += dy;\n\n        for (var j = 0, len_1 = lines.length; j < len_1; j++) {\n          line = lines[j];\n\n          if (this.enableRTL && line !== '' && this.isRTLText(line)) {\n            line = line.concat('\\u200E');\n          }\n\n          if (!/\\S/.test(line) && line !== '') {\n            line = ' '; //to trim multiple white spaces to single white space\n          }\n\n          if (!isColumn && line === ' ' || line.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n            subWidth += line !== ' ' ? spaceWidth : 0;\n\n            if (isColumn && !isRow) {\n              tspanOption = {\n                x: this.marginX * 2 + (markerSize + markerPadding),\n                dy: dy + (isColumn ? headerSpace : 0),\n                fill: ''\n              };\n              headerSpace = null;\n            } else {\n              if (isRow && isColumn) {\n                tspanOption = {\n                  x: headerContent === '' ? this.marginX * 2 + (markerSize + markerPadding) : this.marginX * 2 + (this.isWrap ? markerSize + markerPadding : 0)\n                };\n              } else {\n                tspanOption = {};\n              }\n            }\n\n            isColumn = false;\n            tspanElement = this.renderer.createTSpan(tspanOption, '');\n            parentElement.appendChild(tspanElement);\n\n            if (line.indexOf('<b>') > -1 || isBoldTag && j === 0 && k === 0 && (isHeader || this.isWrap)) {\n              fontWeight = 'bold';\n              labelColor = this.themeStyle.tooltipBoldLabel;\n              tspanStyle = 'font-weight:' + fontWeight;\n              font.fontWeight = fontWeight;\n              tspanElement.setAttribute('fill', this.textStyle.color || labelColor);\n            } else {\n              tspanStyle = fontWeight === 'bold' ? 'font-weight:' + fontWeight : '';\n              font.fontWeight = fontWeight;\n              tspanElement.setAttribute('fill', this.textStyle.color || labelColor);\n            }\n\n            if (line.indexOf('</b>') > -1 || isBoldTag && j === len_1 - 1 && k === 0 && (isHeader || this.isWrap)) {\n              fontWeight = 'Normal';\n              labelColor = this.themeStyle.tooltipLightLabel;\n            } // eslint-disable-next-line no-useless-escape\n\n\n            tspanElement.textContent = line = this.getTooltipTextContent(line);\n            subWidth += measureText(line, font).width;\n\n            if (tspanStyle !== '') {\n              tspanElement.style.fontWeight = tspanStyle.split('font-weight:')[1];\n              tspanElement.style.color = tspanElement.getAttribute('fill');\n            } // 'inherit' will apply css style from parent element.\n\n\n            tspanElement.style.fontFamily = 'inherit';\n            tspanElement.style.fontStyle = 'inherit';\n            tspanElement.style.fontSize = 'inherit';\n            isRow = false;\n          }\n        }\n\n        subWidth -= spaceWidth;\n        width = Math.max(width, subWidth);\n        contentWidth.push(subWidth);\n      }\n    }\n\n    this.elementSize = new Size(width + (width > 0 ? 2 * this.marginX : 0), height);\n    this.elementSize.width += markerSize + markerPadding; // marker size + marker Spacing\n\n    var element = parentElement.childNodes[0];\n\n    if (headerContent !== '' && element && !this.isWrap) {\n      font.fontWeight = 'bold';\n      var width_1 = (this.elementSize.width + 2 * this.padding) / 2 - measureText(headerContent, font).width / 2;\n      element.setAttribute('x', width_1.toString());\n    }\n\n    this.renderContentRTL(parentElement, isHeader, markerSize + markerPadding, contentWidth);\n  };\n\n  Tooltip.prototype.renderContentRTL = function (textElement, isHeader, markerSize, contentWidth) {\n    if (this.enableRTL) {\n      var tspanElement = void 0;\n      var contentWidthIndex = isHeader ? 1 : 0;\n\n      for (var i = 0; i < textElement.childNodes.length; i++) {\n        tspanElement = textElement.childNodes[i];\n\n        if ((!isHeader || i > 0) && !isNullOrUndefined(tspanElement.getAttribute('x'))) {\n          tspanElement.setAttribute('x', (this.elementSize.width - (markerSize + contentWidth[contentWidthIndex])).toString());\n          contentWidthIndex++;\n        }\n      }\n    }\n  };\n\n  Tooltip.prototype.getTooltipTextContent = function (tooltipText) {\n    var characterCollection = tooltipText.match(/<[a-zA-Z\\/](.|\\n)*?>/g);\n\n    if (isNullOrUndefined(characterCollection)) {\n      return tooltipText;\n    }\n\n    var isRtlText = this.isRTLText(tooltipText);\n\n    for (var i = 0; i < characterCollection.length; i++) {\n      if (this.isValidHTMLElement(characterCollection[i].replace('<', '').replace('/', '').replace('>', '').trim())) {\n        tooltipText = tooltipText.replace(characterCollection[i], isRtlText ? '\\u200E' : '');\n      }\n    }\n\n    return tooltipText;\n  };\n\n  Tooltip.prototype.isValidHTMLElement = function (element) {\n    return document.createElement(element).toString() != \"[object HTMLUnknownElement]\";\n  };\n\n  Tooltip.prototype.isRTLText = function (tooltipContent) {\n    return /[\\u0590-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]/.test(tooltipContent);\n  };\n\n  Tooltip.prototype.createTemplate = function (areaBounds, location) {\n    var argsData = {\n      cancel: false,\n      name: 'tooltipRender',\n      tooltip: this\n    };\n    this.trigger('tooltipRender', argsData);\n    var parent = document.getElementById(this.element.id);\n\n    if (this.isCanvas) {\n      this.removeSVG();\n    }\n\n    var firstElement = parent.firstElementChild;\n\n    if (firstElement) {\n      remove(firstElement);\n    }\n\n    if (!argsData.cancel) {\n      var elem = createElement('div', {\n        id: this.element.id + 'parent_template'\n      });\n      var templateElement = this.templateFn(this.data, this.controlInstance, elem.id, elem.id + '_blazorTemplate', '');\n\n      while (templateElement && templateElement.length > 0) {\n        if (isBlazor() || templateElement.length === 1) {\n          elem.appendChild(templateElement[0]);\n          templateElement = null;\n        } else {\n          elem.appendChild(templateElement[0]);\n        }\n      }\n\n      parent.appendChild(elem);\n      var element = this.isCanvas ? elem : this.element;\n      var rect = element.getBoundingClientRect();\n      this.padding = 0;\n      this.elementSize = new Size(rect.width, rect.height);\n      var tooltipRect = this.shared ? this.sharedTooltipLocation(areaBounds, this.location.x, this.location.y) : this.tooltipLocation(areaBounds, location, new TooltipLocation(0, 0), new TooltipLocation(0, 0));\n\n      if (this.enableAnimation && !this.shared && !this.isFirst) {\n        this.animateTooltipDiv(this.element, tooltipRect);\n      } else {\n        this.updateDiv(element, tooltipRect.x, tooltipRect.y);\n      }\n\n      if (this.blazorTemplate) {\n        //Customer issue - F149037  Call back function to handle the blazor tooltip alignment issues\n        var tooltipRendered = function () {\n          var rect1 = getElement(thisObject_1.element.id).getBoundingClientRect();\n          thisObject_1.elementSize = new Size(rect1.width, rect1.height);\n          var tooltipRect1 = thisObject_1.tooltipLocation(areaBounds, location, new TooltipLocation(0, 0), new TooltipLocation(0, 0));\n          thisObject_1.updateDiv(getElement(thisObject_1.element.id), tooltipRect1.x, tooltipRect1.y);\n        }; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n\n        var thisObject_1 = this;\n        tooltipRendered.bind(thisObject_1, areaBounds, location);\n        updateBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate', this.blazorTemplate.name, this.blazorTemplate.parent, undefined, tooltipRendered);\n      }\n    } else {\n      remove(getElement(this.element.id + '_tooltip'));\n    }\n  };\n\n  Tooltip.prototype.sharedTooltipLocation = function (bounds, x, y) {\n    var width = this.elementSize.width + 2 * this.marginX;\n    var height = this.elementSize.height + 2 * this.marginY;\n    var tooltipRect = new Rect(x + 2 * this.padding, y - height - this.padding, width, height);\n\n    if (tooltipRect.y < bounds.y) {\n      tooltipRect.y += tooltipRect.height + 2 * this.padding;\n    }\n\n    if (tooltipRect.x + tooltipRect.width > bounds.x + bounds.width) {\n      tooltipRect.x -= tooltipRect.width + 4 * this.padding;\n    }\n\n    return tooltipRect;\n  };\n\n  Tooltip.prototype.getCurrentPosition = function (bounds, symbolLocation, arrowLocation, tipLocation) {\n    var position = this.tooltipPlacement;\n    var clipX = this.clipBounds.x;\n    var clipY = this.clipBounds.y;\n    var markerHeight = this.offset;\n    var width = this.elementSize.width + 2 * this.marginX;\n    var height = this.elementSize.height + 2 * this.marginY;\n    var location = new TooltipLocation(symbolLocation.x, symbolLocation.y);\n\n    if (position === 'Top' || position === 'Bottom') {\n      location = new TooltipLocation(location.x + clipX - this.elementSize.width / 2 - this.padding, location.y + clipY - this.elementSize.height - 2 * this.padding - this.arrowPadding - markerHeight);\n      arrowLocation.x = tipLocation.x = width / 2;\n\n      if (position === 'Bottom') {\n        location.y = symbolLocation.y + clipY + markerHeight;\n      }\n\n      if (bounds.x + bounds.width < location.x + width) {\n        location.x = bounds.width > width ? bounds.x + bounds.width - width + 6 : bounds.x;\n        arrowLocation.x = tipLocation.x = bounds.width > width ? bounds.x + symbolLocation.x - location.x : symbolLocation.x;\n      } else if (bounds.x > location.x) {\n        location.x = bounds.x;\n        arrowLocation.x = tipLocation.x = symbolLocation.x;\n      }\n    } else {\n      location = new TooltipLocation(location.x + clipX + markerHeight, location.y + clipY - this.elementSize.height / 2 - this.padding);\n      arrowLocation.y = tipLocation.y = height / 2;\n\n      if (position === 'Left') {\n        location.x = symbolLocation.x + clipX - markerHeight - (width + this.arrowPadding);\n      }\n\n      if (bounds.y + bounds.height < location.y + height) {\n        location.y = bounds.height > height ? bounds.y + bounds.height - height + 6 : bounds.y;\n        arrowLocation.y = tipLocation.y = bounds.height > height ? bounds.y + symbolLocation.y - location.y : symbolLocation.y;\n      } else if (bounds.y > location.y) {\n        location.y = bounds.y;\n        arrowLocation.y = tipLocation.y = symbolLocation.y;\n      }\n    }\n\n    return new Rect(location.x, location.y, width, height);\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  Tooltip.prototype.tooltipLocation = function (bounds, symbolLocation, arrowLocation, tipLocation) {\n    if (!isNullOrUndefined(this.tooltipPlacement)) {\n      var tooltipRect = this.getCurrentPosition(bounds, symbolLocation, arrowLocation, tipLocation);\n      return tooltipRect;\n    }\n\n    var location = new TooltipLocation(symbolLocation.x, symbolLocation.y);\n    var width = this.elementSize.width + 2 * this.marginX;\n    var height = this.elementSize.height + 2 * this.marginY;\n    var markerHeight = this.offset;\n    var clipX = this.clipBounds.x;\n    var clipY = this.clipBounds.y;\n    var boundsX = bounds.x;\n    var boundsY = bounds.y;\n\n    if (!this.inverted) {\n      location = new TooltipLocation(location.x + clipX - this.elementSize.width / 2 - this.padding, location.y + clipY - this.elementSize.height - 2 * this.padding - this.arrowPadding - markerHeight);\n      arrowLocation.x = tipLocation.x = width / 2;\n\n      if (location.y < boundsY || this.isNegative) {\n        location.y = (symbolLocation.y < 0 ? 0 : symbolLocation.y) + clipY + markerHeight;\n      }\n\n      if (location.y + height + this.arrowPadding > boundsY + bounds.height) {\n        location.y = Math.min(symbolLocation.y, boundsY + bounds.height) + clipY - this.elementSize.height - 2 * this.padding - this.arrowPadding - markerHeight;\n      }\n\n      tipLocation.x = width / 2;\n\n      if (location.x < boundsX) {\n        arrowLocation.x -= boundsX - location.x;\n        tipLocation.x -= boundsX - location.x;\n        location.x = boundsX;\n      }\n\n      if (location.x + width > boundsX + bounds.width) {\n        arrowLocation.x += location.x + width - (boundsX + bounds.width);\n        tipLocation.x += location.x + width - (boundsX + bounds.width);\n        location.x -= location.x + width - (boundsX + bounds.width);\n      }\n\n      if (arrowLocation.x + this.arrowPadding / 2 > width - this.rx) {\n        arrowLocation.x = width - this.rx - this.arrowPadding / 2;\n        tipLocation.x = width;\n        this.tipRadius = 0;\n      }\n\n      if (arrowLocation.x - this.arrowPadding / 2 < this.rx) {\n        arrowLocation.x = this.rx + this.arrowPadding / 2;\n        tipLocation.x = 0;\n        this.tipRadius = 0;\n      }\n    } else {\n      location = new TooltipLocation(location.x + clipX + markerHeight, location.y + clipY - this.elementSize.height / 2 - this.padding);\n      arrowLocation.y = tipLocation.y = height / 2;\n\n      if (location.x + width + this.arrowPadding > boundsX + bounds.width || this.isNegative) {\n        location.x = (symbolLocation.x > bounds.width + bounds.x ? bounds.width : symbolLocation.x) + clipX - markerHeight - (width + this.arrowPadding);\n      }\n\n      if (location.x < boundsX) {\n        location.x = (symbolLocation.x < 0 ? 0 : symbolLocation.x) + clipX + markerHeight;\n      }\n\n      if (location.y <= boundsY) {\n        arrowLocation.y -= boundsY - location.y;\n        tipLocation.y -= boundsY - location.y;\n        location.y = boundsY;\n      }\n\n      if (location.y + height >= boundsY + bounds.height) {\n        arrowLocation.y += location.y + height - (boundsY + bounds.height);\n        tipLocation.y += location.y + height - (boundsY + bounds.height);\n        location.y -= location.y + height - (boundsY + bounds.height);\n      }\n\n      if (arrowLocation.y + this.arrowPadding / 2 > height - this.ry) {\n        arrowLocation.y = height - this.ry - this.arrowPadding / 2;\n        tipLocation.y = height;\n        this.tipRadius = 0;\n      }\n\n      if (arrowLocation.y - this.arrowPadding / 2 < this.ry) {\n        arrowLocation.y = this.ry + this.arrowPadding / 2;\n        tipLocation.y = 0;\n        this.tipRadius = 0;\n      }\n    }\n\n    return new Rect(location.x, location.y, width, height);\n  };\n\n  Tooltip.prototype.animateTooltipDiv = function (tooltipDiv, rect) {\n    var _this = this;\n\n    var x = parseFloat(tooltipDiv.style.left);\n    var y = parseFloat(tooltipDiv.style.top);\n    var currenDiff;\n    new Animation({}).animate(tooltipDiv, {\n      duration: this.duration,\n      progress: function (args) {\n        currenDiff = args.timeStamp / args.duration;\n        tooltipDiv.style.animation = null;\n        tooltipDiv.style.left = x + currenDiff * (rect.x - x) + 'px';\n        tooltipDiv.style.top = y + currenDiff * (rect.y - y) + 'px';\n      },\n      end: function (model) {\n        _this.updateDiv(tooltipDiv, rect.x, rect.y);\n\n        _this.trigger('animationComplete', {\n          tooltip: _this\n        });\n      }\n    });\n  };\n\n  Tooltip.prototype.updateDiv = function (tooltipDiv, x, y) {\n    tooltipDiv.style.left = x + 'px';\n    tooltipDiv.style.top = y + 'px';\n  };\n\n  Tooltip.prototype.updateTemplateFn = function () {\n    if (this.template) {\n      try {\n        if (document.querySelectorAll(this.template).length) {\n          this.templateFn = templateComplier(document.querySelector(this.template).innerHTML.trim());\n        }\n      } catch (e) {\n        this.templateFn = templateComplier(this.template);\n      }\n    }\n  };\n  /** @private */\n\n\n  Tooltip.prototype.fadeOut = function () {\n    var _this = this;\n\n    var tooltipElement = this.isCanvas && !this.template ? getElement(this.element.id + '_svg') : getElement(this.element.id);\n\n    if (tooltipElement) {\n      var tooltipGroup_1 = tooltipElement.firstChild;\n\n      if (tooltipGroup_1.nodeType != Node.ELEMENT_NODE) {\n        tooltipGroup_1 = tooltipElement.firstElementChild;\n      }\n\n      if (this.isCanvas && !this.template) {\n        tooltipGroup_1 = document.getElementById(this.element.id + '_group') ? document.getElementById(this.element.id + '_group') : tooltipGroup_1;\n      }\n\n      if (!tooltipGroup_1) {\n        return null;\n      }\n\n      var opacity_1 = parseFloat(tooltipGroup_1.getAttribute('opacity'));\n      opacity_1 = !isNullOrUndefined(opacity_1) ? opacity_1 : 1;\n      new Animation({}).animate(tooltipGroup_1, {\n        duration: 200,\n        progress: function (args) {\n          //  tooltipGroup.removeAttribute('e-animate');\n          _this.progressAnimation(tooltipGroup_1, opacity_1, args.timeStamp / args.duration);\n        },\n        end: function () {\n          _this.fadeOuted = true;\n\n          _this.endAnimation(tooltipGroup_1);\n        }\n      });\n    }\n  };\n\n  Tooltip.prototype.progressAnimation = function (tooltipGroup, opacity, timeStamp) {\n    tooltipGroup.style.animation = '';\n    tooltipGroup.setAttribute('opacity', (opacity - timeStamp).toString());\n  };\n  /*\r\n   * @hidden\r\n   */\n\n\n  Tooltip.prototype.endAnimation = function (tooltipGroup) {\n    tooltipGroup.setAttribute('opacity', '0');\n\n    if (this.template) {\n      tooltipGroup.style.display = 'none';\n    }\n\n    this.trigger('animationComplete', {\n      tooltip: this\n    });\n  };\n  /**\r\n   * Get the properties to be maintained in the persisted state.\r\n   *\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.getPersistData = function () {\n    var keyEntity = [];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\r\n   * Get component name\r\n   *\r\n   *  @private\r\n   */\n\n\n  Tooltip.prototype.getModuleName = function () {\n    return 'tooltip';\n  };\n  /**\r\n   * To destroy the accumulationcharts\r\n   *\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.element.classList.remove('e-tooltip');\n  };\n  /**\r\n   * Called internally if any of the property value changed.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.blazorTemplate) {\n      resetBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate');\n    }\n\n    this.isFirst = false;\n    this.render();\n  };\n\n  __decorate([Property(false)], Tooltip.prototype, \"enable\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"shared\", void 0);\n\n  __decorate([Property(true)], Tooltip.prototype, \"enableShadow\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"fill\", void 0);\n\n  __decorate([Property('')], Tooltip.prototype, \"header\", void 0);\n\n  __decorate([Property(0.75)], Tooltip.prototype, \"opacity\", void 0);\n\n  __decorate([Complex({\n    size: '13px',\n    fontWeight: 'Normal',\n    color: null,\n    fontStyle: 'Normal',\n    fontFamily: 'Segoe UI'\n  }, TextStyle)], Tooltip.prototype, \"textStyle\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"template\", void 0);\n\n  __decorate([Property(true)], Tooltip.prototype, \"enableAnimation\", void 0);\n\n  __decorate([Property(300)], Tooltip.prototype, \"duration\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"inverted\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"isNegative\", void 0);\n\n  __decorate([Complex({\n    color: '#cccccc',\n    width: 0.5\n  }, TooltipBorder)], Tooltip.prototype, \"border\", void 0);\n\n  __decorate([Property([])], Tooltip.prototype, \"content\", void 0);\n\n  __decorate([Property(10)], Tooltip.prototype, \"markerSize\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, ToolLocation)], Tooltip.prototype, \"clipBounds\", void 0);\n\n  __decorate([Property([])], Tooltip.prototype, \"palette\", void 0);\n\n  __decorate([Property([])], Tooltip.prototype, \"shapes\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0\n  }, ToolLocation)], Tooltip.prototype, \"location\", void 0);\n\n  __decorate([Property(0)], Tooltip.prototype, \"offset\", void 0);\n\n  __decorate([Property(2)], Tooltip.prototype, \"rx\", void 0);\n\n  __decorate([Property(2)], Tooltip.prototype, \"ry\", void 0);\n\n  __decorate([Property(5)], Tooltip.prototype, \"marginX\", void 0);\n\n  __decorate([Property(5)], Tooltip.prototype, \"marginY\", void 0);\n\n  __decorate([Property(12)], Tooltip.prototype, \"arrowPadding\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"data\", void 0);\n\n  __decorate([Property('Material')], Tooltip.prototype, \"theme\", void 0);\n\n  __decorate([Complex({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  }, AreaBounds)], Tooltip.prototype, \"areaBounds\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"availableSize\", void 0);\n\n  __decorate([Property()], Tooltip.prototype, \"blazorTemplate\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"isCanvas\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"isTextWrap\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"tooltipPlacement\", void 0);\n\n  __decorate([Property(null)], Tooltip.prototype, \"controlInstance\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"tooltipRender\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"loaded\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"animationComplete\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"enableRTL\", void 0);\n\n  Tooltip = __decorate([NotifyPropertyChanges], Tooltip);\n  return Tooltip;\n}(Component);\n\nexport { Tooltip };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-svg-base/src/tooltip/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","NotifyPropertyChanges","Property","Event","Complex","updateBlazorTemplate","extend","compile","templateComplier","Component","resetBlazorTemplate","isBlazor","isNullOrUndefined","SvgRenderer","ChildProperty","createElement","remove","Browser","Animation","getTooltipThemeColor","Size","Rect","Side","measureText","getElement","findDirection","drawSymbol","textElement","removeElement","TextOption","TooltipLocation","PathOption","TextStyle","_super","apply","TooltipBorder","AreaBounds","ToolLocation","Tooltip","options","element","call","preRender","allowServerDataBinding","initPrivateVariable","isCanvas","removeSVG","createTooltipElement","renderer","id","themeStyle","theme","formattedText","padding","isFirst","markerPoint","svgObject","document","getElementById","templateObject","blazorTemplate","parentNode","render","fadeOuted","template","renderText","argsData","cancel","name","tooltip","trigger","markerSide","renderTooltipElement","areaBounds","location","drawMarker","isBottom","isRight","markerSize","updateTemplateFn","createTemplate","textElements","shared","enableRTL","setAttribute","createSvg","appendChild","groupElement","createGroup","pathElement","drawPath","border","width","fill","tooltipFill","opacity","color","size","shapes","shapeOption","count","markerGroup","x","elementSize","marginX","arrowPadding","_i","_a","shape","palette","tooltipDiv","arrowLocation","tipLocation","rect","isTop","isLeft","y","tipRadius","header","height","marginY","content","sharedTooltipLocation","tooltipLocation","inverted","clipBounds","wrapPadding","wrapHeader","isWrap","wrappedText","indexOf","textArray","split","headerSize","textStyle","xLength","direction","pathElement_1","tooltipHeaderLine","start","pointRect","enableAnimation","animateTooltipDiv","updateDiv","toString","tooltipPlacement","rx","ry","enableShadow","shadowId","isIE","shadow","defElement","createDefs","innerHTML","changeText","point","findFormattedText","replace","trim","concat","isRender","subWidth","lines","font","tspanElement","textCollection","tspanStyle","line","tspanOption","isRtlEnabled","body","getAttribute","anchor","leftSpace","rightSpace","headerContent","isBoldTag","headerWidth","isLeftSpace","isRightSpace","headerSpace","isRow","isColumn","markerPadding","spaceWidth","subStringLength","fontSize","fontWeight","labelColor","tooltipLightLabel","dy","parseFloat","contentWidth","parentElement","withoutHeader","isHeader","k","pointsLength","isTextWrap","Math","round","match","RegExp","join","push","len","reverse","j","len_1","isRTLText","test","createTSpan","tooltipBoldLabel","textContent","getTooltipTextContent","style","fontFamily","fontStyle","max","childNodes","width_1","renderContentRTL","contentWidthIndex","tooltipText","characterCollection","isRtlText","isValidHTMLElement","tooltipContent","parent","firstElement","firstElementChild","elem","templateElement","templateFn","data","controlInstance","getBoundingClientRect","tooltipRect","tooltipRendered","rect1","thisObject_1","tooltipRect1","bind","undefined","bounds","getCurrentPosition","symbolLocation","position","clipX","clipY","markerHeight","offset","boundsX","boundsY","isNegative","min","_this","left","top","currenDiff","animate","duration","progress","args","timeStamp","animation","end","model","querySelectorAll","querySelector","e","fadeOut","tooltipElement","tooltipGroup_1","firstChild","nodeType","Node","ELEMENT_NODE","opacity_1","progressAnimation","endAnimation","tooltipGroup","display","getPersistData","keyEntity","addOnPersist","getModuleName","destroy","classList","onPropertyChanged","newProp","oldProp"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n/* eslint-disable @typescript-eslint/ban-types */\r\n/* eslint-disable jsdoc/require-param */\r\n/* eslint-disable jsdoc/require-returns */\r\n/* eslint-disable valid-jsdoc */\r\nimport { NotifyPropertyChanges, Property, Event, Complex, updateBlazorTemplate } from '@syncfusion/ej2-base';\r\nimport { extend, compile as templateComplier, Component, resetBlazorTemplate, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { SvgRenderer } from '../svg-render/index';\r\nimport { ChildProperty, createElement, remove, Browser, Animation } from '@syncfusion/ej2-base';\r\nimport { getTooltipThemeColor } from './interface';\r\nimport { Size, Rect, Side, measureText, getElement, findDirection, drawSymbol, textElement } from './helper';\r\nimport { removeElement, TextOption, TooltipLocation, PathOption } from './helper';\r\n/**\r\n * Configures the fonts in charts.\r\n *\r\n * @private\r\n */\r\nvar TextStyle = /** @class */ (function (_super) {\r\n    __extends(TextStyle, _super);\r\n    function TextStyle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property(null)\r\n    ], TextStyle.prototype, \"size\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], TextStyle.prototype, \"color\", void 0);\r\n    __decorate([\r\n        Property('Segoe UI')\r\n    ], TextStyle.prototype, \"fontFamily\", void 0);\r\n    __decorate([\r\n        Property('Normal')\r\n    ], TextStyle.prototype, \"fontWeight\", void 0);\r\n    __decorate([\r\n        Property('Normal')\r\n    ], TextStyle.prototype, \"fontStyle\", void 0);\r\n    __decorate([\r\n        Property(1)\r\n    ], TextStyle.prototype, \"opacity\", void 0);\r\n    return TextStyle;\r\n}(ChildProperty));\r\nexport { TextStyle };\r\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\r\nvar TooltipBorder = /** @class */ (function (_super) {\r\n    __extends(TooltipBorder, _super);\r\n    function TooltipBorder() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property('')\r\n    ], TooltipBorder.prototype, \"color\", void 0);\r\n    __decorate([\r\n        Property(1)\r\n    ], TooltipBorder.prototype, \"width\", void 0);\r\n    return TooltipBorder;\r\n}(ChildProperty));\r\nexport { TooltipBorder };\r\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\r\nvar AreaBounds = /** @class */ (function (_super) {\r\n    __extends(AreaBounds, _super);\r\n    function AreaBounds() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property(0)\r\n    ], AreaBounds.prototype, \"x\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], AreaBounds.prototype, \"y\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], AreaBounds.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], AreaBounds.prototype, \"height\", void 0);\r\n    return AreaBounds;\r\n}(ChildProperty));\r\nexport { AreaBounds };\r\n/**\r\n * Configures the borders in the chart.\r\n *\r\n * @private\r\n */\r\nvar ToolLocation = /** @class */ (function (_super) {\r\n    __extends(ToolLocation, _super);\r\n    function ToolLocation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property(0)\r\n    ], ToolLocation.prototype, \"x\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], ToolLocation.prototype, \"y\", void 0);\r\n    return ToolLocation;\r\n}(ChildProperty));\r\nexport { ToolLocation };\r\n/**\r\n * Represents the Tooltip control.\r\n * ```html\r\n * <div id=\"tooltip\"/>\r\n * <script>\r\n *   var tooltipObj = new Tooltip({ isResponsive : true });\r\n *   tooltipObj.appendTo(\"#tooltip\");\r\n * </script>\r\n * ```\r\n *\r\n * @private\r\n */\r\nvar Tooltip = /** @class */ (function (_super) {\r\n    __extends(Tooltip, _super);\r\n    /**\r\n     * Constructor for creating the widget\r\n     *\r\n     * @hidden\r\n     */\r\n    function Tooltip(options, element) {\r\n        return _super.call(this, options, element) || this;\r\n    }\r\n    /**\r\n     * Initialize the event handler.\r\n     *\r\n     * @private\r\n     */\r\n    Tooltip.prototype.preRender = function () {\r\n        this.allowServerDataBinding = false;\r\n        this.initPrivateVariable();\r\n        if (!this.isCanvas) {\r\n            this.removeSVG();\r\n        }\r\n        this.createTooltipElement();\r\n    };\r\n    Tooltip.prototype.initPrivateVariable = function () {\r\n        this.renderer = new SvgRenderer(this.element.id);\r\n        this.themeStyle = getTooltipThemeColor(this.theme);\r\n        this.formattedText = [];\r\n        this.padding = 5;\r\n        this.isFirst = true;\r\n        this.markerPoint = [];\r\n    };\r\n    Tooltip.prototype.removeSVG = function () {\r\n        var svgObject = document.getElementById(this.element.id + '_svg');\r\n        var templateObject = document.getElementById(this.element.id + 'parent_template');\r\n        if (this.blazorTemplate) {\r\n            resetBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate');\r\n        }\r\n        if (svgObject && svgObject.parentNode) {\r\n            remove(svgObject);\r\n        }\r\n        if (templateObject && templateObject.parentNode) {\r\n            remove(templateObject);\r\n        }\r\n    };\r\n    /**\r\n     * To Initialize the control rendering.\r\n     */\r\n    Tooltip.prototype.render = function () {\r\n        this.fadeOuted = false;\r\n        if (!this.template) {\r\n            this.renderText(this.isFirst);\r\n            var argsData = {\r\n                cancel: false, name: 'tooltipRender', tooltip: this\r\n            };\r\n            this.trigger('tooltipRender', argsData);\r\n            var markerSide = this.renderTooltipElement(this.areaBounds, this.location);\r\n            this.drawMarker(markerSide.isBottom, markerSide.isRight, this.markerSize);\r\n        }\r\n        else {\r\n            this.updateTemplateFn();\r\n            this.createTemplate(this.areaBounds, this.location);\r\n        }\r\n        this.trigger('loaded', { tooltip: this });\r\n        var element = document.getElementById('chartmeasuretext');\r\n        if (element) {\r\n            remove(element);\r\n        }\r\n        this.allowServerDataBinding = true;\r\n    };\r\n    Tooltip.prototype.createTooltipElement = function () {\r\n        this.textElements = [];\r\n        if (!this.template || this.shared) {\r\n            // SVG element for tooltip\r\n            if (this.enableRTL) {\r\n                this.element.setAttribute('dir', 'ltr');\r\n            }\r\n            var svgObject = this.renderer.createSvg({ id: this.element.id + '_svg' });\r\n            this.element.appendChild(svgObject);\r\n            // Group to hold text and path.\r\n            var groupElement = document.getElementById(this.element.id + '_group');\r\n            if (!groupElement) {\r\n                groupElement = this.renderer.createGroup({ id: this.element.id + '_group' });\r\n                groupElement.setAttribute('transform', 'translate(0,0)');\r\n            }\r\n            svgObject.appendChild(groupElement);\r\n            var pathElement = this.renderer.drawPath({\r\n                'id': this.element.id + '_path', 'stroke-width': this.border.width,\r\n                'fill': this.fill || this.themeStyle.tooltipFill, 'opacity': ((this.theme === 'TailwindDark' || this.theme === 'Tailwind' || this.theme === 'Bootstrap5' || this.theme === 'Bootstrap5Dark') && this.opacity === 0.75) ?\r\n                    1 : this.opacity,\r\n                'stroke': this.border.color\r\n            });\r\n            groupElement.appendChild(pathElement);\r\n        }\r\n    };\r\n    Tooltip.prototype.drawMarker = function (isBottom, isRight, size) {\r\n        if (this.shapes.length <= 0) {\r\n            return null;\r\n        }\r\n        var shapeOption;\r\n        var count = 0;\r\n        var markerGroup = this.renderer.createGroup({ id: this.element.id + '_trackball_group' });\r\n        var groupElement = getElement(this.element.id + '_group');\r\n        var x = ((this.enableRTL) ? this.elementSize.width - (size / 2) :\r\n            (this.marginX * 2) + (size / 2)) + (isRight ? this.arrowPadding : 0);\r\n        for (var _i = 0, _a = this.shapes; _i < _a.length; _i++) {\r\n            var shape = _a[_i];\r\n            if (shape !== 'None') {\r\n                shapeOption = new PathOption(this.element.id + '_Trackball_' + count, this.palette[count], 1, '#cccccc', 1, null);\r\n                if (this.markerPoint[count]) {\r\n                    markerGroup.appendChild(drawSymbol(new TooltipLocation(x, this.markerPoint[count] - this.padding + (isBottom ? this.arrowPadding : 0)), shape, new Size(size, size), '', shapeOption, null));\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n        groupElement.appendChild(markerGroup);\r\n    };\r\n    Tooltip.prototype.renderTooltipElement = function (areaBounds, location) {\r\n        var tooltipDiv = getElement(this.element.id);\r\n        var arrowLocation = new TooltipLocation(0, 0);\r\n        var tipLocation = new TooltipLocation(0, 0);\r\n        var svgObject = getElement(this.element.id + '_svg');\r\n        var groupElement = getElement(this.element.id + '_group');\r\n        var pathElement = getElement(this.element.id + '_path');\r\n        var rect;\r\n        var isTop = false;\r\n        var isLeft = false;\r\n        var isBottom = false;\r\n        var x = 0;\r\n        var y = 0;\r\n        this.tipRadius = 1;\r\n        if (this.header !== '') {\r\n            this.elementSize.height += this.marginY;\r\n        }\r\n        if (this.content.length > 1) {\r\n            rect = this.sharedTooltipLocation(areaBounds, this.location.x, this.location.y);\r\n            isTop = true;\r\n        }\r\n        else {\r\n            rect = this.tooltipLocation(areaBounds, location, arrowLocation, tipLocation);\r\n            if (!this.inverted) {\r\n                isTop = (rect.y < (location.y + this.clipBounds.y));\r\n                isBottom = !isTop;\r\n                y = (isTop ? 0 : this.arrowPadding);\r\n            }\r\n            else {\r\n                isLeft = (rect.x < (location.x + this.clipBounds.x));\r\n                x = (isLeft ? 0 : this.arrowPadding);\r\n            }\r\n        }\r\n        if (this.header !== '') {\r\n            var wrapPadding = 2;\r\n            var wrapHeader = this.isWrap ? this.wrappedText : this.header;\r\n            if (this.isWrap && typeof (wrapHeader) === 'string' && (wrapHeader.indexOf('<') > -1 || wrapHeader.indexOf('>') > -1)) {\r\n                var textArray = wrapHeader.split('<br>');\r\n                wrapPadding = textArray.length;\r\n            }\r\n            var headerSize = measureText(this.isWrap ? this.wrappedText : this.header, this.textStyle).height +\r\n                (this.marginY * wrapPadding) + (isBottom ? this.arrowPadding : 0) + (this.isWrap ? 5 : 0); //header padding;\r\n            var xLength = (this.marginX * 3) + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0);\r\n            var direction = 'M ' + xLength + ' ' + headerSize +\r\n                'L ' + (rect.width + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0) - (this.marginX * 2)) +\r\n                ' ' + headerSize;\r\n            var pathElement_1 = this.renderer.drawPath({\r\n                'id': this.element.id + '_header_path', 'stroke-width': 1,\r\n                'fill': null, 'opacity': 0.8, 'stroke': this.themeStyle.tooltipHeaderLine, 'd': direction\r\n            });\r\n            groupElement.appendChild(pathElement_1);\r\n        }\r\n        var start = this.border.width / 2;\r\n        var pointRect = new Rect(start + x, start + y, rect.width - start, rect.height - start);\r\n        groupElement.setAttribute('opacity', '1');\r\n        if (this.enableAnimation && !this.shared && !this.isFirst) {\r\n            this.animateTooltipDiv(tooltipDiv, rect);\r\n        }\r\n        else {\r\n            this.updateDiv(tooltipDiv, rect.x, rect.y);\r\n        }\r\n        // eslint-disable-next-line no-extra-boolean-cast\r\n        svgObject.setAttribute('height', (rect.height + this.border.width + (!((!this.inverted)) ? 0 : this.arrowPadding) + 5).toString());\r\n        svgObject.setAttribute('width', (rect.width + this.border.width + (((!this.inverted)) ? 0 : this.arrowPadding) + 5).toString());\r\n        svgObject.setAttribute('opacity', '1');\r\n        if (!isNullOrUndefined(this.tooltipPlacement)) {\r\n            isTop = this.tooltipPlacement.indexOf('Top') > -1;\r\n            isBottom = this.tooltipPlacement.indexOf('Bottom') > -1;\r\n            isLeft = this.tooltipPlacement.indexOf('Left') > -1;\r\n        }\r\n        pathElement.setAttribute('d', findDirection(this.rx, this.ry, pointRect, arrowLocation, this.arrowPadding, isTop, isBottom, isLeft, tipLocation.x, tipLocation.y, this.tipRadius));\r\n        if (this.enableShadow && this.theme !== 'Bootstrap4') {\r\n            // To fix next chart initial tooltip opacity issue in tab control\r\n            var shadowId = this.element.id + '_shadow';\r\n            if (this.theme === 'Tailwind' || this.theme === 'TailwindDark'\r\n                || this.theme === 'Bootstrap5' || this.theme === 'Bootstrap5Dark') {\r\n                pathElement.setAttribute('box-shadow', '0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)');\r\n            }\r\n            else {\r\n                pathElement.setAttribute('filter', Browser.isIE ? '' : 'url(#' + shadowId + ')');\r\n            }\r\n            var shadow = '<filter id=\"' + shadowId + '\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\r\n            shadow += '<feOffset dx=\"3\" dy=\"3\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.5\"/>';\r\n            shadow += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\r\n            var defElement = this.renderer.createDefs();\r\n            defElement.setAttribute('id', this.element.id + 'SVG_tooltip_definition');\r\n            groupElement.appendChild(defElement);\r\n            defElement.innerHTML = shadow;\r\n        }\r\n        pathElement.setAttribute('stroke', this.border.color);\r\n        this.changeText(new TooltipLocation(x, y), isBottom, !isLeft && !isTop && !isBottom);\r\n        return new Side(isBottom, !isLeft && !isTop && !isBottom);\r\n    };\r\n    Tooltip.prototype.changeText = function (point, isBottom, isRight) {\r\n        var element = document.getElementById(this.element.id + '_text');\r\n        if (isBottom) {\r\n            element.setAttribute('transform', 'translate(0,' + this.arrowPadding + ')');\r\n        }\r\n        if (isRight) {\r\n            element.setAttribute('transform', 'translate(' + this.arrowPadding + ' 0)');\r\n        }\r\n    };\r\n    Tooltip.prototype.findFormattedText = function () {\r\n        this.formattedText = [];\r\n        if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\r\n            this.formattedText = this.formattedText.concat(this.header);\r\n        }\r\n        this.formattedText = this.formattedText.concat(this.content);\r\n    };\r\n    // tslint:disable-next-line:max-func-body-length\r\n    Tooltip.prototype.renderText = function (isRender) {\r\n        var height = 0;\r\n        var width = 0; // Padding for text;\r\n        var subWidth = 0;\r\n        var lines;\r\n        var key = 'properties';\r\n        var font = extend({}, this.textStyle, null, true)[key];\r\n        var groupElement = getElement(this.element.id + '_group');\r\n        var tspanElement;\r\n        var textCollection;\r\n        var tspanStyle = '';\r\n        var line;\r\n        var tspanOption;\r\n        this.findFormattedText();\r\n        this.isWrap = false;\r\n        var isRtlEnabled = document.body.getAttribute('dir') === 'rtl';\r\n        var anchor = isRtlEnabled && !this.enableRTL ? 'end' : 'start';\r\n        this.leftSpace = this.areaBounds.x + this.location.x;\r\n        this.rightSpace = (this.areaBounds.x + this.areaBounds.width) - this.leftSpace;\r\n        var headerContent = this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim();\r\n        var isBoldTag = this.header.indexOf('<b>') > -1 && this.header.indexOf('</b>') > -1;\r\n        var headerWidth = measureText(this.formattedText[0], font).width + (2 * this.marginX) + this.arrowPadding;\r\n        var isLeftSpace = (this.location.x - headerWidth) < this.location.x;\r\n        var isRightSpace = (this.areaBounds.x + this.areaBounds.width) < (this.location.x + headerWidth);\r\n        var header;\r\n        var headerSpace = (headerContent !== '') ? this.marginY : 0;\r\n        var isRow = true;\r\n        var isColumn = true;\r\n        this.markerPoint = [];\r\n        var markerSize = (this.shapes.length > 0) ? 10 : 0;\r\n        var markerPadding = (this.shapes.length > 0) ? 5 : 0;\r\n        var spaceWidth = 4;\r\n        var subStringLength;\r\n        var fontSize = '13px';\r\n        var fontWeight = 'Normal';\r\n        var labelColor = this.themeStyle.tooltipLightLabel;\r\n        var dy = (22 / parseFloat(fontSize)) * (parseFloat(font.size));\r\n        var contentWidth = [];\r\n        if (!isRender || this.isCanvas) {\r\n            removeElement(this.element.id + '_text');\r\n            removeElement(this.element.id + '_header_path');\r\n            removeElement(this.element.id + '_trackball_group');\r\n            removeElement(this.element.id + 'SVG_tooltip_definition');\r\n        }\r\n        var options = new TextOption(this.element.id + '_text', this.marginX * 2, (this.marginY * 2 + this.padding * 2 + (this.marginY === 2 ? 3 : 0)), anchor, '');\r\n        var parentElement = textElement(options, font, null, groupElement);\r\n        var withoutHeader = this.formattedText.length === 1 && this.formattedText[0].indexOf(' : <b>') > -1;\r\n        var isHeader = this.header !== '';\r\n        var size = isHeader && isBoldTag ? 16 : 13;\r\n        for (var k = 0, pointsLength = this.formattedText.length; k < pointsLength; k++) {\r\n            textCollection = this.formattedText[k].replace(/<(b|strong)>/g, '<b>')\r\n                .replace(/<\\/(b|strong)>/g, '</b>')\r\n                .split(/<br.*?>/g);\r\n            if (k === 0 && !withoutHeader && this.isTextWrap &&\r\n                (this.leftSpace < headerWidth || isLeftSpace) &&\r\n                (this.rightSpace < headerWidth || isRightSpace)) {\r\n                subStringLength = Math.round(this.leftSpace > this.rightSpace ? (this.leftSpace / size) : (this.rightSpace / size));\r\n                header = headerContent !== '' ? headerContent : this.formattedText[k];\r\n                textCollection = header.match(new RegExp('.{1,' + subStringLength + '}', 'g'));\r\n                this.wrappedText = isBoldTag ? '<b>' + textCollection.join('<br>') + '</b>' : textCollection.join('<br>');\r\n                this.isWrap = textCollection.length > 1;\r\n            }\r\n            if (textCollection[0] === '') {\r\n                continue;\r\n            }\r\n            if ((k !== 0) || (headerContent === '')) {\r\n                this.markerPoint.push((headerContent !== '' ? (this.marginY) : 0) + options.y + height);\r\n            }\r\n            for (var i = 0, len = textCollection.length; i < len; i++) { // string value of unicode for LTR is \\u200E\r\n                lines = textCollection[i].replace(/<b>/g, '<br><b>').replace(/<\\/b>/g, '</b><br>').replace(/:/g, (this.enableRTL) ? '<br>\\u200E: <br>' : '<br>\\u200E:<br>')\r\n                    .split('<br>');\r\n                if (this.enableRTL && lines.length > 0 && textCollection[i].match(/:/g)) {\r\n                    lines[0] = lines[0].trim();\r\n                    lines.reverse();\r\n                }\r\n                subWidth = 0;\r\n                isColumn = true;\r\n                height += dy;\r\n                for (var j = 0, len_1 = lines.length; j < len_1; j++) {\r\n                    line = lines[j];\r\n                    if (this.enableRTL && line !== '' && this.isRTLText(line)) {\r\n                        line = line.concat('\\u200E');\r\n                    }\r\n                    if (!/\\S/.test(line) && line !== '') {\r\n                        line = ' '; //to trim multiple white spaces to single white space\r\n                    }\r\n                    if ((!isColumn && line === ' ') || (line.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '')) {\r\n                        subWidth += line !== ' ' ? spaceWidth : 0;\r\n                        if (isColumn && !isRow) {\r\n                            tspanOption = {\r\n                                x: (this.marginX * 2) + (markerSize + markerPadding),\r\n                                dy: dy + ((isColumn) ? headerSpace : 0), fill: ''\r\n                            };\r\n                            headerSpace = null;\r\n                        }\r\n                        else {\r\n                            if (isRow && isColumn) {\r\n                                tspanOption = {\r\n                                    x: (headerContent === '') ? ((this.marginX * 2) + (markerSize + markerPadding))\r\n                                        : (this.marginX * 2) + (this.isWrap ? (markerSize + markerPadding) : 0)\r\n                                };\r\n                            }\r\n                            else {\r\n                                tspanOption = {};\r\n                            }\r\n                        }\r\n                        isColumn = false;\r\n                        tspanElement = this.renderer.createTSpan(tspanOption, '');\r\n                        parentElement.appendChild(tspanElement);\r\n                        if (line.indexOf('<b>') > -1 || ((isBoldTag && j === 0 && k === 0) && (isHeader || this.isWrap))) {\r\n                            fontWeight = 'bold';\r\n                            labelColor = this.themeStyle.tooltipBoldLabel;\r\n                            tspanStyle = 'font-weight:' + fontWeight;\r\n                            font.fontWeight = fontWeight;\r\n                            (tspanElement).setAttribute('fill', this.textStyle.color || labelColor);\r\n                        }\r\n                        else {\r\n                            tspanStyle = fontWeight === 'bold' ? 'font-weight:' + fontWeight : '';\r\n                            font.fontWeight = fontWeight;\r\n                            (tspanElement).setAttribute('fill', this.textStyle.color || labelColor);\r\n                        }\r\n                        if (line.indexOf('</b>') > -1 || ((isBoldTag && j === len_1 - 1 && k === 0) && (isHeader || this.isWrap))) {\r\n                            fontWeight = 'Normal';\r\n                            labelColor = this.themeStyle.tooltipLightLabel;\r\n                        }\r\n                        // eslint-disable-next-line no-useless-escape\r\n                        (tspanElement).textContent = line = this.getTooltipTextContent(line);\r\n                        subWidth += measureText(line, font).width;\r\n                        if (tspanStyle !== '') {\r\n                            tspanElement.style.fontWeight = tspanStyle.split('font-weight:')[1];\r\n                            tspanElement.style.color = tspanElement.getAttribute('fill');\r\n                        }\r\n                        // 'inherit' will apply css style from parent element.\r\n                        tspanElement.style.fontFamily = 'inherit';\r\n                        tspanElement.style.fontStyle = 'inherit';\r\n                        tspanElement.style.fontSize = 'inherit';\r\n                        isRow = false;\r\n                    }\r\n                }\r\n                subWidth -= spaceWidth;\r\n                width = Math.max(width, subWidth);\r\n                contentWidth.push(subWidth);\r\n            }\r\n        }\r\n        this.elementSize = new Size(width + (width > 0 ? (2 * this.marginX) : 0), height);\r\n        this.elementSize.width += (markerSize + markerPadding); // marker size + marker Spacing\r\n        var element = (parentElement.childNodes[0]);\r\n        if (headerContent !== '' && element && !this.isWrap) {\r\n            font.fontWeight = 'bold';\r\n            var width_1 = (this.elementSize.width + (2 * this.padding)) / 2 - measureText(headerContent, font).width / 2;\r\n            element.setAttribute('x', width_1.toString());\r\n        }\r\n        this.renderContentRTL(parentElement, isHeader, markerSize + markerPadding, contentWidth);\r\n    };\r\n    Tooltip.prototype.renderContentRTL = function (textElement, isHeader, markerSize, contentWidth) {\r\n        if (this.enableRTL) {\r\n            var tspanElement = void 0;\r\n            var contentWidthIndex = isHeader ? 1 : 0;\r\n            for (var i = 0; i < textElement.childNodes.length; i++) {\r\n                tspanElement = (textElement.childNodes[i]);\r\n                if ((!isHeader || i > 0) && !isNullOrUndefined(tspanElement.getAttribute('x'))) {\r\n                    tspanElement.setAttribute('x', (this.elementSize.width - (markerSize + contentWidth[contentWidthIndex])).toString());\r\n                    contentWidthIndex++;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tooltip.prototype.getTooltipTextContent = function (tooltipText) {\r\n        var characterCollection = tooltipText.match(/<[a-zA-Z\\/](.|\\n)*?>/g);\r\n        if (isNullOrUndefined(characterCollection)) {\r\n            return tooltipText;\r\n        }\r\n        var isRtlText = this.isRTLText(tooltipText);\r\n        for (var i = 0; i < characterCollection.length; i++) {\r\n            if (this.isValidHTMLElement(characterCollection[i].replace('<', '').replace('/', '').replace('>', '').trim())) {\r\n                tooltipText = tooltipText.replace(characterCollection[i], isRtlText ? '\\u200E' : '');\r\n            }\r\n        }\r\n        return tooltipText;\r\n    };\r\n    Tooltip.prototype.isValidHTMLElement = function (element) {\r\n        return document.createElement(element).toString() != \"[object HTMLUnknownElement]\";\r\n    };\r\n    Tooltip.prototype.isRTLText = function (tooltipContent) {\r\n        return /[\\u0590-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]/.test(tooltipContent);\r\n    };\r\n    Tooltip.prototype.createTemplate = function (areaBounds, location) {\r\n        var argsData = { cancel: false, name: 'tooltipRender', tooltip: this };\r\n        this.trigger('tooltipRender', argsData);\r\n        var parent = document.getElementById(this.element.id);\r\n        if (this.isCanvas) {\r\n            this.removeSVG();\r\n        }\r\n        var firstElement = parent.firstElementChild;\r\n        if (firstElement) {\r\n            remove(firstElement);\r\n        }\r\n        if (!argsData.cancel) {\r\n            var elem = createElement('div', { id: this.element.id + 'parent_template' });\r\n            var templateElement = this.templateFn(this.data, this.controlInstance, elem.id, elem.id + '_blazorTemplate', '');\r\n            while (templateElement && templateElement.length > 0) {\r\n                if (isBlazor() || templateElement.length === 1) {\r\n                    elem.appendChild(templateElement[0]);\r\n                    templateElement = null;\r\n                }\r\n                else {\r\n                    elem.appendChild(templateElement[0]);\r\n                }\r\n            }\r\n            parent.appendChild(elem);\r\n            var element = this.isCanvas ? elem : this.element;\r\n            var rect = element.getBoundingClientRect();\r\n            this.padding = 0;\r\n            this.elementSize = new Size(rect.width, rect.height);\r\n            var tooltipRect = this.shared ? this.sharedTooltipLocation(areaBounds, this.location.x, this.location.y)\r\n                : this.tooltipLocation(areaBounds, location, new TooltipLocation(0, 0), new TooltipLocation(0, 0));\r\n            if (this.enableAnimation && !this.shared && !this.isFirst) {\r\n                this.animateTooltipDiv(this.element, tooltipRect);\r\n            }\r\n            else {\r\n                this.updateDiv(element, tooltipRect.x, tooltipRect.y);\r\n            }\r\n            if (this.blazorTemplate) {\r\n                //Customer issue - F149037  Call back function to handle the blazor tooltip alignment issues\r\n                var tooltipRendered = function () {\r\n                    var rect1 = getElement(thisObject_1.element.id).getBoundingClientRect();\r\n                    thisObject_1.elementSize = new Size(rect1.width, rect1.height);\r\n                    var tooltipRect1 = thisObject_1.tooltipLocation(areaBounds, location, new TooltipLocation(0, 0), new TooltipLocation(0, 0));\r\n                    thisObject_1.updateDiv(getElement(thisObject_1.element.id), tooltipRect1.x, tooltipRect1.y);\r\n                };\r\n                // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n                var thisObject_1 = this;\r\n                tooltipRendered.bind(thisObject_1, areaBounds, location);\r\n                updateBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate', this.blazorTemplate.name, this.blazorTemplate.parent, undefined, tooltipRendered);\r\n            }\r\n        }\r\n        else {\r\n            remove(getElement(this.element.id + '_tooltip'));\r\n        }\r\n    };\r\n    Tooltip.prototype.sharedTooltipLocation = function (bounds, x, y) {\r\n        var width = this.elementSize.width + (2 * this.marginX);\r\n        var height = this.elementSize.height + (2 * this.marginY);\r\n        var tooltipRect = new Rect(x + 2 * this.padding, y - height - this.padding, width, height);\r\n        if (tooltipRect.y < bounds.y) {\r\n            tooltipRect.y += (tooltipRect.height + 2 * this.padding);\r\n        }\r\n        if (tooltipRect.x + tooltipRect.width > bounds.x + bounds.width) {\r\n            tooltipRect.x -= (tooltipRect.width + 4 * this.padding);\r\n        }\r\n        return tooltipRect;\r\n    };\r\n    Tooltip.prototype.getCurrentPosition = function (bounds, symbolLocation, arrowLocation, tipLocation) {\r\n        var position = this.tooltipPlacement;\r\n        var clipX = this.clipBounds.x;\r\n        var clipY = this.clipBounds.y;\r\n        var markerHeight = this.offset;\r\n        var width = this.elementSize.width + (2 * this.marginX);\r\n        var height = this.elementSize.height + (2 * this.marginY);\r\n        var location = new TooltipLocation(symbolLocation.x, symbolLocation.y);\r\n        if (position === 'Top' || position === 'Bottom') {\r\n            location = new TooltipLocation(location.x + clipX - this.elementSize.width / 2 - this.padding, location.y + clipY - this.elementSize.height - (2 * this.padding) - this.arrowPadding - markerHeight);\r\n            arrowLocation.x = tipLocation.x = width / 2;\r\n            if (position === 'Bottom') {\r\n                location.y = symbolLocation.y + clipY + markerHeight;\r\n            }\r\n            if (bounds.x + bounds.width < location.x + width) {\r\n                location.x = (bounds.width > width) ? ((bounds.x + bounds.width) - width + 6) : bounds.x;\r\n                arrowLocation.x = tipLocation.x = (bounds.width > width) ? (bounds.x + symbolLocation.x - location.x) : symbolLocation.x;\r\n            }\r\n            else if (bounds.x > location.x) {\r\n                location.x = bounds.x;\r\n                arrowLocation.x = tipLocation.x = symbolLocation.x;\r\n            }\r\n        }\r\n        else {\r\n            location = new TooltipLocation(location.x + clipX + markerHeight, location.y + clipY - this.elementSize.height / 2 - (this.padding));\r\n            arrowLocation.y = tipLocation.y = height / 2;\r\n            if (position === 'Left') {\r\n                location.x = symbolLocation.x + clipX - markerHeight - (width + this.arrowPadding);\r\n            }\r\n            if (bounds.y + bounds.height < location.y + height) {\r\n                location.y = (bounds.height > height) ? ((bounds.y + bounds.height) - height + 6) : bounds.y;\r\n                arrowLocation.y = tipLocation.y = (bounds.height > height) ? (bounds.y + symbolLocation.y - location.y) : symbolLocation.y;\r\n            }\r\n            else if (bounds.y > location.y) {\r\n                location.y = bounds.y;\r\n                arrowLocation.y = tipLocation.y = symbolLocation.y;\r\n            }\r\n        }\r\n        return new Rect(location.x, location.y, width, height);\r\n    };\r\n    // tslint:disable-next-line:max-func-body-length\r\n    Tooltip.prototype.tooltipLocation = function (bounds, symbolLocation, arrowLocation, tipLocation) {\r\n        if (!isNullOrUndefined(this.tooltipPlacement)) {\r\n            var tooltipRect = this.getCurrentPosition(bounds, symbolLocation, arrowLocation, tipLocation);\r\n            return tooltipRect;\r\n        }\r\n        var location = new TooltipLocation(symbolLocation.x, symbolLocation.y);\r\n        var width = this.elementSize.width + (2 * this.marginX);\r\n        var height = this.elementSize.height + (2 * this.marginY);\r\n        var markerHeight = this.offset;\r\n        var clipX = this.clipBounds.x;\r\n        var clipY = this.clipBounds.y;\r\n        var boundsX = bounds.x;\r\n        var boundsY = bounds.y;\r\n        if (!this.inverted) {\r\n            location = new TooltipLocation(location.x + clipX - this.elementSize.width / 2 - this.padding, location.y + clipY - this.elementSize.height - (2 * this.padding) - this.arrowPadding - markerHeight);\r\n            arrowLocation.x = tipLocation.x = width / 2;\r\n            if (location.y < boundsY || (this.isNegative)) {\r\n                location.y = (symbolLocation.y < 0 ? 0 : symbolLocation.y) + clipY + markerHeight;\r\n            }\r\n            if (location.y + height + this.arrowPadding > boundsY + bounds.height) {\r\n                location.y = Math.min(symbolLocation.y, boundsY + bounds.height) + clipY\r\n                    - this.elementSize.height - (2 * this.padding) - this.arrowPadding - markerHeight;\r\n            }\r\n            tipLocation.x = width / 2;\r\n            if (location.x < boundsX) {\r\n                arrowLocation.x -= (boundsX - location.x);\r\n                tipLocation.x -= (boundsX - location.x);\r\n                location.x = boundsX;\r\n            }\r\n            if (location.x + width > boundsX + bounds.width) {\r\n                arrowLocation.x += ((location.x + width) - (boundsX + bounds.width));\r\n                tipLocation.x += ((location.x + width) - (boundsX + bounds.width));\r\n                location.x -= ((location.x + width) - (boundsX + bounds.width));\r\n            }\r\n            if (arrowLocation.x + this.arrowPadding / 2 > width - this.rx) {\r\n                arrowLocation.x = width - this.rx - this.arrowPadding / 2;\r\n                tipLocation.x = width;\r\n                this.tipRadius = 0;\r\n            }\r\n            if (arrowLocation.x - this.arrowPadding / 2 < this.rx) {\r\n                arrowLocation.x = this.rx + this.arrowPadding / 2;\r\n                tipLocation.x = 0;\r\n                this.tipRadius = 0;\r\n            }\r\n        }\r\n        else {\r\n            location = new TooltipLocation(location.x + clipX + markerHeight, location.y + clipY - this.elementSize.height / 2 - (this.padding));\r\n            arrowLocation.y = tipLocation.y = height / 2;\r\n            if ((location.x + width + this.arrowPadding > boundsX + bounds.width) || (this.isNegative)) {\r\n                location.x = (symbolLocation.x > bounds.width + bounds.x ? bounds.width : symbolLocation.x)\r\n                    + clipX - markerHeight - (width + this.arrowPadding);\r\n            }\r\n            if (location.x < boundsX) {\r\n                location.x = (symbolLocation.x < 0 ? 0 : symbolLocation.x) + clipX + markerHeight;\r\n            }\r\n            if (location.y <= boundsY) {\r\n                arrowLocation.y -= (boundsY - location.y);\r\n                tipLocation.y -= (boundsY - location.y);\r\n                location.y = boundsY;\r\n            }\r\n            if (location.y + height >= boundsY + bounds.height) {\r\n                arrowLocation.y += ((location.y + height) - (boundsY + bounds.height));\r\n                tipLocation.y += ((location.y + height) - (boundsY + bounds.height));\r\n                location.y -= ((location.y + height) - (boundsY + bounds.height));\r\n            }\r\n            if (arrowLocation.y + this.arrowPadding / 2 > height - this.ry) {\r\n                arrowLocation.y = height - this.ry - this.arrowPadding / 2;\r\n                tipLocation.y = height;\r\n                this.tipRadius = 0;\r\n            }\r\n            if (arrowLocation.y - this.arrowPadding / 2 < this.ry) {\r\n                arrowLocation.y = this.ry + this.arrowPadding / 2;\r\n                tipLocation.y = 0;\r\n                this.tipRadius = 0;\r\n            }\r\n        }\r\n        return new Rect(location.x, location.y, width, height);\r\n    };\r\n    Tooltip.prototype.animateTooltipDiv = function (tooltipDiv, rect) {\r\n        var _this = this;\r\n        var x = parseFloat(tooltipDiv.style.left);\r\n        var y = parseFloat(tooltipDiv.style.top);\r\n        var currenDiff;\r\n        new Animation({}).animate(tooltipDiv, {\r\n            duration: this.duration,\r\n            progress: function (args) {\r\n                currenDiff = (args.timeStamp / args.duration);\r\n                tooltipDiv.style.animation = null;\r\n                tooltipDiv.style.left = (x + currenDiff * (rect.x - x)) + 'px';\r\n                tooltipDiv.style.top = (y + currenDiff * (rect.y - y)) + 'px';\r\n            },\r\n            end: function (model) {\r\n                _this.updateDiv(tooltipDiv, rect.x, rect.y);\r\n                _this.trigger('animationComplete', { tooltip: _this });\r\n            }\r\n        });\r\n    };\r\n    Tooltip.prototype.updateDiv = function (tooltipDiv, x, y) {\r\n        tooltipDiv.style.left = x + 'px';\r\n        tooltipDiv.style.top = y + 'px';\r\n    };\r\n    Tooltip.prototype.updateTemplateFn = function () {\r\n        if (this.template) {\r\n            try {\r\n                if (document.querySelectorAll(this.template).length) {\r\n                    this.templateFn = templateComplier(document.querySelector(this.template).innerHTML.trim());\r\n                }\r\n            }\r\n            catch (e) {\r\n                this.templateFn = templateComplier(this.template);\r\n            }\r\n        }\r\n    };\r\n    /** @private */\r\n    Tooltip.prototype.fadeOut = function () {\r\n        var _this = this;\r\n        var tooltipElement = (this.isCanvas && !this.template) ? getElement(this.element.id + '_svg') :\r\n            getElement(this.element.id);\r\n        if (tooltipElement) {\r\n            var tooltipGroup_1 = tooltipElement.firstChild;\r\n            if (tooltipGroup_1.nodeType != Node.ELEMENT_NODE) {\r\n                tooltipGroup_1 = tooltipElement.firstElementChild;\r\n            }\r\n            if (this.isCanvas && !this.template) {\r\n                tooltipGroup_1 = document.getElementById(this.element.id + '_group') ? document.getElementById(this.element.id + '_group') :\r\n                    tooltipGroup_1;\r\n            }\r\n            if (!tooltipGroup_1) {\r\n                return null;\r\n            }\r\n            var opacity_1 = parseFloat(tooltipGroup_1.getAttribute('opacity'));\r\n            opacity_1 = !isNullOrUndefined(opacity_1) ? opacity_1 : 1;\r\n            new Animation({}).animate(tooltipGroup_1, {\r\n                duration: 200,\r\n                progress: function (args) {\r\n                    //  tooltipGroup.removeAttribute('e-animate');\r\n                    _this.progressAnimation(tooltipGroup_1, opacity_1, (args.timeStamp / args.duration));\r\n                },\r\n                end: function () {\r\n                    _this.fadeOuted = true;\r\n                    _this.endAnimation(tooltipGroup_1);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Tooltip.prototype.progressAnimation = function (tooltipGroup, opacity, timeStamp) {\r\n        tooltipGroup.style.animation = '';\r\n        tooltipGroup.setAttribute('opacity', (opacity - timeStamp).toString());\r\n    };\r\n    /*\r\n     * @hidden\r\n     */\r\n    Tooltip.prototype.endAnimation = function (tooltipGroup) {\r\n        tooltipGroup.setAttribute('opacity', '0');\r\n        if (this.template) {\r\n            tooltipGroup.style.display = 'none';\r\n        }\r\n        this.trigger('animationComplete', { tooltip: this });\r\n    };\r\n    /**\r\n     * Get the properties to be maintained in the persisted state.\r\n     *\r\n     * @private\r\n     */\r\n    Tooltip.prototype.getPersistData = function () {\r\n        var keyEntity = [];\r\n        return this.addOnPersist(keyEntity);\r\n    };\r\n    /**\r\n     * Get component name\r\n     *\r\n     *  @private\r\n     */\r\n    Tooltip.prototype.getModuleName = function () {\r\n        return 'tooltip';\r\n    };\r\n    /**\r\n     * To destroy the accumulationcharts\r\n     *\r\n     * @private\r\n     */\r\n    Tooltip.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        this.element.classList.remove('e-tooltip');\r\n    };\r\n    /**\r\n     * Called internally if any of the property value changed.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        if (this.blazorTemplate) {\r\n            resetBlazorTemplate(this.element.id + 'parent_template' + '_blazorTemplate');\r\n        }\r\n        this.isFirst = false;\r\n        this.render();\r\n    };\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"enable\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"shared\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], Tooltip.prototype, \"enableShadow\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"fill\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], Tooltip.prototype, \"header\", void 0);\r\n    __decorate([\r\n        Property(0.75)\r\n    ], Tooltip.prototype, \"opacity\", void 0);\r\n    __decorate([\r\n        Complex({ size: '13px', fontWeight: 'Normal', color: null, fontStyle: 'Normal', fontFamily: 'Segoe UI' }, TextStyle)\r\n    ], Tooltip.prototype, \"textStyle\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"template\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], Tooltip.prototype, \"enableAnimation\", void 0);\r\n    __decorate([\r\n        Property(300)\r\n    ], Tooltip.prototype, \"duration\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"inverted\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"isNegative\", void 0);\r\n    __decorate([\r\n        Complex({ color: '#cccccc', width: 0.5 }, TooltipBorder)\r\n    ], Tooltip.prototype, \"border\", void 0);\r\n    __decorate([\r\n        Property([])\r\n    ], Tooltip.prototype, \"content\", void 0);\r\n    __decorate([\r\n        Property(10)\r\n    ], Tooltip.prototype, \"markerSize\", void 0);\r\n    __decorate([\r\n        Complex({ x: 0, y: 0 }, ToolLocation)\r\n    ], Tooltip.prototype, \"clipBounds\", void 0);\r\n    __decorate([\r\n        Property([])\r\n    ], Tooltip.prototype, \"palette\", void 0);\r\n    __decorate([\r\n        Property([])\r\n    ], Tooltip.prototype, \"shapes\", void 0);\r\n    __decorate([\r\n        Complex({ x: 0, y: 0 }, ToolLocation)\r\n    ], Tooltip.prototype, \"location\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tooltip.prototype, \"offset\", void 0);\r\n    __decorate([\r\n        Property(2)\r\n    ], Tooltip.prototype, \"rx\", void 0);\r\n    __decorate([\r\n        Property(2)\r\n    ], Tooltip.prototype, \"ry\", void 0);\r\n    __decorate([\r\n        Property(5)\r\n    ], Tooltip.prototype, \"marginX\", void 0);\r\n    __decorate([\r\n        Property(5)\r\n    ], Tooltip.prototype, \"marginY\", void 0);\r\n    __decorate([\r\n        Property(12)\r\n    ], Tooltip.prototype, \"arrowPadding\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"data\", void 0);\r\n    __decorate([\r\n        Property('Material')\r\n    ], Tooltip.prototype, \"theme\", void 0);\r\n    __decorate([\r\n        Complex({ x: 0, y: 0, width: 0, height: 0 }, AreaBounds)\r\n    ], Tooltip.prototype, \"areaBounds\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"availableSize\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tooltip.prototype, \"blazorTemplate\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"isCanvas\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"isTextWrap\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"tooltipPlacement\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Tooltip.prototype, \"controlInstance\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"tooltipRender\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"loaded\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"animationComplete\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"enableRTL\", void 0);\r\n    Tooltip = __decorate([\r\n        NotifyPropertyChanges\r\n    ], Tooltip);\r\n    return Tooltip;\r\n}(Component));\r\nexport { Tooltip };\r\n"]},"metadata":{},"sourceType":"module"}