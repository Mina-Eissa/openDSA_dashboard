{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-inferrable-types */\nimport { createElement, isNullOrUndefined, Browser, remove } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DateRangePicker } from '@syncfusion/ej2-calendars';\nimport { getElement } from '../../common/utils/helper';\nimport { Rect } from '@syncfusion/ej2-svg-base';\n/**\r\n * Period selector class\r\n */\n\nvar PeriodSelector =\n/** @class */\nfunction () {\n  //constructor for period selector\n  function PeriodSelector(control) {\n    this.control = {};\n    this.rootControl = control;\n  }\n  /**\r\n   * To set the control values\r\n   *\r\n   * @param control\r\n   * @returns {void}\r\n   */\n\n\n  PeriodSelector.prototype.setControlValues = function (control) {\n    if (control.getModuleName() === 'rangeNavigator') {\n      this.control.periods = this.rootControl.periodSelectorSettings.periods;\n      this.control.seriesXMax = control.chartSeries.xMax;\n      this.control.seriesXMin = control.chartSeries.xMin;\n      this.control.rangeSlider = control.rangeSlider;\n      this.control.rangeNavigatorControl = control;\n      this.control.endValue = control.endValue;\n      this.control.startValue = control.startValue;\n    } else {\n      this.control.periods = this.rootControl.periods;\n      this.control.endValue = this.control.seriesXMax = control.seriesXMax;\n      this.control.startValue = this.control.seriesXMin = control.seriesXMin;\n      this.control.rangeNavigatorControl = this.rootControl.rangeNavigator;\n\n      if (this.control.rangeNavigatorControl) {\n        this.control.rangeSlider = this.rootControl.rangeNavigator.rangeSlider;\n      }\n    }\n\n    this.control.element = control.element;\n    this.control.disableRangeSelector = control.disableRangeSelector;\n  };\n  /**\r\n   * To initialize the period selector properties\r\n   *\r\n   * @param options\r\n   * @param x\r\n   * @param options\r\n   * @param x\r\n   */\n\n\n  PeriodSelector.prototype.appendSelector = function (options, x) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    this.renderSelectorElement(null, options, x);\n    this.renderSelector();\n  };\n  /**\r\n   * renderSelector div\r\n   *\r\n   * @param control\r\n   * @param options\r\n   * @param x\r\n   * @param options\r\n   * @param x\r\n   */\n\n\n  PeriodSelector.prototype.renderSelectorElement = function (control, options, x) {\n    //render border\n    this.periodSelectorSize = control ? this.periodSelectorSize : new Rect(x, this.rootControl.titleSize.height, options.width, options.height);\n    var thumbSize;\n    var element;\n\n    if (control) {\n      thumbSize = control.themeStyle.thumbWidth;\n      element = control.element;\n    } else {\n      thumbSize = options.thumbSize;\n      element = options.element;\n    }\n\n    if (getElement(element.id + '_Secondary_Element')) {\n      remove(getElement(element.id + '_Secondary_Element'));\n    }\n\n    this.periodSelectorDiv = createElement('div', {\n      id: element.id + '_Secondary_Element',\n      styles: 'width: ' + (this.periodSelectorSize.width - thumbSize) + 'px;height: ' + this.periodSelectorSize.height + 'px;top:' + this.periodSelectorSize.y + 'px;left:' + (this.periodSelectorSize.x + thumbSize / 2) + 'px; position: absolute'\n    });\n    element.appendChild(this.periodSelectorDiv);\n  };\n  /**\r\n   * renderSelector elements\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  PeriodSelector.prototype.renderSelector = function () {\n    var _this = this;\n\n    this.setControlValues(this.rootControl);\n    var enableCustom = true;\n    var controlId = this.control.element.id;\n    var selectorElement = createElement('div', {\n      id: controlId + '_selector'\n    });\n    var buttons = this.control.periods;\n    var selector = this.updateCustomElement();\n    var buttonStyles = 'text-transform: none; text-overflow: unset';\n    var isStringTemplate = 'isStringTemplate';\n    var dateRangeId = controlId + 'customRange';\n    this.periodSelectorDiv.appendChild(selectorElement);\n\n    for (var i = 0; i < buttons.length; i++) {\n      selector.push({\n        align: 'Left',\n        text: buttons[i].text\n      });\n    }\n\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      enableCustom = this.rootControl.enableCustomRange;\n    }\n\n    if (enableCustom) {\n      this.calendarId = controlId + '_calendar';\n      selector.push({\n        template: '<button id=' + this.calendarId + '></button>',\n        align: 'Right'\n      });\n    }\n\n    var selctorArgs = {\n      selector: selector,\n      name: 'RangeSelector',\n      cancel: false,\n      enableCustomFormat: true,\n      content: 'Date Range'\n    };\n\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      selector.push({\n        template: createElement('button', {\n          id: controlId + '_reset',\n          innerHTML: 'Reset',\n          styles: buttonStyles,\n          className: 'e-dropdown-btn e-btn'\n        }),\n        align: 'Right'\n      });\n\n      if (this.rootControl.exportType.indexOf('Print') > -1) {\n        selector.push({\n          template: createElement('button', {\n            id: controlId + '_print',\n            innerHTML: 'Print',\n            styles: buttonStyles,\n            className: 'e-dropdown-btn e-btn'\n          }),\n          align: 'Right'\n        });\n      }\n\n      if (this.rootControl.exportType.length) {\n        selector.push({\n          template: createElement('button', {\n            id: controlId + '_export',\n            innerHTML: 'Export',\n            styles: buttonStyles,\n            className: 'e-dropdown-btn e-btn'\n          }),\n          align: 'Right'\n        });\n      }\n    }\n\n    this.rootControl.trigger('selectorRender', selctorArgs);\n    this.toolbar = new Toolbar({\n      items: selctorArgs.selector,\n      height: this.periodSelectorSize.height,\n      clicked: function (args) {\n        _this.buttonClick(args, _this.control);\n      },\n      created: function () {\n        _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n\n        if (isNullOrUndefined(_this.selectedIndex)) {\n          buttons.map(function (period, index) {\n            if (period.selected) {\n              _this.control.startValue = _this.changedRange(period.intervalType, _this.control.endValue, period.interval).getTime();\n              _this.selectedIndex = _this.nodes.childNodes.length - buttons.length + index;\n            }\n          });\n        }\n\n        _this.setSelectedStyle(_this.selectedIndex);\n      }\n    });\n    this.toolbar[isStringTemplate] = true;\n    this.toolbar.appendTo(selectorElement);\n    this.triggerChange = true;\n\n    if (enableCustom) {\n      this.datePicker = new DateRangePicker({\n        min: new Date(this.control.seriesXMin),\n        max: new Date(this.control.seriesXMax),\n        // eslint-disable-next-line no-useless-escape\n        format: 'dd\\'\\/\\'MM\\'\\/\\'yyyy',\n        placeholder: 'Select a range',\n        showClearButton: false,\n        startDate: new Date(this.control.startValue),\n        endDate: new Date(this.control.endValue),\n        created: function () {\n          if (selctorArgs.enableCustomFormat) {\n            var datePicker = document.getElementsByClassName('e-date-range-wrapper');\n            var datePickerElement = void 0;\n\n            for (var i = 0; i < datePicker.length; i++) {\n              if (datePicker[i].children[0].id.indexOf(controlId) !== -1) {\n                datePickerElement = datePicker[i];\n              }\n            }\n\n            datePickerElement.style.display = 'none';\n            datePickerElement.insertAdjacentElement('afterend', createElement('div', {\n              id: dateRangeId,\n              innerHTML: selctorArgs.content,\n              className: 'e-btn e-dropdown-btn',\n              styles: 'font-family: \"Segoe UI\"; font-size: 14px; font-weight: 500; text-transform: none '\n            }));\n            getElement(dateRangeId).insertAdjacentElement('afterbegin', createElement('span', {\n              id: controlId + 'dateIcon',\n              className: 'e-input-group-icon e-range-icon e-btn-icon e-icons',\n              styles: 'font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px' // fix for date range icon alignment issue.\n\n            }));\n\n            document.getElementById(dateRangeId).onclick = function () {\n              _this.datePicker.show(getElement(dateRangeId));\n            };\n          }\n        },\n        change: function (args) {\n          if (_this.triggerChange) {\n            if (_this.control.rangeSlider && args.event) {\n              _this.control.rangeSlider.performAnimation(args.startDate.getTime(), args.endDate.getTime(), _this.control.rangeNavigatorControl);\n            } else if (args.event) {\n              _this.rootControl.rangeChanged(args.startDate.getTime(), args.endDate.getTime());\n            }\n\n            _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\n\n            if (!_this.rootControl.resizeTo && _this.control.rangeSlider && _this.control.rangeSlider.isDrag) {\n              /**\r\n               * Issue: While disabling range navigator console error throws\r\n               * Fix:Check with rangeSlider present or not. Then checked with isDrag.\r\n               */\n              for (var i = 0, length_1 = _this.nodes.childNodes.length; i < length_1; i++) {\n                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n\n                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n              }\n            }\n          }\n        }\n      });\n      this.datePicker.appendTo('#' + this.calendarId);\n    }\n  };\n\n  PeriodSelector.prototype.updateCustomElement = function () {\n    var selector = [];\n    var controlId = this.rootControl.element.id;\n    var buttonStyles = 'text-transform: none; text-overflow: unset';\n\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      if (this.rootControl.seriesType.length) {\n        selector.push({\n          template: createElement('button', {\n            id: controlId + '_seriesType',\n            innerHTML: 'Series',\n            styles: buttonStyles\n          }),\n          align: 'Left'\n        });\n      }\n\n      if (this.rootControl.indicatorType.length) {\n        selector.push({\n          template: createElement('button', {\n            id: controlId + '_indicatorType',\n            innerHTML: 'Indicators',\n            styles: buttonStyles\n          }),\n          align: 'Left'\n        });\n      }\n\n      if (this.rootControl.trendlineType.length) {\n        selector.push({\n          template: createElement('button', {\n            id: controlId + '_trendType',\n            innerHTML: 'Trendline',\n            styles: buttonStyles\n          }),\n          align: 'Left'\n        });\n      }\n    }\n\n    return selector;\n  };\n  /**\r\n   * To set and deselect the acrive style\r\n   *\r\n   * @param buttons\r\n   * @param selectedIndex\r\n   * @returns {void}\r\n   */\n\n\n  PeriodSelector.prototype.setSelectedStyle = function (selectedIndex) {\n    if (this.control.disableRangeSelector || this.rootControl.getModuleName() === 'stockChart') {\n      for (var i = 0, length_2 = this.nodes.childNodes.length; i < length_2; i++) {\n        this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n        this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\n      }\n\n      this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-flat');\n      this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-active');\n    }\n  };\n  /**\r\n   * Button click handling\r\n   *\r\n   * @param args\r\n   * @param control\r\n   * @param args\r\n   * @param control\r\n   */\n\n\n  PeriodSelector.prototype.buttonClick = function (args, control) {\n    var _this = this;\n\n    var clickedEle = args.item;\n    var slider = this.control.rangeSlider;\n    var buttons = this.control.periods;\n    var button = buttons.filter(function (btn) {\n      return btn.text === clickedEle.text;\n    });\n    var updatedStart;\n    var updatedEnd;\n    buttons.map(function (period, index) {\n      if (period.text === args.item.text) {\n        _this.selectedIndex = _this.nodes.childNodes.length - buttons.length + index;\n      }\n    });\n\n    if (args.item.text !== '') {\n      this.setSelectedStyle(this.selectedIndex);\n    }\n\n    if (clickedEle.text.toLowerCase() === 'all') {\n      updatedStart = control.seriesXMin;\n      updatedEnd = control.seriesXMax;\n\n      if (slider) {\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    } else if (clickedEle.text.toLowerCase() === 'ytd') {\n      if (slider) {\n        updatedStart = new Date(new Date(slider.currentEnd).getFullYear().toString()).getTime();\n        updatedEnd = slider.currentEnd;\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        updatedStart = new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime();\n        updatedEnd = this.rootControl.currentEnd;\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    } else if (clickedEle.text.toLowerCase() !== '') {\n      if (slider) {\n        updatedStart = this.changedRange(button[0].intervalType, slider.currentEnd, button[0].interval).getTime();\n        updatedEnd = slider.currentEnd;\n        slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\n      } else {\n        updatedStart = this.changedRange(button[0].intervalType, this.rootControl.currentEnd, button[0].interval).getTime();\n        updatedEnd = this.rootControl.currentEnd;\n        this.rootControl.rangeChanged(updatedStart, updatedEnd);\n      }\n    }\n\n    if (this.rootControl.getModuleName() === 'stockChart') {\n      this.rootControl.zoomChange = false;\n    }\n\n    if (getElement(this.calendarId + '_popup') && !Browser.isDevice) {\n      var element = getElement(this.calendarId + '_popup');\n      element.querySelectorAll('.e-range-header')[0].style.display = 'none';\n    }\n  };\n  /**\r\n   *\r\n   * @param type updatedRange for selector\r\n   * @param end\r\n   * @param interval\r\n   */\n\n\n  PeriodSelector.prototype.changedRange = function (type, end, interval) {\n    var result = new Date(end);\n\n    switch (type) {\n      case 'Quarter':\n        result.setMonth(result.getMonth() - 3 * interval);\n        break;\n\n      case 'Months':\n        result.setMonth(result.getMonth() - interval);\n        break;\n\n      case 'Weeks':\n        result.setDate(result.getDate() - interval * 7);\n        break;\n\n      case 'Days':\n        result.setDate(result.getDate() - interval);\n        break;\n\n      case 'Hours':\n        result.setHours(result.getHours() - interval);\n        break;\n\n      case 'Minutes':\n        result.setMinutes(result.getMinutes() - interval);\n        break;\n\n      case 'Seconds':\n        result.setSeconds(result.getSeconds() - interval);\n        break;\n\n      default:\n        result.setFullYear(result.getFullYear() - interval);\n        break;\n    }\n\n    return result;\n  };\n  /**\r\n   * Get module name\r\n   *\r\n   * @returns {string}\r\n   */\n\n\n  PeriodSelector.prototype.getModuleName = function () {\n    return 'PeriodSelector';\n  };\n  /**\r\n   * To destroy the period selector.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  PeriodSelector.prototype.destroy = function () {\n    /**\r\n     * destroy method\r\n     */\n  };\n\n  return PeriodSelector;\n}();\n\nexport { PeriodSelector };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/common/period-selector/period-selector.js"],"names":["createElement","isNullOrUndefined","Browser","remove","Toolbar","DateRangePicker","getElement","Rect","PeriodSelector","control","rootControl","prototype","setControlValues","getModuleName","periods","periodSelectorSettings","seriesXMax","chartSeries","xMax","seriesXMin","xMin","rangeSlider","rangeNavigatorControl","endValue","startValue","rangeNavigator","element","disableRangeSelector","appendSelector","options","x","renderSelectorElement","renderSelector","periodSelectorSize","titleSize","height","width","thumbSize","themeStyle","thumbWidth","id","periodSelectorDiv","styles","y","appendChild","_this","enableCustom","controlId","selectorElement","buttons","selector","updateCustomElement","buttonStyles","isStringTemplate","dateRangeId","i","length","push","align","text","enableCustomRange","calendarId","template","selctorArgs","name","cancel","enableCustomFormat","content","innerHTML","className","exportType","indexOf","trigger","toolbar","items","clicked","args","buttonClick","created","nodes","querySelectorAll","selectedIndex","map","period","index","selected","changedRange","intervalType","interval","getTime","childNodes","setSelectedStyle","appendTo","triggerChange","datePicker","min","Date","max","format","placeholder","showClearButton","startDate","endDate","document","getElementsByClassName","datePickerElement","children","style","display","insertAdjacentElement","getElementById","onclick","show","change","event","performAnimation","rangeChanged","resizeTo","isDrag","length_1","classList","seriesType","indicatorType","trendlineType","length_2","add","clickedEle","item","slider","button","filter","btn","updatedStart","updatedEnd","toLowerCase","currentEnd","getFullYear","toString","zoomChange","isDevice","type","end","result","setMonth","getMonth","setDate","getDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setFullYear","destroy"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-inferrable-types */\r\nimport { createElement, isNullOrUndefined, Browser, remove } from '@syncfusion/ej2-base';\r\nimport { Toolbar } from '@syncfusion/ej2-navigations';\r\nimport { DateRangePicker } from '@syncfusion/ej2-calendars';\r\nimport { getElement } from '../../common/utils/helper';\r\nimport { Rect } from '@syncfusion/ej2-svg-base';\r\n/**\r\n * Period selector class\r\n */\r\nvar PeriodSelector = /** @class */ (function () {\r\n    //constructor for period selector\r\n    function PeriodSelector(control) {\r\n        this.control = {};\r\n        this.rootControl = control;\r\n    }\r\n    /**\r\n     * To set the control values\r\n     *\r\n     * @param control\r\n     * @returns {void}\r\n     */\r\n    PeriodSelector.prototype.setControlValues = function (control) {\r\n        if (control.getModuleName() === 'rangeNavigator') {\r\n            this.control.periods = this.rootControl.periodSelectorSettings.periods;\r\n            this.control.seriesXMax = control.chartSeries.xMax;\r\n            this.control.seriesXMin = control.chartSeries.xMin;\r\n            this.control.rangeSlider = control.rangeSlider;\r\n            this.control.rangeNavigatorControl = control;\r\n            this.control.endValue = control.endValue;\r\n            this.control.startValue = control.startValue;\r\n        }\r\n        else {\r\n            this.control.periods = this.rootControl.periods;\r\n            this.control.endValue = this.control.seriesXMax = control.seriesXMax;\r\n            this.control.startValue = this.control.seriesXMin = control.seriesXMin;\r\n            this.control.rangeNavigatorControl = this.rootControl.rangeNavigator;\r\n            if (this.control.rangeNavigatorControl) {\r\n                this.control.rangeSlider = this.rootControl.rangeNavigator.rangeSlider;\r\n            }\r\n        }\r\n        this.control.element = control.element;\r\n        this.control.disableRangeSelector = control.disableRangeSelector;\r\n    };\r\n    /**\r\n     * To initialize the period selector properties\r\n     *\r\n     * @param options\r\n     * @param x\r\n     * @param options\r\n     * @param x\r\n     */\r\n    PeriodSelector.prototype.appendSelector = function (options, x) {\r\n        if (x === void 0) { x = 0; }\r\n        this.renderSelectorElement(null, options, x);\r\n        this.renderSelector();\r\n    };\r\n    /**\r\n     * renderSelector div\r\n     *\r\n     * @param control\r\n     * @param options\r\n     * @param x\r\n     * @param options\r\n     * @param x\r\n     */\r\n    PeriodSelector.prototype.renderSelectorElement = function (control, options, x) {\r\n        //render border\r\n        this.periodSelectorSize = control ? this.periodSelectorSize : new Rect(x, this.rootControl.titleSize.height, options.width, options.height);\r\n        var thumbSize;\r\n        var element;\r\n        if (control) {\r\n            thumbSize = control.themeStyle.thumbWidth;\r\n            element = control.element;\r\n        }\r\n        else {\r\n            thumbSize = options.thumbSize;\r\n            element = options.element;\r\n        }\r\n        if (getElement(element.id + '_Secondary_Element')) {\r\n            remove(getElement(element.id + '_Secondary_Element'));\r\n        }\r\n        this.periodSelectorDiv = createElement('div', {\r\n            id: element.id + '_Secondary_Element',\r\n            styles: 'width: ' + (this.periodSelectorSize.width - thumbSize) + 'px;height: ' +\r\n                this.periodSelectorSize.height + 'px;top:' +\r\n                this.periodSelectorSize.y + 'px;left:' +\r\n                (this.periodSelectorSize.x + thumbSize / 2) + 'px; position: absolute'\r\n        });\r\n        element.appendChild(this.periodSelectorDiv);\r\n    };\r\n    /**\r\n     * renderSelector elements\r\n     *\r\n     * @returns {void}\r\n     */\r\n    PeriodSelector.prototype.renderSelector = function () {\r\n        var _this = this;\r\n        this.setControlValues(this.rootControl);\r\n        var enableCustom = true;\r\n        var controlId = this.control.element.id;\r\n        var selectorElement = createElement('div', { id: controlId + '_selector' });\r\n        var buttons = this.control.periods;\r\n        var selector = this.updateCustomElement();\r\n        var buttonStyles = 'text-transform: none; text-overflow: unset';\r\n        var isStringTemplate = 'isStringTemplate';\r\n        var dateRangeId = controlId + 'customRange';\r\n        this.periodSelectorDiv.appendChild(selectorElement);\r\n        for (var i = 0; i < buttons.length; i++) {\r\n            selector.push({ align: 'Left', text: buttons[i].text });\r\n        }\r\n        if (this.rootControl.getModuleName() === 'stockChart') {\r\n            enableCustom = this.rootControl.enableCustomRange;\r\n        }\r\n        if (enableCustom) {\r\n            this.calendarId = controlId + '_calendar';\r\n            selector.push({ template: '<button id=' + this.calendarId + '></button>', align: 'Right' });\r\n        }\r\n        var selctorArgs = {\r\n            selector: selector, name: 'RangeSelector', cancel: false, enableCustomFormat: true, content: 'Date Range'\r\n        };\r\n        if (this.rootControl.getModuleName() === 'stockChart') {\r\n            selector.push({ template: createElement('button', { id: controlId + '_reset', innerHTML: 'Reset',\r\n                    styles: buttonStyles, className: 'e-dropdown-btn e-btn' }),\r\n                align: 'Right' });\r\n            if (this.rootControl.exportType.indexOf('Print') > -1) {\r\n                selector.push({ template: createElement('button', { id: controlId + '_print', innerHTML: 'Print', styles: buttonStyles,\r\n                        className: 'e-dropdown-btn e-btn' }),\r\n                    align: 'Right' });\r\n            }\r\n            if (this.rootControl.exportType.length) {\r\n                selector.push({ template: createElement('button', { id: controlId + '_export', innerHTML: 'Export', styles: buttonStyles,\r\n                        className: 'e-dropdown-btn e-btn' }),\r\n                    align: 'Right' });\r\n            }\r\n        }\r\n        this.rootControl.trigger('selectorRender', selctorArgs);\r\n        this.toolbar = new Toolbar({\r\n            items: selctorArgs.selector, height: this.periodSelectorSize.height,\r\n            clicked: function (args) {\r\n                _this.buttonClick(args, _this.control);\r\n            }, created: function () {\r\n                _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\r\n                if (isNullOrUndefined(_this.selectedIndex)) {\r\n                    buttons.map(function (period, index) {\r\n                        if (period.selected) {\r\n                            _this.control.startValue = _this.changedRange(period.intervalType, _this.control.endValue, period.interval).getTime();\r\n                            _this.selectedIndex = (_this.nodes.childNodes.length - buttons.length) + index;\r\n                        }\r\n                    });\r\n                }\r\n                _this.setSelectedStyle(_this.selectedIndex);\r\n            }\r\n        });\r\n        this.toolbar[isStringTemplate] = true;\r\n        this.toolbar.appendTo(selectorElement);\r\n        this.triggerChange = true;\r\n        if (enableCustom) {\r\n            this.datePicker = new DateRangePicker({\r\n                min: new Date(this.control.seriesXMin),\r\n                max: new Date(this.control.seriesXMax),\r\n                // eslint-disable-next-line no-useless-escape\r\n                format: 'dd\\'\\/\\'MM\\'\\/\\'yyyy', placeholder: 'Select a range',\r\n                showClearButton: false, startDate: new Date(this.control.startValue),\r\n                endDate: new Date(this.control.endValue),\r\n                created: function () {\r\n                    if (selctorArgs.enableCustomFormat) {\r\n                        var datePicker = document.getElementsByClassName('e-date-range-wrapper');\r\n                        var datePickerElement = void 0;\r\n                        for (var i = 0; i < datePicker.length; i++) {\r\n                            if (datePicker[i].children[0].id.indexOf(controlId) !== -1) {\r\n                                datePickerElement = datePicker[i];\r\n                            }\r\n                        }\r\n                        datePickerElement.style.display = 'none';\r\n                        datePickerElement.insertAdjacentElement('afterend', createElement('div', {\r\n                            id: dateRangeId,\r\n                            innerHTML: selctorArgs.content, className: 'e-btn e-dropdown-btn',\r\n                            styles: 'font-family: \"Segoe UI\"; font-size: 14px; font-weight: 500; text-transform: none '\r\n                        }));\r\n                        getElement(dateRangeId).insertAdjacentElement('afterbegin', (createElement('span', {\r\n                            id: controlId + 'dateIcon', className: 'e-input-group-icon e-range-icon e-btn-icon e-icons',\r\n                            styles: 'font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px'\r\n                            // fix for date range icon alignment issue.\r\n                        })));\r\n                        document.getElementById(dateRangeId).onclick = function () {\r\n                            _this.datePicker.show(getElement(dateRangeId));\r\n                        };\r\n                    }\r\n                },\r\n                change: function (args) {\r\n                    if (_this.triggerChange) {\r\n                        if (_this.control.rangeSlider && args.event) {\r\n                            _this.control.rangeSlider.performAnimation(args.startDate.getTime(), args.endDate.getTime(), _this.control.rangeNavigatorControl);\r\n                        }\r\n                        else if (args.event) {\r\n                            _this.rootControl.rangeChanged(args.startDate.getTime(), args.endDate.getTime());\r\n                        }\r\n                        _this.nodes = _this.toolbar.element.querySelectorAll('.e-toolbar-left')[0];\r\n                        if (!_this.rootControl.resizeTo && _this.control.rangeSlider && _this.control.rangeSlider.isDrag) {\r\n                            /**\r\n                             * Issue: While disabling range navigator console error throws\r\n                             * Fix:Check with rangeSlider present or not. Then checked with isDrag.\r\n                             */\r\n                            for (var i = 0, length_1 = _this.nodes.childNodes.length; i < length_1; i++) {\r\n                                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\r\n                                _this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.datePicker.appendTo('#' + this.calendarId);\r\n        }\r\n    };\r\n    PeriodSelector.prototype.updateCustomElement = function () {\r\n        var selector = [];\r\n        var controlId = this.rootControl.element.id;\r\n        var buttonStyles = 'text-transform: none; text-overflow: unset';\r\n        if (this.rootControl.getModuleName() === 'stockChart') {\r\n            if (this.rootControl.seriesType.length) {\r\n                selector.push({ template: createElement('button', { id: controlId + '_seriesType', innerHTML: 'Series',\r\n                        styles: buttonStyles }),\r\n                    align: 'Left' });\r\n            }\r\n            if (this.rootControl.indicatorType.length) {\r\n                selector.push({ template: createElement('button', { id: controlId + '_indicatorType', innerHTML: 'Indicators',\r\n                        styles: buttonStyles }),\r\n                    align: 'Left' });\r\n            }\r\n            if (this.rootControl.trendlineType.length) {\r\n                selector.push({ template: createElement('button', { id: controlId + '_trendType', innerHTML: 'Trendline',\r\n                        styles: buttonStyles }),\r\n                    align: 'Left' });\r\n            }\r\n        }\r\n        return selector;\r\n    };\r\n    /**\r\n     * To set and deselect the acrive style\r\n     *\r\n     * @param buttons\r\n     * @param selectedIndex\r\n     * @returns {void}\r\n     */\r\n    PeriodSelector.prototype.setSelectedStyle = function (selectedIndex) {\r\n        if (this.control.disableRangeSelector || this.rootControl.getModuleName() === 'stockChart') {\r\n            for (var i = 0, length_2 = this.nodes.childNodes.length; i < length_2; i++) {\r\n                this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\r\n                this.nodes.childNodes[i].childNodes[0].classList.remove('e-active');\r\n            }\r\n            this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-flat');\r\n            this.nodes.childNodes[selectedIndex].childNodes[0].classList.add('e-active');\r\n        }\r\n    };\r\n    /**\r\n     * Button click handling\r\n     *\r\n     * @param args\r\n     * @param control\r\n     * @param args\r\n     * @param control\r\n     */\r\n    PeriodSelector.prototype.buttonClick = function (args, control) {\r\n        var _this = this;\r\n        var clickedEle = args.item;\r\n        var slider = this.control.rangeSlider;\r\n        var buttons = this.control.periods;\r\n        var button = buttons.filter(function (btn) { return (btn.text === clickedEle.text); });\r\n        var updatedStart;\r\n        var updatedEnd;\r\n        buttons.map(function (period, index) {\r\n            if (period.text === args.item.text) {\r\n                _this.selectedIndex = (_this.nodes.childNodes.length - buttons.length) + index;\r\n            }\r\n        });\r\n        if (args.item.text !== '') {\r\n            this.setSelectedStyle(this.selectedIndex);\r\n        }\r\n        if (clickedEle.text.toLowerCase() === 'all') {\r\n            updatedStart = control.seriesXMin;\r\n            updatedEnd = control.seriesXMax;\r\n            if (slider) {\r\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\r\n            }\r\n            else {\r\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\r\n            }\r\n        }\r\n        else if (clickedEle.text.toLowerCase() === 'ytd') {\r\n            if (slider) {\r\n                updatedStart = new Date(new Date(slider.currentEnd).getFullYear().toString()).getTime();\r\n                updatedEnd = slider.currentEnd;\r\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\r\n            }\r\n            else {\r\n                updatedStart = new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime();\r\n                updatedEnd = this.rootControl.currentEnd;\r\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\r\n            }\r\n        }\r\n        else if (clickedEle.text.toLowerCase() !== '') {\r\n            if (slider) {\r\n                updatedStart = this.changedRange(button[0].intervalType, slider.currentEnd, button[0].interval).getTime();\r\n                updatedEnd = slider.currentEnd;\r\n                slider.performAnimation(updatedStart, updatedEnd, this.control.rangeNavigatorControl);\r\n            }\r\n            else {\r\n                updatedStart = this.changedRange(button[0].intervalType, this.rootControl.currentEnd, button[0].interval).getTime();\r\n                updatedEnd = this.rootControl.currentEnd;\r\n                this.rootControl.rangeChanged(updatedStart, updatedEnd);\r\n            }\r\n        }\r\n        if (this.rootControl.getModuleName() === 'stockChart') {\r\n            this.rootControl.zoomChange = false;\r\n        }\r\n        if (getElement(this.calendarId + '_popup') && !Browser.isDevice) {\r\n            var element = getElement(this.calendarId + '_popup');\r\n            element.querySelectorAll('.e-range-header')[0].style.display = 'none';\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param type updatedRange for selector\r\n     * @param end\r\n     * @param interval\r\n     */\r\n    PeriodSelector.prototype.changedRange = function (type, end, interval) {\r\n        var result = new Date(end);\r\n        switch (type) {\r\n            case 'Quarter':\r\n                result.setMonth(result.getMonth() - (3 * interval));\r\n                break;\r\n            case 'Months':\r\n                result.setMonth(result.getMonth() - interval);\r\n                break;\r\n            case 'Weeks':\r\n                result.setDate(result.getDate() - (interval * 7));\r\n                break;\r\n            case 'Days':\r\n                result.setDate(result.getDate() - interval);\r\n                break;\r\n            case 'Hours':\r\n                result.setHours(result.getHours() - interval);\r\n                break;\r\n            case 'Minutes':\r\n                result.setMinutes(result.getMinutes() - interval);\r\n                break;\r\n            case 'Seconds':\r\n                result.setSeconds(result.getSeconds() - interval);\r\n                break;\r\n            default:\r\n                result.setFullYear(result.getFullYear() - interval);\r\n                break;\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Get module name\r\n     *\r\n     * @returns {string}\r\n     */\r\n    PeriodSelector.prototype.getModuleName = function () {\r\n        return 'PeriodSelector';\r\n    };\r\n    /**\r\n     * To destroy the period selector.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    PeriodSelector.prototype.destroy = function () {\r\n        /**\r\n         * destroy method\r\n         */\r\n    };\r\n    return PeriodSelector;\r\n}());\r\nexport { PeriodSelector };\r\n"]},"metadata":{},"sourceType":"module"}