{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable jsdoc/require-returns */\n\n/* eslint-disable @typescript-eslint/no-inferrable-types */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable valid-jsdoc */\n\n/**\r\n * AccumulationChart Tooltip file\r\n */\n\n\nimport { Browser, remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { AccPointData, withInBounds, indexFinder } from '../../common/utils/helper';\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\nimport { tooltipRender } from '../../common/model/constants';\n/**\r\n * `AccumulationTooltip` module is used to render tooltip for accumulation chart.\r\n */\n\nvar AccumulationTooltip =\n/** @class */\nfunction (_super) {\n  __extends(AccumulationTooltip, _super);\n\n  function AccumulationTooltip(accumulation) {\n    var _this = _super.call(this, accumulation) || this;\n\n    _this.accumulation = accumulation;\n\n    _this.addEventListener();\n\n    _this.template = _this.accumulation.tooltip.template;\n    return _this;\n  }\n  /**\r\n   * @hidden\r\n   */\n\n\n  AccumulationTooltip.prototype.addEventListener = function () {\n    if (this.accumulation.isDestroyed) {\n      return;\n    }\n\n    this.accumulation.on(Browser.isPointer ? 'pointerleave' : 'mouseleave', this.mouseLeaveHandler, this);\n    this.accumulation.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.accumulation.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n  };\n\n  AccumulationTooltip.prototype.mouseLeaveHandler = function (e) {\n    this.removeTooltip(this.accumulation.tooltip.fadeOutDuration);\n  };\n\n  AccumulationTooltip.prototype.mouseUpHandler = function (e) {\n    var control = this.accumulation;\n\n    if (control.tooltip.enable && control.isTouch && withInBounds(control.mouseX, control.mouseY, control.initialClipRect)) {\n      this.tooltip(e);\n      this.removeTooltip(2000);\n    }\n  };\n\n  AccumulationTooltip.prototype.mouseMoveHandler = function (e) {\n    var control = this.accumulation; // Tooltip for chart series.\n\n    if (control.tooltip.enable && withInBounds(control.mouseX, control.mouseY, control.initialClipRect)) {\n      this.tooltip(e);\n    }\n  };\n  /**\r\n   * Renders the tooltip.\r\n   * @param  {PointerEvent} event - Mouse move event.\r\n   * @return {void}\r\n   */\n\n\n  AccumulationTooltip.prototype.tooltip = function (event) {\n    var svgElement = this.getElement(this.element.id + '_tooltip_svg');\n    var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0;\n    var tooltipDiv = this.getTooltipElement(isTooltip);\n    this.renderSeriesTooltip(event, this.accumulation, !isTooltip, tooltipDiv);\n  };\n\n  AccumulationTooltip.prototype.renderSeriesTooltip = function (e, chart, isFirst, tooltipDiv) {\n    var data = this.getPieData(e, chart, chart.mouseX, chart.mouseY);\n    var rect = chart.initialClipRect;\n    this.currentPoints = [];\n\n    if (data.point && (!this.previousPoints[0] || this.previousPoints[0].point !== data.point)) {\n      if (this.previousPoints[0] && data.point.index === this.previousPoints[0].point.index && data.series.index === this.previousPoints[0].series.index) {\n        return null;\n      }\n\n      if (this.pushData(data, isFirst, tooltipDiv, false)) {\n        this.triggerTooltipRender(data, isFirst, this.getTooltipText(data, chart.tooltip), this.findHeader(data));\n      }\n    } else {\n      if (!data.point && this.isRemove) {\n        this.removeTooltip(this.accumulation.tooltip.fadeOutDuration);\n        this.isRemove = false;\n      }\n    }\n  };\n\n  AccumulationTooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText, firstText) {\n    var _this = this;\n\n    if (firstText === void 0) {\n      firstText = true;\n    }\n\n    var template;\n    var argsData = {\n      cancel: false,\n      name: tooltipRender,\n      text: textCollection,\n      point: point.point,\n      textStyle: this.textStyle,\n      series: this.accumulation.isBlazor ? {} : point.series,\n      headerText: headerText,\n      data: {\n        pointX: point.point.x,\n        pointY: point.point.y,\n        seriesIndex: point.series.index,\n        pointIndex: point.point.index,\n        pointText: point.point.text,\n        seriesName: point.series.name\n      }\n    };\n\n    var tooltipSuccess = function (argsData) {\n      if (!argsData.cancel) {\n        _this.formattedText = _this.formattedText.concat(argsData.text);\n        _this.text = _this.formattedText;\n        _this.headerText = argsData.headerText;\n\n        _this.createTooltip(_this.chart, isFirst, point.point.symbolLocation, point.series.clipRect, point.point, ['Circle'], 0, _this.chart.initialClipRect, null, point.point, _this.template ? argsData.template : '');\n      } else {\n        _this.removeHighlight();\n\n        remove(_this.getElement(_this.element.id + '_tooltip'));\n      }\n\n      _this.isRemove = true;\n    };\n\n    tooltipSuccess.bind(this, point);\n    this.chart.trigger(tooltipRender, argsData, tooltipSuccess);\n  };\n\n  AccumulationTooltip.prototype.getPieData = function (e, chart, x, y) {\n    var target = e.target;\n    var id = indexFinder(target.id, true);\n\n    if (!isNaN(id.series)) {\n      var seriesIndex = id.series;\n      var pointIndex = id.point;\n\n      if (!isNullOrUndefined(seriesIndex) && !isNaN(seriesIndex) && !isNullOrUndefined(pointIndex) && !isNaN(pointIndex)) {\n        var series = this.getSeriesFromIndex(seriesIndex, chart.visibleSeries);\n\n        if (series.enableTooltip) {\n          return new AccPointData(series.points[pointIndex], series);\n        }\n      }\n    }\n\n    return new AccPointData(null, null);\n  };\n  /**\r\n   * To get series from index\r\n   */\n\n\n  AccumulationTooltip.prototype.getSeriesFromIndex = function (index, visibleSeries) {\n    return visibleSeries[0];\n  };\n\n  AccumulationTooltip.prototype.getTooltipText = function (data, tooltip) {\n    var series = data.series;\n    var format = this.accumulation.useGroupingSeparator ? '${point.x} : <b>${point.separatorY}</b>' : '${point.x} : <b>${point.y}</b>';\n    format = tooltip.format ? tooltip.format : format;\n    return this.parseTemplate(data.point, series, format);\n  };\n\n  AccumulationTooltip.prototype.findHeader = function (data) {\n    if (this.header === '') {\n      return '';\n    }\n\n    this.header = this.parseTemplate(data.point, data.series, this.header);\n\n    if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n      return this.header;\n    }\n\n    return '';\n  };\n\n  AccumulationTooltip.prototype.parseTemplate = function (point, series, format) {\n    var value;\n    var textValue;\n\n    for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n      var dataValue = _a[_i];\n      value = new RegExp('${point' + '.' + dataValue + '}', 'gm');\n      format = format.replace(value.source, point[dataValue]);\n    }\n\n    for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n      var dataValue = _c[_b];\n      value = new RegExp('${series' + '.' + dataValue + '}', 'gm');\n      textValue = series[dataValue];\n      format = format.replace(value.source, textValue);\n    }\n\n    return format;\n  };\n  /**\r\n   * Get module name\r\n   */\n\n\n  AccumulationTooltip.prototype.getModuleName = function () {\n    return 'AccumulationTooltip';\n  };\n  /**\r\n   * To destroy the Tooltip.\r\n   * @return {void}\r\n   * @private\r\n   */\n\n\n  AccumulationTooltip.prototype.destroy = function (chart) {\n    /**\r\n     * Destroy method calling here\r\n     */\n  };\n\n  return AccumulationTooltip;\n}(BaseTooltip);\n\nexport { AccumulationTooltip };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/accumulation-chart/user-interaction/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Browser","remove","isNullOrUndefined","AccPointData","withInBounds","indexFinder","BaseTooltip","tooltipRender","AccumulationTooltip","_super","accumulation","_this","call","addEventListener","template","tooltip","isDestroyed","on","isPointer","mouseLeaveHandler","touchMoveEvent","mouseMoveHandler","touchEndEvent","mouseUpHandler","e","removeTooltip","fadeOutDuration","control","enable","isTouch","mouseX","mouseY","initialClipRect","event","svgElement","getElement","element","id","isTooltip","parseInt","getAttribute","tooltipDiv","getTooltipElement","renderSeriesTooltip","chart","isFirst","data","getPieData","rect","currentPoints","point","previousPoints","index","series","pushData","triggerTooltipRender","getTooltipText","findHeader","isRemove","textCollection","headerText","firstText","argsData","cancel","name","text","textStyle","isBlazor","pointX","x","pointY","y","seriesIndex","pointIndex","pointText","seriesName","tooltipSuccess","formattedText","concat","createTooltip","symbolLocation","clipRect","removeHighlight","bind","trigger","target","isNaN","getSeriesFromIndex","visibleSeries","enableTooltip","points","format","useGroupingSeparator","parseTemplate","header","replace","trim","value","textValue","_i","_a","keys","length","dataValue","RegExp","source","_b","_c","getPrototypeOf","getModuleName","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* eslint-disable jsdoc/require-returns */\r\n/* eslint-disable @typescript-eslint/no-inferrable-types */\r\n/* eslint-disable jsdoc/require-param */\r\n/* eslint-disable valid-jsdoc */\r\n/**\r\n * AccumulationChart Tooltip file\r\n */\r\nimport { Browser, remove } from '@syncfusion/ej2-base';\r\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { AccPointData, withInBounds, indexFinder } from '../../common/utils/helper';\r\nimport { BaseTooltip } from '../../common/user-interaction/tooltip';\r\nimport { tooltipRender } from '../../common/model/constants';\r\n/**\r\n * `AccumulationTooltip` module is used to render tooltip for accumulation chart.\r\n */\r\nvar AccumulationTooltip = /** @class */ (function (_super) {\r\n    __extends(AccumulationTooltip, _super);\r\n    function AccumulationTooltip(accumulation) {\r\n        var _this = _super.call(this, accumulation) || this;\r\n        _this.accumulation = accumulation;\r\n        _this.addEventListener();\r\n        _this.template = _this.accumulation.tooltip.template;\r\n        return _this;\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    AccumulationTooltip.prototype.addEventListener = function () {\r\n        if (this.accumulation.isDestroyed) {\r\n            return;\r\n        }\r\n        this.accumulation.on(Browser.isPointer ? 'pointerleave' : 'mouseleave', this.mouseLeaveHandler, this);\r\n        this.accumulation.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\r\n        this.accumulation.on(Browser.touchEndEvent, this.mouseUpHandler, this);\r\n    };\r\n    AccumulationTooltip.prototype.mouseLeaveHandler = function (e) {\r\n        this.removeTooltip(this.accumulation.tooltip.fadeOutDuration);\r\n    };\r\n    AccumulationTooltip.prototype.mouseUpHandler = function (e) {\r\n        var control = this.accumulation;\r\n        if (control.tooltip.enable && control.isTouch && withInBounds(control.mouseX, control.mouseY, control.initialClipRect)) {\r\n            this.tooltip(e);\r\n            this.removeTooltip(2000);\r\n        }\r\n    };\r\n    AccumulationTooltip.prototype.mouseMoveHandler = function (e) {\r\n        var control = this.accumulation;\r\n        // Tooltip for chart series.\r\n        if (control.tooltip.enable && withInBounds(control.mouseX, control.mouseY, control.initialClipRect)) {\r\n            this.tooltip(e);\r\n        }\r\n    };\r\n    /**\r\n     * Renders the tooltip.\r\n     * @param  {PointerEvent} event - Mouse move event.\r\n     * @return {void}\r\n     */\r\n    AccumulationTooltip.prototype.tooltip = function (event) {\r\n        var svgElement = this.getElement(this.element.id + '_tooltip_svg');\r\n        var isTooltip = svgElement && parseInt(svgElement.getAttribute('opacity'), 10) > 0;\r\n        var tooltipDiv = this.getTooltipElement(isTooltip);\r\n        this.renderSeriesTooltip(event, this.accumulation, !isTooltip, tooltipDiv);\r\n    };\r\n    AccumulationTooltip.prototype.renderSeriesTooltip = function (e, chart, isFirst, tooltipDiv) {\r\n        var data = this.getPieData(e, chart, chart.mouseX, chart.mouseY);\r\n        var rect = chart.initialClipRect;\r\n        this.currentPoints = [];\r\n        if (data.point && (!this.previousPoints[0] || (this.previousPoints[0].point !== data.point))) {\r\n            if (this.previousPoints[0] && data.point.index === this.previousPoints[0].point.index\r\n                && data.series.index === this.previousPoints[0].series.index) {\r\n                return null;\r\n            }\r\n            if (this.pushData(data, isFirst, tooltipDiv, false)) {\r\n                this.triggerTooltipRender(data, isFirst, this.getTooltipText(data, chart.tooltip), this.findHeader(data));\r\n            }\r\n        }\r\n        else {\r\n            if (!data.point && this.isRemove) {\r\n                this.removeTooltip(this.accumulation.tooltip.fadeOutDuration);\r\n                this.isRemove = false;\r\n            }\r\n        }\r\n    };\r\n    AccumulationTooltip.prototype.triggerTooltipRender = function (point, isFirst, textCollection, headerText, firstText) {\r\n        var _this = this;\r\n        if (firstText === void 0) { firstText = true; }\r\n        var template;\r\n        var argsData = {\r\n            cancel: false, name: tooltipRender, text: textCollection, point: point.point, textStyle: this.textStyle,\r\n            series: this.accumulation.isBlazor ? {} : point.series, headerText: headerText,\r\n            data: { pointX: point.point.x, pointY: point.point.y, seriesIndex: point.series.index,\r\n                pointIndex: point.point.index, pointText: point.point.text, seriesName: point.series.name }\r\n        };\r\n        var tooltipSuccess = function (argsData) {\r\n            if (!argsData.cancel) {\r\n                _this.formattedText = _this.formattedText.concat(argsData.text);\r\n                _this.text = _this.formattedText;\r\n                _this.headerText = argsData.headerText;\r\n                _this.createTooltip(_this.chart, isFirst, point.point.symbolLocation, point.series.clipRect, point.point, ['Circle'], 0, _this.chart.initialClipRect, null, point.point, _this.template ? argsData.template : '');\r\n            }\r\n            else {\r\n                _this.removeHighlight();\r\n                remove(_this.getElement(_this.element.id + '_tooltip'));\r\n            }\r\n            _this.isRemove = true;\r\n        };\r\n        tooltipSuccess.bind(this, point);\r\n        this.chart.trigger(tooltipRender, argsData, tooltipSuccess);\r\n    };\r\n    AccumulationTooltip.prototype.getPieData = function (e, chart, x, y) {\r\n        var target = e.target;\r\n        var id = indexFinder(target.id, true);\r\n        if (!isNaN(id.series)) {\r\n            var seriesIndex = id.series;\r\n            var pointIndex = id.point;\r\n            if (!isNullOrUndefined(seriesIndex) && !isNaN(seriesIndex) && !isNullOrUndefined(pointIndex) && !isNaN(pointIndex)) {\r\n                var series = this.getSeriesFromIndex(seriesIndex, chart.visibleSeries);\r\n                if (series.enableTooltip) {\r\n                    return new AccPointData(series.points[pointIndex], series);\r\n                }\r\n            }\r\n        }\r\n        return new AccPointData(null, null);\r\n    };\r\n    /**\r\n     * To get series from index\r\n     */\r\n    AccumulationTooltip.prototype.getSeriesFromIndex = function (index, visibleSeries) {\r\n        return visibleSeries[0];\r\n    };\r\n    AccumulationTooltip.prototype.getTooltipText = function (data, tooltip) {\r\n        var series = data.series;\r\n        var format = this.accumulation.useGroupingSeparator ? '${point.x} : <b>${point.separatorY}</b>'\r\n            : '${point.x} : <b>${point.y}</b>';\r\n        format = tooltip.format ? tooltip.format : format;\r\n        return this.parseTemplate(data.point, series, format);\r\n    };\r\n    AccumulationTooltip.prototype.findHeader = function (data) {\r\n        if (this.header === '') {\r\n            return '';\r\n        }\r\n        this.header = this.parseTemplate(data.point, data.series, this.header);\r\n        if (this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\r\n            return this.header;\r\n        }\r\n        return '';\r\n    };\r\n    AccumulationTooltip.prototype.parseTemplate = function (point, series, format) {\r\n        var value;\r\n        var textValue;\r\n        for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\r\n            var dataValue = _a[_i];\r\n            value = new RegExp('${point' + '.' + dataValue + '}', 'gm');\r\n            format = format.replace(value.source, point[dataValue]);\r\n        }\r\n        for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\r\n            var dataValue = _c[_b];\r\n            value = new RegExp('${series' + '.' + dataValue + '}', 'gm');\r\n            textValue = series[dataValue];\r\n            format = format.replace(value.source, textValue);\r\n        }\r\n        return format;\r\n    };\r\n    /**\r\n     * Get module name\r\n     */\r\n    AccumulationTooltip.prototype.getModuleName = function () {\r\n        return 'AccumulationTooltip';\r\n    };\r\n    /**\r\n     * To destroy the Tooltip.\r\n     * @return {void}\r\n     * @private\r\n     */\r\n    AccumulationTooltip.prototype.destroy = function (chart) {\r\n        /**\r\n         * Destroy method calling here\r\n         */\r\n    };\r\n    return AccumulationTooltip;\r\n}(BaseTooltip));\r\nexport { AccumulationTooltip };\r\n"]},"metadata":{},"sourceType":"module"}