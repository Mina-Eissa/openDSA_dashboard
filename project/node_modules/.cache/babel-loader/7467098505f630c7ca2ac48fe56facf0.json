{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { PathOption } from '@syncfusion/ej2-svg-base';\nimport { degreeToLocation, getElement, linear, stringToNumber, indexFinder } from '../../common/utils/helper';\nimport { PieBase } from '../renderer/pie-base';\nimport { Animation, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\r\n * PieSeries module used to render `Pie` Series.\r\n */\n\nvar PieSeries =\n/** @class */\nfunction (_super) {\n  __extends(PieSeries, _super);\n\n  function PieSeries() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * To get path option, degree, symbolLocation from the point.\r\n   *\r\n   * @private\r\n   */\n\n\n  PieSeries.prototype.renderPoint = function (point, series, chart, option, seriesGroup, redraw) {\n    var sum = series.sumOfPoints;\n    point.startAngle = this.startAngle;\n    var yValue = point.visible ? point.y : 0;\n    var degree = sum ? Math.abs(yValue) / sum * this.totalAngle : null;\n    var start = Math.PI / 180 * (90 - (360 - this.startAngle) - 90);\n    this.radius = this.isRadiusMapped ? stringToNumber(point.sliceRadius, this.seriesRadius) : this.radius;\n    option.d = this.getPathOption(point, degree, this.startAngle % 360);\n    point.midAngle = (this.startAngle - degree / 2) % 360;\n    point.endAngle = this.startAngle % 360;\n    point.symbolLocation = degreeToLocation(point.midAngle, (this.radius + this.innerRadius) / 2, this.center);\n\n    if (!redraw) {\n      seriesGroup.appendChild(chart.renderer.drawPath(option));\n      point.degree = degree;\n      point.start = start;\n    } else {\n      seriesGroup.appendChild(chart.renderer.drawPath(option));\n      this.refresh(point, degree, start, chart, option);\n    }\n  };\n\n  PieSeries.prototype.findSeries = function (e) {\n    var borderGap = 3; // Gap between pie/doughnut chart and border\n\n    var width = 2; // width of the border\n\n    var radius = this.innerRadius === 0 ? this.radius + borderGap : this.innerRadius - borderGap;\n    var innerRadius = this.innerRadius === 0 ? radius + width : radius - width;\n    this.toggleInnerPoint(e, radius, innerRadius);\n  };\n\n  PieSeries.prototype.toggleInnerPoint = function (event, radius, innerRadius) {\n    var target = event.target;\n    var id = indexFinder(target.id, true);\n    var accumulationId = event.target.id.substring(0, event.target.id.indexOf('Series') - 1);\n    var borderElement = document.getElementById(this.accumulation.element.id + 'PointHover_Border');\n    var createBorderEle;\n    var seriesIndex = id.series;\n    var pointIndex = id.point;\n    var srcElem = getElement(accumulationId + '_Series_' + seriesIndex + '_Point_' + pointIndex);\n\n    if (!isNaN(id.series) && srcElem) {\n      if (!isNullOrUndefined(seriesIndex) && !isNaN(seriesIndex) && !isNullOrUndefined(pointIndex) && !isNaN(pointIndex)) {\n        var point = this.accumulation.visibleSeries[0].points[pointIndex];\n        var opacity = srcElem.getAttribute('class') === accumulationId + '_ej2_deselected' ? this.accumulation.tooltip.enable ? 0.5 : 0.3 : this.accumulation.tooltip.enable ? 0.5 : 1;\n        var innerPie = this.getPathArc(this.accumulation.pieSeriesModule.center, point.startAngle % 360, (point.startAngle + point.degree) % 360, radius, innerRadius); // while using annotation as a chart border will appear in both chart.so changed checked the id with target id\n\n        if (borderElement && accumulationId === this.accumulation.element.id && (borderElement.getAttribute('d') !== innerPie || point.isExplode)) {\n          borderElement.parentNode.removeChild(borderElement);\n          borderElement = null;\n        }\n\n        var seriousGroup = getElement(accumulationId + '_Series_' + seriesIndex);\n\n        if (!borderElement && (!point.isExplode || point.isExplode && event.type !== 'click')) {\n          var path = new PathOption(accumulationId + 'PointHover_Border', point.color, 1, point.color, opacity, '', innerPie);\n          createBorderEle = this.accumulation.renderer.drawPath(path);\n          createBorderEle.removeAttribute('transform');\n\n          if (this.accumulation.selectionMode !== 'None' && event.target.hasAttribute('class')) {\n            this.accumulation.accumulationSelectionModule.addSvgClass(createBorderEle, event.target.getAttribute('class'));\n          }\n\n          seriousGroup.appendChild(createBorderEle);\n\n          if (point.isExplode && createBorderEle) {\n            var borderExplode = srcElem.getAttribute('transform');\n            createBorderEle.setAttribute('transform', borderExplode);\n          }\n        }\n      }\n    } else if (borderElement) {\n      this.removeBorder(borderElement, 1000);\n      borderElement = null;\n    }\n  };\n\n  PieSeries.prototype.removeBorder = function (borderElement, duration) {\n    if (borderElement) {\n      setTimeout(function () {\n        if (borderElement.parentNode) {\n          borderElement.parentNode.removeChild(borderElement);\n        }\n      }, duration);\n    }\n  };\n\n  PieSeries.prototype.refresh = function (point, degree, start, chart, option) {\n    var _this = this;\n\n    var seriesElement = getElement(option.id);\n    var duration = chart.duration ? chart.duration : 300;\n    new Animation({}).animate(createElement('div'), {\n      duration: duration,\n      delay: 0,\n      progress: function (args) {\n        var curentDegree = linear(args.timeStamp, point.degree, degree - point.degree, args.duration);\n        var currentStartAngle = linear(args.timeStamp, point.start, start - point.start, args.duration);\n        currentStartAngle = (currentStartAngle / (Math.PI / 180) + 360) % 360;\n        seriesElement.setAttribute('d', _this.getPathOption(point, curentDegree, currentStartAngle));\n\n        if (point.isExplode) {\n          chart.accBaseModule.explodePoints(point.index, chart, true);\n        }\n\n        seriesElement.style.visibility = 'visible';\n      },\n      end: function () {\n        seriesElement.style.visibility = point.visible ? 'visible' : 'hidden';\n        seriesElement.setAttribute('d', option.d);\n        point.degree = degree;\n        point.start = start;\n      }\n    });\n  };\n  /**\r\n   * To get path option from the point.\r\n   */\n\n\n  PieSeries.prototype.getPathOption = function (point, degree, startAngle) {\n    if (!degree) {\n      return '';\n    }\n\n    var path = this.getPathArc(this.center, startAngle % 360, (startAngle + degree) % 360, this.isRadiusMapped ? stringToNumber(point.sliceRadius, this.seriesRadius) : this.radius, this.innerRadius); //const path: string = this.getPathArc(this.center, startAngle % 360, (startAngle + degree) % 360, this.radius, this.innerRadius);\n\n    this.startAngle += degree;\n    return path;\n  };\n  /**\r\n   * To animate the pie series.\r\n   *\r\n   * @private\r\n   */\n\n\n  PieSeries.prototype.animateSeries = function (accumulation, option, series, slice) {\n    var groupId = accumulation.element.id + 'SeriesGroup' + series.index;\n\n    if (series.animation.enable && accumulation.animateSeries) {\n      var clippath = accumulation.renderer.createClipPath({\n        id: groupId + '_clipPath'\n      });\n      var path = new PathOption(groupId + '_slice', 'transparent', 1, 'transparent', 1, '', '');\n      var clipslice = accumulation.renderer.drawPath(path);\n      clippath.appendChild(clipslice);\n      accumulation.svgObject.appendChild(clippath); // I263828 pie chart animation issue fixed for safari browser\n\n      slice.style.cssText = 'clip-path:url(#' + clippath.id + '); -webkit-clip-path:url(#' + clippath.id + ');';\n      this.doAnimation(clipslice, series);\n    }\n  };\n  /**\r\n   * To get the module name of the Pie series.\r\n   */\n\n\n  PieSeries.prototype.getModuleName = function () {\n    return 'PieSeries';\n  };\n  /**\r\n   * To destroy the pie series.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  PieSeries.prototype.destroy = function () {\n    /**\r\n     * Destroy method calling here\r\n     */\n  };\n\n  return PieSeries;\n}(PieBase);\n\nexport { PieSeries };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-charts/src/accumulation-chart/renderer/pie-series.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","PathOption","degreeToLocation","getElement","linear","stringToNumber","indexFinder","PieBase","Animation","createElement","isNullOrUndefined","PieSeries","_super","apply","arguments","renderPoint","point","series","chart","option","seriesGroup","redraw","sum","sumOfPoints","startAngle","yValue","visible","y","degree","Math","abs","totalAngle","start","PI","radius","isRadiusMapped","sliceRadius","seriesRadius","getPathOption","midAngle","endAngle","symbolLocation","innerRadius","center","appendChild","renderer","drawPath","refresh","findSeries","e","borderGap","width","toggleInnerPoint","event","target","id","accumulationId","substring","indexOf","borderElement","document","getElementById","accumulation","element","createBorderEle","seriesIndex","pointIndex","srcElem","isNaN","visibleSeries","points","opacity","getAttribute","tooltip","enable","innerPie","getPathArc","pieSeriesModule","isExplode","parentNode","removeChild","seriousGroup","type","path","color","removeAttribute","selectionMode","hasAttribute","accumulationSelectionModule","addSvgClass","borderExplode","setAttribute","removeBorder","duration","setTimeout","_this","seriesElement","animate","delay","progress","args","curentDegree","timeStamp","currentStartAngle","accBaseModule","explodePoints","index","style","visibility","end","animateSeries","slice","groupId","animation","clippath","createClipPath","clipslice","svgObject","cssText","doAnimation","getModuleName","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { PathOption } from '@syncfusion/ej2-svg-base';\r\nimport { degreeToLocation, getElement, linear, stringToNumber, indexFinder } from '../../common/utils/helper';\r\nimport { PieBase } from '../renderer/pie-base';\r\nimport { Animation, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\r\n/**\r\n * PieSeries module used to render `Pie` Series.\r\n */\r\nvar PieSeries = /** @class */ (function (_super) {\r\n    __extends(PieSeries, _super);\r\n    function PieSeries() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * To get path option, degree, symbolLocation from the point.\r\n     *\r\n     * @private\r\n     */\r\n    PieSeries.prototype.renderPoint = function (point, series, chart, option, seriesGroup, redraw) {\r\n        var sum = series.sumOfPoints;\r\n        point.startAngle = this.startAngle;\r\n        var yValue = point.visible ? point.y : 0;\r\n        var degree = (sum) ? ((Math.abs(yValue) / sum) * (this.totalAngle)) : null;\r\n        var start = Math.PI / 180 * ((90 - (360 - this.startAngle)) - 90);\r\n        this.radius = this.isRadiusMapped ? stringToNumber(point.sliceRadius, this.seriesRadius) : this.radius;\r\n        option.d = this.getPathOption(point, degree, this.startAngle % 360);\r\n        point.midAngle = (this.startAngle - (degree / 2)) % 360;\r\n        point.endAngle = this.startAngle % 360;\r\n        point.symbolLocation = degreeToLocation(point.midAngle, (this.radius + this.innerRadius) / 2, this.center);\r\n        if (!redraw) {\r\n            seriesGroup.appendChild(chart.renderer.drawPath(option));\r\n            point.degree = degree;\r\n            point.start = start;\r\n        }\r\n        else {\r\n            seriesGroup.appendChild(chart.renderer.drawPath(option));\r\n            this.refresh(point, degree, start, chart, option);\r\n        }\r\n    };\r\n    PieSeries.prototype.findSeries = function (e) {\r\n        var borderGap = 3; // Gap between pie/doughnut chart and border\r\n        var width = 2; // width of the border\r\n        var radius = this.innerRadius === 0 ? this.radius + borderGap : this.innerRadius - borderGap;\r\n        var innerRadius = this.innerRadius === 0 ? radius + width : radius - width;\r\n        this.toggleInnerPoint(e, radius, innerRadius);\r\n    };\r\n    PieSeries.prototype.toggleInnerPoint = function (event, radius, innerRadius) {\r\n        var target = event.target;\r\n        var id = indexFinder(target.id, true);\r\n        var accumulationId = event.target.id.substring(0, (event.target.id.indexOf('Series') - 1));\r\n        var borderElement = document.getElementById(this.accumulation.element.id + 'PointHover_Border');\r\n        var createBorderEle;\r\n        var seriesIndex = id.series;\r\n        var pointIndex = id.point;\r\n        var srcElem = getElement(accumulationId + '_Series_' + seriesIndex + '_Point_' + pointIndex);\r\n        if (!isNaN(id.series) && srcElem) {\r\n            if (!isNullOrUndefined(seriesIndex) && !isNaN(seriesIndex) && !isNullOrUndefined(pointIndex) && !isNaN(pointIndex)) {\r\n                var point = this.accumulation.visibleSeries[0].points[pointIndex];\r\n                var opacity = srcElem.getAttribute('class') === accumulationId + '_ej2_deselected' ?\r\n                    this.accumulation.tooltip.enable ? 0.5 : 0.3 : this.accumulation.tooltip.enable ? 0.5 : 1;\r\n                var innerPie = this.getPathArc(this.accumulation.pieSeriesModule.center, point.startAngle % 360, (point.startAngle + point.degree) % 360, radius, innerRadius);\r\n                // while using annotation as a chart border will appear in both chart.so changed checked the id with target id\r\n                if ((borderElement) && (accumulationId === this.accumulation.element.id) &&\r\n                    (borderElement.getAttribute('d') !== innerPie || point.isExplode)) {\r\n                    borderElement.parentNode.removeChild(borderElement);\r\n                    borderElement = null;\r\n                }\r\n                var seriousGroup = getElement(accumulationId + '_Series_' + seriesIndex);\r\n                if (!borderElement && ((!point.isExplode) || (point.isExplode && event.type !== 'click'))) {\r\n                    var path = new PathOption(accumulationId + 'PointHover_Border', point.color, 1, point.color, opacity, '', innerPie);\r\n                    createBorderEle = this.accumulation.renderer.drawPath(path);\r\n                    createBorderEle.removeAttribute('transform');\r\n                    if (this.accumulation.selectionMode !== 'None' && event.target.hasAttribute('class')) {\r\n                        this.accumulation.accumulationSelectionModule.addSvgClass(createBorderEle, event.target.getAttribute('class'));\r\n                    }\r\n                    seriousGroup.appendChild(createBorderEle);\r\n                    if (point.isExplode && createBorderEle) {\r\n                        var borderExplode = srcElem.getAttribute('transform');\r\n                        createBorderEle.setAttribute('transform', borderExplode);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (borderElement) {\r\n            this.removeBorder(borderElement, 1000);\r\n            borderElement = null;\r\n        }\r\n    };\r\n    PieSeries.prototype.removeBorder = function (borderElement, duration) {\r\n        if (borderElement) {\r\n            setTimeout(function () {\r\n                if (borderElement.parentNode) {\r\n                    borderElement.parentNode.removeChild(borderElement);\r\n                }\r\n            }, duration);\r\n        }\r\n    };\r\n    PieSeries.prototype.refresh = function (point, degree, start, chart, option) {\r\n        var _this = this;\r\n        var seriesElement = getElement(option.id);\r\n        var duration = chart.duration ? chart.duration : 300;\r\n        new Animation({}).animate(createElement('div'), {\r\n            duration: duration,\r\n            delay: 0,\r\n            progress: function (args) {\r\n                var curentDegree = linear(args.timeStamp, point.degree, (degree - point.degree), args.duration);\r\n                var currentStartAngle = linear(args.timeStamp, point.start, start - point.start, args.duration);\r\n                currentStartAngle = ((currentStartAngle / (Math.PI / 180)) + 360) % 360;\r\n                seriesElement.setAttribute('d', _this.getPathOption(point, curentDegree, currentStartAngle));\r\n                if (point.isExplode) {\r\n                    chart.accBaseModule.explodePoints(point.index, chart, true);\r\n                }\r\n                seriesElement.style.visibility = 'visible';\r\n            },\r\n            end: function () {\r\n                seriesElement.style.visibility = point.visible ? 'visible' : 'hidden';\r\n                seriesElement.setAttribute('d', option.d);\r\n                point.degree = degree;\r\n                point.start = start;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * To get path option from the point.\r\n     */\r\n    PieSeries.prototype.getPathOption = function (point, degree, startAngle) {\r\n        if (!degree) {\r\n            return '';\r\n        }\r\n        var path = this.getPathArc(this.center, startAngle % 360, (startAngle + degree) % 360, this.isRadiusMapped ? stringToNumber(point.sliceRadius, this.seriesRadius) : this.radius, this.innerRadius);\r\n        //const path: string = this.getPathArc(this.center, startAngle % 360, (startAngle + degree) % 360, this.radius, this.innerRadius);\r\n        this.startAngle += degree;\r\n        return path;\r\n    };\r\n    /**\r\n     * To animate the pie series.\r\n     *\r\n     * @private\r\n     */\r\n    PieSeries.prototype.animateSeries = function (accumulation, option, series, slice) {\r\n        var groupId = accumulation.element.id + 'SeriesGroup' + series.index;\r\n        if (series.animation.enable && accumulation.animateSeries) {\r\n            var clippath = accumulation.renderer.createClipPath({ id: groupId + '_clipPath' });\r\n            var path = new PathOption(groupId + '_slice', 'transparent', 1, 'transparent', 1, '', '');\r\n            var clipslice = accumulation.renderer.drawPath(path);\r\n            clippath.appendChild(clipslice);\r\n            accumulation.svgObject.appendChild(clippath);\r\n            // I263828 pie chart animation issue fixed for safari browser\r\n            slice.style.cssText = 'clip-path:url(#' + clippath.id + '); -webkit-clip-path:url(#' + clippath.id + ');';\r\n            this.doAnimation(clipslice, series);\r\n        }\r\n    };\r\n    /**\r\n     * To get the module name of the Pie series.\r\n     */\r\n    PieSeries.prototype.getModuleName = function () {\r\n        return 'PieSeries';\r\n    };\r\n    /**\r\n     * To destroy the pie series.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    PieSeries.prototype.destroy = function () {\r\n        /**\r\n         * Destroy method calling here\r\n         */\r\n    };\r\n    return PieSeries;\r\n}(PieBase));\r\nexport { PieSeries };\r\n"]},"metadata":{},"sourceType":"module"}