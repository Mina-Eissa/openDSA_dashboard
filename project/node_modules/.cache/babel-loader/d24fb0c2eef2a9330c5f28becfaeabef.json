{"ast":null,"code":"import { clone } from '../../utils/object.js';\nimport { format } from '../../utils/string.js';\nimport { factory } from '../../utils/factory.js';\nvar name = 'trace';\nvar dependencies = ['typed', 'matrix', 'add'];\nexport var createTrace = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    matrix,\n    add\n  } = _ref;\n  /**\r\n   * Calculate the trace of a matrix: the sum of the elements on the main\r\n   * diagonal of a square matrix.\r\n   *\r\n   * Syntax:\r\n   *\r\n   *    math.trace(x)\r\n   *\r\n   * Examples:\r\n   *\r\n   *    math.trace([[1, 2], [3, 4]]) // returns 5\r\n   *\r\n   *    const A = [\r\n   *      [1, 2, 3],\r\n   *      [-1, 2, 3],\r\n   *      [2, 0, 3]\r\n   *    ]\r\n   *    math.trace(A) // returns 6\r\n   *\r\n   * See also:\r\n   *\r\n   *    diag\r\n   *\r\n   * @param {Array | Matrix} x  A matrix\r\n   *\r\n   * @return {number} The trace of `x`\r\n   */\n\n  return typed('trace', {\n    Array: function _arrayTrace(x) {\n      // use dense matrix implementation\n      return _denseTrace(matrix(x));\n    },\n    SparseMatrix: _sparseTrace,\n    DenseMatrix: _denseTrace,\n    any: clone\n  });\n\n  function _denseTrace(m) {\n    // matrix size & data\n    var size = m._size;\n    var data = m._data; // process dimensions\n\n    switch (size.length) {\n      case 1:\n        // vector\n        if (size[0] === 1) {\n          // return data[0]\n          return clone(data[0]);\n        }\n\n        throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\n\n      case 2:\n        {\n          // two dimensional\n          var rows = size[0];\n          var cols = size[1];\n\n          if (rows === cols) {\n            // calulate sum\n            var sum = 0; // loop diagonal\n\n            for (var i = 0; i < rows; i++) {\n              sum = add(sum, data[i][i]);\n            } // return trace\n\n\n            return sum;\n          } else {\n            throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\n          }\n        }\n\n      default:\n        // multi dimensional\n        throw new RangeError('Matrix must be two dimensional (size: ' + format(size) + ')');\n    }\n  }\n\n  function _sparseTrace(m) {\n    // matrix arrays\n    var values = m._values;\n    var index = m._index;\n    var ptr = m._ptr;\n    var size = m._size; // check dimensions\n\n    var rows = size[0];\n    var columns = size[1]; // matrix must be square\n\n    if (rows === columns) {\n      // calulate sum\n      var sum = 0; // check we have data (avoid looping columns)\n\n      if (values.length > 0) {\n        // loop columns\n        for (var j = 0; j < columns; j++) {\n          // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n          var k0 = ptr[j];\n          var k1 = ptr[j + 1]; // loop k within [k0, k1[\n\n          for (var k = k0; k < k1; k++) {\n            // row index\n            var i = index[k]; // check row\n\n            if (i === j) {\n              // accumulate value\n              sum = add(sum, values[k]); // exit loop\n\n              break;\n            }\n\n            if (i > j) {\n              // exit loop, no value on the diagonal for column j\n              break;\n            }\n          }\n        }\n      } // return trace\n\n\n      return sum;\n    }\n\n    throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\n  }\n});","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/mathjs/lib/esm/function/matrix/trace.js"],"names":["clone","format","factory","name","dependencies","createTrace","_ref","typed","matrix","add","Array","_arrayTrace","x","_denseTrace","SparseMatrix","_sparseTrace","DenseMatrix","any","m","size","_size","data","_data","length","RangeError","rows","cols","sum","i","values","_values","index","_index","ptr","_ptr","columns","j","k0","k1","k"],"mappings":"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","sourcesContent":["import { clone } from '../../utils/object.js';\r\nimport { format } from '../../utils/string.js';\r\nimport { factory } from '../../utils/factory.js';\r\nvar name = 'trace';\r\nvar dependencies = ['typed', 'matrix', 'add'];\r\nexport var createTrace = /* #__PURE__ */factory(name, dependencies, _ref => {\r\n  var {\r\n    typed,\r\n    matrix,\r\n    add\r\n  } = _ref;\r\n  /**\r\n   * Calculate the trace of a matrix: the sum of the elements on the main\r\n   * diagonal of a square matrix.\r\n   *\r\n   * Syntax:\r\n   *\r\n   *    math.trace(x)\r\n   *\r\n   * Examples:\r\n   *\r\n   *    math.trace([[1, 2], [3, 4]]) // returns 5\r\n   *\r\n   *    const A = [\r\n   *      [1, 2, 3],\r\n   *      [-1, 2, 3],\r\n   *      [2, 0, 3]\r\n   *    ]\r\n   *    math.trace(A) // returns 6\r\n   *\r\n   * See also:\r\n   *\r\n   *    diag\r\n   *\r\n   * @param {Array | Matrix} x  A matrix\r\n   *\r\n   * @return {number} The trace of `x`\r\n   */\r\n  return typed('trace', {\r\n    Array: function _arrayTrace(x) {\r\n      // use dense matrix implementation\r\n      return _denseTrace(matrix(x));\r\n    },\r\n    SparseMatrix: _sparseTrace,\r\n    DenseMatrix: _denseTrace,\r\n    any: clone\r\n  });\r\n  function _denseTrace(m) {\r\n    // matrix size & data\r\n    var size = m._size;\r\n    var data = m._data;\r\n\r\n    // process dimensions\r\n    switch (size.length) {\r\n      case 1:\r\n        // vector\r\n        if (size[0] === 1) {\r\n          // return data[0]\r\n          return clone(data[0]);\r\n        }\r\n        throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\r\n      case 2:\r\n        {\r\n          // two dimensional\r\n          var rows = size[0];\r\n          var cols = size[1];\r\n          if (rows === cols) {\r\n            // calulate sum\r\n            var sum = 0;\r\n            // loop diagonal\r\n            for (var i = 0; i < rows; i++) {\r\n              sum = add(sum, data[i][i]);\r\n            }\r\n            // return trace\r\n            return sum;\r\n          } else {\r\n            throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\r\n          }\r\n        }\r\n      default:\r\n        // multi dimensional\r\n        throw new RangeError('Matrix must be two dimensional (size: ' + format(size) + ')');\r\n    }\r\n  }\r\n  function _sparseTrace(m) {\r\n    // matrix arrays\r\n    var values = m._values;\r\n    var index = m._index;\r\n    var ptr = m._ptr;\r\n    var size = m._size;\r\n    // check dimensions\r\n    var rows = size[0];\r\n    var columns = size[1];\r\n    // matrix must be square\r\n    if (rows === columns) {\r\n      // calulate sum\r\n      var sum = 0;\r\n      // check we have data (avoid looping columns)\r\n      if (values.length > 0) {\r\n        // loop columns\r\n        for (var j = 0; j < columns; j++) {\r\n          // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\r\n          var k0 = ptr[j];\r\n          var k1 = ptr[j + 1];\r\n          // loop k within [k0, k1[\r\n          for (var k = k0; k < k1; k++) {\r\n            // row index\r\n            var i = index[k];\r\n            // check row\r\n            if (i === j) {\r\n              // accumulate value\r\n              sum = add(sum, values[k]);\r\n              // exit loop\r\n              break;\r\n            }\r\n            if (i > j) {\r\n              // exit loop, no value on the diagonal for column j\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // return trace\r\n      return sum;\r\n    }\r\n    throw new RangeError('Matrix must be square (size: ' + format(size) + ')');\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}