{"ast":null,"code":"/**\r\n * ArabicShapeRenderer.ts class for EJ2-PDF\r\n */\nimport { Dictionary } from './../../../collections/dictionary';\n\nvar ArabicShapeRenderer =\n/** @class */\nfunction () {\n  //#endregion\n  //#region Constructor\n  function ArabicShapeRenderer() {\n    //#region Constants\n    this.arabicCharTable = [['\\u0621', '\\uFE80'], ['\\u0622', '\\uFE81', '\\uFE82'], ['\\u0623', '\\uFE83', '\\uFE84'], ['\\u0624', '\\uFE85', '\\uFE86'], ['\\u0625', '\\uFE87', '\\uFE88'], ['\\u0626', '\\uFE89', '\\uFE8A', '\\uFE8B', '\\uFE8C'], ['\\u0627', '\\uFE8D', '\\uFE8E'], ['\\u0628', '\\uFE8F', '\\uFE90', '\\uFE91', '\\uFE92'], ['\\u0629', '\\uFE93', '\\uFE94'], ['\\u062A', '\\uFE95', '\\uFE96', '\\uFE97', '\\uFE98'], ['\\u062B', '\\uFE99', '\\uFE9A', '\\uFE9B', '\\uFE9C'], ['\\u062C', '\\uFE9D', '\\uFE9E', '\\uFE9F', '\\uFEA0'], ['\\u062D', '\\uFEA1', '\\uFEA2', '\\uFEA3', '\\uFEA4'], ['\\u062E', '\\uFEA5', '\\uFEA6', '\\uFEA7', '\\uFEA8'], ['\\u062F', '\\uFEA9', '\\uFEAA'], ['\\u0630', '\\uFEAB', '\\uFEAC'], ['\\u0631', '\\uFEAD', '\\uFEAE'], ['\\u0632', '\\uFEAF', '\\uFEB0'], ['\\u0633', '\\uFEB1', '\\uFEB2', '\\uFEB3', '\\uFEB4'], ['\\u0634', '\\uFEB5', '\\uFEB6', '\\uFEB7', '\\uFEB8'], ['\\u0635', '\\uFEB9', '\\uFEBA', '\\uFEBB', '\\uFEBC'], ['\\u0636', '\\uFEBD', '\\uFEBE', '\\uFEBF', '\\uFEC0'], ['\\u0637', '\\uFEC1', '\\uFEC2', '\\uFEC3', '\\uFEC4'], ['\\u0638', '\\uFEC5', '\\uFEC6', '\\uFEC7', '\\uFEC8'], ['\\u0639', '\\uFEC9', '\\uFECA', '\\uFECB', '\\uFECC'], ['\\u063A', '\\uFECD', '\\uFECE', '\\uFECF', '\\uFED0'], ['\\u0640', '\\u0640', '\\u0640', '\\u0640', '\\u0640'], ['\\u0641', '\\uFED1', '\\uFED2', '\\uFED3', '\\uFED4'], ['\\u0642', '\\uFED5', '\\uFED6', '\\uFED7', '\\uFED8'], ['\\u0643', '\\uFED9', '\\uFEDA', '\\uFEDB', '\\uFEDC'], ['\\u0644', '\\uFEDD', '\\uFEDE', '\\uFEDF', '\\uFEE0'], ['\\u0645', '\\uFEE1', '\\uFEE2', '\\uFEE3', '\\uFEE4'], ['\\u0646', '\\uFEE5', '\\uFEE6', '\\uFEE7', '\\uFEE8'], ['\\u0647', '\\uFEE9', '\\uFEEA', '\\uFEEB', '\\uFEEC'], ['\\u0648', '\\uFEED', '\\uFEEE'], ['\\u0649', '\\uFEEF', '\\uFEF0', '\\uFBE8', '\\uFBE9'], ['\\u064A', '\\uFEF1', '\\uFEF2', '\\uFEF3', '\\uFEF4'], ['\\u0671', '\\uFB50', '\\uFB51'], ['\\u0679', '\\uFB66', '\\uFB67', '\\uFB68', '\\uFB69'], ['\\u067A', '\\uFB5E', '\\uFB5F', '\\uFB60', '\\uFB61'], ['\\u067B', '\\uFB52', '\\uFB53', '\\uFB54', '\\uFB55'], ['\\u067E', '\\uFB56', '\\uFB57', '\\uFB58', '\\uFB59'], ['\\u067F', '\\uFB62', '\\uFB63', '\\uFB64', '\\uFB65'], ['\\u0680', '\\uFB5A', '\\uFB5B', '\\uFB5C', '\\uFB5D'], ['\\u0683', '\\uFB76', '\\uFB77', '\\uFB78', '\\uFB79'], ['\\u0684', '\\uFB72', '\\uFB73', '\\uFB74', '\\uFB75'], ['\\u0686', '\\uFB7A', '\\uFB7B', '\\uFB7C', '\\uFB7D'], ['\\u0687', '\\uFB7E', '\\uFB7F', '\\uFB80', '\\uFB81'], ['\\u0688', '\\uFB88', '\\uFB89'], ['\\u068C', '\\uFB84', '\\uFB85'], ['\\u068D', '\\uFB82', '\\uFB83'], ['\\u068E', '\\uFB86', '\\uFB87'], ['\\u0691', '\\uFB8C', '\\uFB8D'], ['\\u0698', '\\uFB8A', '\\uFB8B'], ['\\u06A4', '\\uFB6A', '\\uFB6B', '\\uFB6C', '\\uFB6D'], ['\\u06A6', '\\uFB6E', '\\uFB6F', '\\uFB70', '\\uFB71'], ['\\u06A9', '\\uFB8E', '\\uFB8F', '\\uFB90', '\\uFB91'], ['\\u06AD', '\\uFBD3', '\\uFBD4', '\\uFBD5', '\\uFBD6'], ['\\u06AF', '\\uFB92', '\\uFB93', '\\uFB94', '\\uFB95'], ['\\u06B1', '\\uFB9A', '\\uFB9B', '\\uFB9C', '\\uFB9D'], ['\\u06B3', '\\uFB96', '\\uFB97', '\\uFB98', '\\uFB99'], ['\\u06BA', '\\uFB9E', '\\uFB9F'], ['\\u06BB', '\\uFBA0', '\\uFBA1', '\\uFBA2', '\\uFBA3'], ['\\u06BE', '\\uFBAA', '\\uFBAB', '\\uFBAC', '\\uFBAD'], ['\\u06C0', '\\uFBA4', '\\uFBA5'], ['\\u06C1', '\\uFBA6', '\\uFBA7', '\\uFBA8', '\\uFBA9'], ['\\u06C5', '\\uFBE0', '\\uFBE1'], ['\\u06C6', '\\uFBD9', '\\uFBDA'], ['\\u06C7', '\\uFBD7', '\\uFBD8'], ['\\u06C8', '\\uFBDB', '\\uFBDC'], ['\\u06C9', '\\uFBE2', '\\uFBE3'], ['\\u06CB', '\\uFBDE', '\\uFBDF'], ['\\u06CC', '\\uFBFC', '\\uFBFD', '\\uFBFE', '\\uFBFF'], ['\\u06D0', '\\uFBE4', '\\uFBE5', '\\uFBE6', '\\uFBE7'], ['\\u06D2', '\\uFBAE', '\\uFBAF'], ['\\u06D3', '\\uFBB0', '\\uFBB1']];\n    this.alef = '\\u0627';\n    this.alefHamza = '\\u0623';\n    this.alefHamzaBelow = '\\u0625';\n    this.alefMadda = '\\u0622';\n    this.lam = '\\u0644';\n    this.hamza = '\\u0621';\n    this.zeroWidthJoiner = '\\u200D';\n    this.hamzaAbove = '\\u0654';\n    this.hamzaBelow = '\\u0655';\n    this.wawHamza = '\\u0624';\n    this.yehHamza = '\\u0626';\n    this.waw = '\\u0648';\n    this.alefMaksura = '\\u0649';\n    this.yeh = '\\u064A';\n    this.farsiYeh = '\\u06CC';\n    this.shadda = '\\u0651';\n    this.madda = '\\u0653';\n    this.lwa = '\\uFEFB';\n    this.lwawh = '\\uFEF7';\n    this.lwawhb = '\\uFEF9';\n    this.lwawm = '\\uFEF5';\n    this.bwhb = '\\u06D3';\n    this.fathatan = '\\u064B';\n    this.superScriptalef = '\\u0670';\n    this.vowel = 0x1; // #endregion\n    //#region Fields\n\n    this.arabicMapTable = new Dictionary();\n\n    for (var i = 0; i < this.arabicCharTable.length; i++) {\n      this.arabicMapTable.setValue(this.arabicCharTable[i][0], this.arabicCharTable[i]);\n    }\n  } //#endregion\n  //#region implementation\n\n\n  ArabicShapeRenderer.prototype.getCharacterShape = function (input, index) {\n    if (input >= this.hamza && input <= this.bwhb) {\n      var value = [];\n\n      if (this.arabicMapTable.getValue(input)) {\n        value = this.arabicMapTable.getValue(input);\n        return value[index + 1];\n      }\n    } else if (input >= this.lwawm && input <= this.lwa) {\n      return input;\n    }\n\n    return input;\n  };\n\n  ArabicShapeRenderer.prototype.shape = function (text, level) {\n    var builder = '';\n    var str2 = '';\n\n    for (var i = 0; i < text.length; i++) {\n      var c = text[i];\n\n      if (c >= '؀' && c <= 'ۿ') {\n        //if(c>= 0x0600.toString() && c<= 0x06FF.toString()) {\n        str2 = str2 + c;\n      } else {\n        if (str2.length > 0) {\n          var st = this.doShape(str2.toString(), 0);\n          builder = builder + st;\n          str2 = '';\n        }\n\n        builder = builder + c;\n      }\n    }\n\n    if (str2.length > 0) {\n      var st = this.doShape(str2.toString(), 0);\n      builder = builder + st;\n    }\n\n    return builder.toString();\n  };\n\n  ArabicShapeRenderer.prototype.doShape = function (input, level) {\n    var str = '';\n    var ligature = 0;\n    var len = 0;\n    var i = 0;\n    var next = '';\n    var previous = new ArabicShape();\n    var present = new ArabicShape();\n\n    while (i < input.length) {\n      next = input[i++];\n      ligature = this.ligature(next, present);\n\n      if (ligature === 0) {\n        var shapeCount = this.getShapeCount(next);\n        len = shapeCount === 1 ? 0 : 2;\n\n        if (previous.Shapes > 2) {\n          len += 1;\n        }\n\n        len = len % present.Shapes;\n        present.Value = this.getCharacterShape(present.Value, len);\n        str = this.append(str, previous, level);\n        previous = present;\n        present = new ArabicShape();\n        present.Value = next;\n        present.Shapes = shapeCount;\n        present.Ligature++;\n      }\n    }\n\n    len = previous.Shapes > 2 ? 1 : 0;\n    len = len % present.Shapes;\n    present.Value = this.getCharacterShape(present.Value, len);\n    str = this.append(str, previous, level);\n    str = this.append(str, present, level);\n    return str.toString();\n  };\n\n  ArabicShapeRenderer.prototype.append = function (builder, shape, level) {\n    if (shape.Value !== '') {\n      builder = builder + shape.Value;\n      shape.Ligature -= 1;\n\n      if (shape.Type !== '') {\n        if ((level & this.vowel) === 0) {\n          builder = builder + shape.Type;\n          shape.Ligature -= 1;\n        } else {\n          shape.Ligature -= 1;\n        }\n      }\n\n      if (shape.vowel !== '') {\n        if ((level & this.vowel) === 0) {\n          builder = builder + shape.vowel;\n          shape.Ligature -= 1;\n        } else {\n          shape.Ligature -= 1;\n        }\n      }\n    }\n\n    return builder;\n  };\n\n  ArabicShapeRenderer.prototype.ligature = function (value, shape) {\n    if (shape.Value !== '') {\n      var result = 0;\n\n      if (value >= this.fathatan && value <= this.hamzaBelow || value === this.superScriptalef) {\n        result = 1;\n\n        if (shape.vowel !== '' && value !== this.shadda) {\n          result = 2;\n        }\n\n        if (value === this.shadda) {\n          if (shape.Type == null) {\n            shape.Type = this.shadda;\n          } else {\n            return 0;\n          }\n        } else if (value === this.hamzaBelow) {\n          if (shape.Value === this.alef) {\n            shape.Value = this.alefHamzaBelow;\n            result = 2;\n          } else if (value === this.lwa) {\n            shape.Value = this.lwawhb;\n            result = 2;\n          } else {\n            shape.Type = this.hamzaBelow;\n          }\n        } else if (value === this.hamzaAbove) {\n          if (shape.Value === this.alef) {\n            shape.Value = this.alefHamza;\n            result = 2;\n          } else if (shape.Value === this.lwa) {\n            shape.Value = this.lwawh;\n            result = 2;\n          } else if (shape.Value === this.waw) {\n            shape.Value = this.wawHamza;\n            result = 2;\n          } else if (shape.Value === this.yeh || shape.Value === this.alefMaksura || shape.Value === this.farsiYeh) {\n            shape.Value = this.yehHamza;\n            result = 2;\n          } else {\n            shape.Type = this.hamzaAbove;\n          }\n        } else if (value === this.madda) {\n          if (shape.Value === this.alef) {\n            shape.Value = this.alefMadda;\n            result = 2;\n          }\n        } else {\n          shape.vowel = value;\n        }\n\n        if (result === 1) {\n          shape.Ligature++;\n        }\n\n        return result;\n      }\n\n      if (shape.vowel !== '') {\n        return 0;\n      }\n\n      if (shape.Value === this.lam) {\n        if (value === this.alef) {\n          shape.Value = this.lwa;\n          shape.Shapes = 2;\n          result = 3;\n        } else if (value === this.alefHamza) {\n          shape.Value = this.lwawh;\n          shape.Shapes = 2;\n          result = 3;\n        } else if (value === this.alefHamzaBelow) {\n          shape.Value = this.lwawhb;\n          shape.Shapes = 2;\n          result = 3;\n        } else if (value === this.alefMadda) {\n          shape.Value = this.lwawm;\n          shape.Shapes = 2;\n          result = 3;\n        }\n      } // else if (shape.Value === '') {\n      //     shape.Value = value;\n      //     shape.Shapes = this.getShapeCount(value);\n      //     result = 1;\n      // }\n\n\n      return result;\n    } else {\n      return 0;\n    }\n  };\n\n  ArabicShapeRenderer.prototype.getShapeCount = function (shape) {\n    if (shape >= this.hamza && shape <= this.bwhb && !(shape >= this.fathatan && shape <= this.hamzaBelow || shape === this.superScriptalef)) {\n      var c = [];\n\n      if (this.arabicMapTable.getValue(shape)) {\n        c = this.arabicMapTable.getValue(shape);\n        return c.length - 1;\n      }\n    } else if (shape === this.zeroWidthJoiner) {\n      return 4;\n    }\n\n    return 1;\n  };\n\n  return ArabicShapeRenderer;\n}();\n\nexport { ArabicShapeRenderer }; //#endregion\n//#region Internals\n\nvar ArabicShape =\n/** @class */\nfunction () {\n  function ArabicShape() {\n    //#region Fields\n    this.shapeValue = '';\n    this.shapeType = '';\n    this.shapeVowel = '';\n    this.shapeLigature = 0;\n    this.shapeShapes = 1; //#endregion\n  }\n\n  Object.defineProperty(ArabicShape.prototype, \"Value\", {\n    //#endregion\n    //#region Properties \n\n    /**\r\n     * Gets or sets the values.\r\n     * @private\r\n     */\n    get: function () {\n      return this.shapeValue;\n    },\n    set: function (value) {\n      this.shapeValue = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ArabicShape.prototype, \"Type\", {\n    /**\r\n     * Gets or sets the values.\r\n     * @private\r\n     */\n    get: function () {\n      return this.shapeType;\n    },\n    set: function (value) {\n      this.shapeType = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ArabicShape.prototype, \"vowel\", {\n    /**\r\n     * Gets or sets the values.\r\n     * @private\r\n     */\n    get: function () {\n      return this.shapeVowel;\n    },\n    set: function (value) {\n      this.shapeVowel = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ArabicShape.prototype, \"Ligature\", {\n    /**\r\n     * Gets or sets the values.\r\n     * @private\r\n     */\n    get: function () {\n      return this.shapeLigature;\n    },\n    set: function (value) {\n      this.shapeLigature = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ArabicShape.prototype, \"Shapes\", {\n    /**\r\n     * Gets or sets the values.\r\n     * @private\r\n     */\n    get: function () {\n      return this.shapeShapes;\n    },\n    set: function (value) {\n      this.shapeShapes = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return ArabicShape;\n}();\n\nexport { ArabicShape }; //#endregion","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-react-charts/node_modules/@syncfusion/ej2-pdf-export/src/implementation/graphics/fonts/rtl/rtl-text-shape.js"],"names":["Dictionary","ArabicShapeRenderer","arabicCharTable","alef","alefHamza","alefHamzaBelow","alefMadda","lam","hamza","zeroWidthJoiner","hamzaAbove","hamzaBelow","wawHamza","yehHamza","waw","alefMaksura","yeh","farsiYeh","shadda","madda","lwa","lwawh","lwawhb","lwawm","bwhb","fathatan","superScriptalef","vowel","arabicMapTable","i","length","setValue","prototype","getCharacterShape","input","index","value","getValue","shape","text","level","builder","str2","c","st","doShape","toString","str","ligature","len","next","previous","ArabicShape","present","shapeCount","getShapeCount","Shapes","Value","append","Ligature","Type","result","shapeValue","shapeType","shapeVowel","shapeLigature","shapeShapes","Object","defineProperty","get","set","enumerable","configurable"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,UAAT,QAA2B,mCAA3B;;AACA,IAAIC,mBAAmB;AAAG;AAAe,YAAY;AACjD;AACA;AACA,WAASA,mBAAT,GAA+B;AAC3B;AACA,SAAKC,eAAL,GAAuB,CAAC,CAAC,QAAD,EAAW,QAAX,CAAD,EAAuB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAAvB,EACnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CADmB,EAEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAFmB,EAGnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAHmB,EAInB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAJmB,EAKnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CALmB,EAMnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CANmB,EAOnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAPmB,EAQnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CARmB,EASnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CATmB,EAUnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAVmB,EAWnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAXmB,EAYnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAZmB,EAanB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAbmB,EAcnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAdmB,EAenB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAfmB,EAgBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAhBmB,EAiBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAjBmB,EAkBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAlBmB,EAmBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAnBmB,EAoBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CApBmB,EAqBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CArBmB,EAsBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAtBmB,EAuBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAvBmB,EAwBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAxBmB,EAyBnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAzBmB,EA0BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA1BmB,EA2BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA3BmB,EA4BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA5BmB,EA6BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA7BmB,EA8BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA9BmB,EA+BnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA/BmB,EAgCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAhCmB,EAiCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAjCmB,EAkCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAlCmB,EAmCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAnCmB,EAoCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CApCmB,EAqCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CArCmB,EAsCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAtCmB,EAuCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAvCmB,EAwCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAxCmB,EAyCnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAzCmB,EA0CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA1CmB,EA2CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA3CmB,EA4CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA5CmB,EA6CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA7CmB,EA8CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA9CmB,EA+CnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CA/CmB,EAgDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAhDmB,EAiDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAjDmB,EAkDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAlDmB,EAmDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAnDmB,EAoDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CApDmB,EAqDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CArDmB,EAsDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAtDmB,EAuDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAvDmB,EAwDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAxDmB,EAyDnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAzDmB,EA0DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA1DmB,EA2DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA3DmB,EA4DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CA5DmB,EA6DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA7DmB,EA8DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CA9DmB,EA+DnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CA/DmB,EAgEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAhEmB,EAiEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAjEmB,EAkEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAlEmB,EAmEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAnEmB,EAoEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CApEmB,EAqEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CArEmB,EAsEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAtEmB,EAuEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAvEmB,EAwEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,EAAyC,QAAzC,CAxEmB,EAyEnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CAzEmB,EA0EnB,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,CA1EmB,CAAvB;AA4EA,SAAKC,IAAL,GAAY,QAAZ;AACA,SAAKC,SAAL,GAAiB,QAAjB;AACA,SAAKC,cAAL,GAAsB,QAAtB;AACA,SAAKC,SAAL,GAAiB,QAAjB;AACA,SAAKC,GAAL,GAAW,QAAX;AACA,SAAKC,KAAL,GAAa,QAAb;AACA,SAAKC,eAAL,GAAuB,QAAvB;AACA,SAAKC,UAAL,GAAkB,QAAlB;AACA,SAAKC,UAAL,GAAkB,QAAlB;AACA,SAAKC,QAAL,GAAgB,QAAhB;AACA,SAAKC,QAAL,GAAgB,QAAhB;AACA,SAAKC,GAAL,GAAW,QAAX;AACA,SAAKC,WAAL,GAAmB,QAAnB;AACA,SAAKC,GAAL,GAAW,QAAX;AACA,SAAKC,QAAL,GAAgB,QAAhB;AACA,SAAKC,MAAL,GAAc,QAAd;AACA,SAAKC,KAAL,GAAa,QAAb;AACA,SAAKC,GAAL,GAAW,QAAX;AACA,SAAKC,KAAL,GAAa,QAAb;AACA,SAAKC,MAAL,GAAc,QAAd;AACA,SAAKC,KAAL,GAAa,QAAb;AACA,SAAKC,IAAL,GAAY,QAAZ;AACA,SAAKC,QAAL,GAAgB,QAAhB;AACA,SAAKC,eAAL,GAAuB,QAAvB;AACA,SAAKC,KAAL,GAAa,GAAb,CAtG2B,CAuG3B;AACA;;AACA,SAAKC,cAAL,GAAsB,IAAI5B,UAAJ,EAAtB;;AACA,SAAK,IAAI6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3B,eAAL,CAAqB4B,MAAzC,EAAiDD,CAAC,EAAlD,EAAsD;AAClD,WAAKD,cAAL,CAAoBG,QAApB,CAA6B,KAAK7B,eAAL,CAAqB2B,CAArB,EAAwB,CAAxB,CAA7B,EAAyD,KAAK3B,eAAL,CAAqB2B,CAArB,CAAzD;AACH;AACJ,GAhHgD,CAiHjD;AACA;;;AACA5B,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8BC,iBAA9B,GAAkD,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACtE,QAAKD,KAAK,IAAI,KAAK1B,KAAf,IAA0B0B,KAAK,IAAI,KAAKV,IAA5C,EAAmD;AAC/C,UAAIY,KAAK,GAAG,EAAZ;;AACA,UAAI,KAAKR,cAAL,CAAoBS,QAApB,CAA6BH,KAA7B,CAAJ,EAAyC;AACrCE,QAAAA,KAAK,GAAG,KAAKR,cAAL,CAAoBS,QAApB,CAA6BH,KAA7B,CAAR;AACA,eAAOE,KAAK,CAACD,KAAK,GAAG,CAAT,CAAZ;AACH;AACJ,KAND,MAOK,IAAID,KAAK,IAAI,KAAKX,KAAd,IAAuBW,KAAK,IAAI,KAAKd,GAAzC,EAA8C;AAC/C,aAAQc,KAAR;AACH;;AACD,WAAOA,KAAP;AACH,GAZD;;AAaAjC,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8BM,KAA9B,GAAsC,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AACzD,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGU,IAAI,CAACT,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,UAAIc,CAAC,GAAGJ,IAAI,CAACV,CAAD,CAAZ;;AACA,UAAIc,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EAA0B;AACtB;AACAD,QAAAA,IAAI,GAAGA,IAAI,GAAGC,CAAd;AACH,OAHD,MAIK;AACD,YAAID,IAAI,CAACZ,MAAL,GAAc,CAAlB,EAAqB;AACjB,cAAIc,EAAE,GAAG,KAAKC,OAAL,CAAaH,IAAI,CAACI,QAAL,EAAb,EAA8B,CAA9B,CAAT;AACAL,UAAAA,OAAO,GAAGA,OAAO,GAAGG,EAApB;AACAF,UAAAA,IAAI,GAAG,EAAP;AACH;;AACDD,QAAAA,OAAO,GAAGA,OAAO,GAAGE,CAApB;AACH;AACJ;;AACD,QAAID,IAAI,CAACZ,MAAL,GAAc,CAAlB,EAAqB;AACjB,UAAIc,EAAE,GAAG,KAAKC,OAAL,CAAaH,IAAI,CAACI,QAAL,EAAb,EAA8B,CAA9B,CAAT;AACAL,MAAAA,OAAO,GAAGA,OAAO,GAAGG,EAApB;AACH;;AACD,WAAOH,OAAO,CAACK,QAAR,EAAP;AACH,GAvBD;;AAwBA7C,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8Ba,OAA9B,GAAwC,UAAUX,KAAV,EAAiBM,KAAjB,EAAwB;AAC5D,QAAIO,GAAG,GAAG,EAAV;AACA,QAAIC,QAAQ,GAAG,CAAf;AACA,QAAIC,GAAG,GAAG,CAAV;AACA,QAAIpB,CAAC,GAAG,CAAR;AACA,QAAIqB,IAAI,GAAG,EAAX;AACA,QAAIC,QAAQ,GAAG,IAAIC,WAAJ,EAAf;AACA,QAAIC,OAAO,GAAG,IAAID,WAAJ,EAAd;;AACA,WAAOvB,CAAC,GAAGK,KAAK,CAACJ,MAAjB,EAAyB;AACrBoB,MAAAA,IAAI,GAAGhB,KAAK,CAACL,CAAC,EAAF,CAAZ;AACAmB,MAAAA,QAAQ,GAAG,KAAKA,QAAL,CAAcE,IAAd,EAAoBG,OAApB,CAAX;;AACA,UAAIL,QAAQ,KAAK,CAAjB,EAAoB;AAChB,YAAIM,UAAU,GAAG,KAAKC,aAAL,CAAmBL,IAAnB,CAAjB;AACAD,QAAAA,GAAG,GAAIK,UAAU,KAAK,CAAhB,GAAqB,CAArB,GAAyB,CAA/B;;AACA,YAAIH,QAAQ,CAACK,MAAT,GAAkB,CAAtB,EAAyB;AACrBP,UAAAA,GAAG,IAAI,CAAP;AACH;;AACDA,QAAAA,GAAG,GAAGA,GAAG,GAAII,OAAO,CAACG,MAArB;AACAH,QAAAA,OAAO,CAACI,KAAR,GAAgB,KAAKxB,iBAAL,CAAuBoB,OAAO,CAACI,KAA/B,EAAsCR,GAAtC,CAAhB;AACAF,QAAAA,GAAG,GAAG,KAAKW,MAAL,CAAYX,GAAZ,EAAiBI,QAAjB,EAA2BX,KAA3B,CAAN;AACAW,QAAAA,QAAQ,GAAGE,OAAX;AACAA,QAAAA,OAAO,GAAG,IAAID,WAAJ,EAAV;AACAC,QAAAA,OAAO,CAACI,KAAR,GAAgBP,IAAhB;AACAG,QAAAA,OAAO,CAACG,MAAR,GAAiBF,UAAjB;AACAD,QAAAA,OAAO,CAACM,QAAR;AACH;AACJ;;AACDV,IAAAA,GAAG,GAAIE,QAAQ,CAACK,MAAT,GAAkB,CAAnB,GAAwB,CAAxB,GAA4B,CAAlC;AACAP,IAAAA,GAAG,GAAGA,GAAG,GAAII,OAAO,CAACG,MAArB;AACAH,IAAAA,OAAO,CAACI,KAAR,GAAgB,KAAKxB,iBAAL,CAAuBoB,OAAO,CAACI,KAA/B,EAAsCR,GAAtC,CAAhB;AACAF,IAAAA,GAAG,GAAG,KAAKW,MAAL,CAAYX,GAAZ,EAAiBI,QAAjB,EAA2BX,KAA3B,CAAN;AACAO,IAAAA,GAAG,GAAG,KAAKW,MAAL,CAAYX,GAAZ,EAAiBM,OAAjB,EAA0Bb,KAA1B,CAAN;AACA,WAAOO,GAAG,CAACD,QAAJ,EAAP;AACH,GAjCD;;AAkCA7C,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8B0B,MAA9B,GAAuC,UAAUjB,OAAV,EAAmBH,KAAnB,EAA0BE,KAA1B,EAAiC;AACpE,QAAIF,KAAK,CAACmB,KAAN,KAAgB,EAApB,EAAwB;AACpBhB,MAAAA,OAAO,GAAGA,OAAO,GAAGH,KAAK,CAACmB,KAA1B;AACAnB,MAAAA,KAAK,CAACqB,QAAN,IAAkB,CAAlB;;AACA,UAAIrB,KAAK,CAACsB,IAAN,KAAe,EAAnB,EAAuB;AACnB,YAAI,CAACpB,KAAK,GAAG,KAAKb,KAAd,MAAyB,CAA7B,EAAgC;AAC5Bc,UAAAA,OAAO,GAAGA,OAAO,GAAGH,KAAK,CAACsB,IAA1B;AACAtB,UAAAA,KAAK,CAACqB,QAAN,IAAkB,CAAlB;AACH,SAHD,MAIK;AACDrB,UAAAA,KAAK,CAACqB,QAAN,IAAkB,CAAlB;AACH;AACJ;;AACD,UAAIrB,KAAK,CAACX,KAAN,KAAgB,EAApB,EAAwB;AACpB,YAAI,CAACa,KAAK,GAAG,KAAKb,KAAd,MAAyB,CAA7B,EAAgC;AAC5Bc,UAAAA,OAAO,GAAGA,OAAO,GAAGH,KAAK,CAACX,KAA1B;AACAW,UAAAA,KAAK,CAACqB,QAAN,IAAkB,CAAlB;AACH,SAHD,MAIK;AACDrB,UAAAA,KAAK,CAACqB,QAAN,IAAkB,CAAlB;AACH;AACJ;AACJ;;AACD,WAAOlB,OAAP;AACH,GAxBD;;AAyBAxC,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8BgB,QAA9B,GAAyC,UAAUZ,KAAV,EAAiBE,KAAjB,EAAwB;AAC7D,QAAIA,KAAK,CAACmB,KAAN,KAAgB,EAApB,EAAwB;AACpB,UAAII,MAAM,GAAG,CAAb;;AACA,UAAKzB,KAAK,IAAI,KAAKX,QAAd,IAA0BW,KAAK,IAAI,KAAKzB,UAAzC,IAAwDyB,KAAK,KAAK,KAAKV,eAA3E,EAA4F;AACxFmC,QAAAA,MAAM,GAAG,CAAT;;AACA,YAAKvB,KAAK,CAACX,KAAN,KAAgB,EAAjB,IAAyBS,KAAK,KAAK,KAAKlB,MAA5C,EAAqD;AACjD2C,UAAAA,MAAM,GAAG,CAAT;AACH;;AACD,YAAIzB,KAAK,KAAK,KAAKlB,MAAnB,EAA2B;AACvB,cAAIoB,KAAK,CAACsB,IAAN,IAAc,IAAlB,EAAwB;AACpBtB,YAAAA,KAAK,CAACsB,IAAN,GAAa,KAAK1C,MAAlB;AACH,WAFD,MAGK;AACD,mBAAO,CAAP;AACH;AACJ,SAPD,MAQK,IAAIkB,KAAK,KAAK,KAAKzB,UAAnB,EAA+B;AAChC,cAAI2B,KAAK,CAACmB,KAAN,KAAgB,KAAKtD,IAAzB,EAA+B;AAC3BmC,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKpD,cAAnB;AACAwD,YAAAA,MAAM,GAAG,CAAT;AACH,WAHD,MAIK,IAAIzB,KAAK,KAAK,KAAKhB,GAAnB,EAAwB;AACzBkB,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKnC,MAAnB;AACAuC,YAAAA,MAAM,GAAG,CAAT;AACH,WAHI,MAIA;AACDvB,YAAAA,KAAK,CAACsB,IAAN,GAAa,KAAKjD,UAAlB;AACH;AACJ,SAZI,MAaA,IAAIyB,KAAK,KAAK,KAAK1B,UAAnB,EAA+B;AAChC,cAAI4B,KAAK,CAACmB,KAAN,KAAgB,KAAKtD,IAAzB,EAA+B;AAC3BmC,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKrD,SAAnB;AACAyD,YAAAA,MAAM,GAAG,CAAT;AACH,WAHD,MAIK,IAAIvB,KAAK,CAACmB,KAAN,KAAgB,KAAKrC,GAAzB,EAA8B;AAC/BkB,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKpC,KAAnB;AACAwC,YAAAA,MAAM,GAAG,CAAT;AACH,WAHI,MAIA,IAAIvB,KAAK,CAACmB,KAAN,KAAgB,KAAK3C,GAAzB,EAA8B;AAC/BwB,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAK7C,QAAnB;AACAiD,YAAAA,MAAM,GAAG,CAAT;AACH,WAHI,MAIA,IAAIvB,KAAK,CAACmB,KAAN,KAAgB,KAAKzC,GAArB,IAA4BsB,KAAK,CAACmB,KAAN,KAAgB,KAAK1C,WAAjD,IAAgEuB,KAAK,CAACmB,KAAN,KAAgB,KAAKxC,QAAzF,EAAmG;AACpGqB,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAK5C,QAAnB;AACAgD,YAAAA,MAAM,GAAG,CAAT;AACH,WAHI,MAIA;AACDvB,YAAAA,KAAK,CAACsB,IAAN,GAAa,KAAKlD,UAAlB;AACH;AACJ,SApBI,MAqBA,IAAI0B,KAAK,KAAK,KAAKjB,KAAnB,EAA0B;AAC3B,cAAImB,KAAK,CAACmB,KAAN,KAAgB,KAAKtD,IAAzB,EAA+B;AAC3BmC,YAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKnD,SAAnB;AACAuD,YAAAA,MAAM,GAAG,CAAT;AACH;AACJ,SALI,MAMA;AACDvB,UAAAA,KAAK,CAACX,KAAN,GAAcS,KAAd;AACH;;AACD,YAAIyB,MAAM,KAAK,CAAf,EAAkB;AACdvB,UAAAA,KAAK,CAACqB,QAAN;AACH;;AACD,eAAOE,MAAP;AACH;;AACD,UAAIvB,KAAK,CAACX,KAAN,KAAgB,EAApB,EAAwB;AACpB,eAAO,CAAP;AACH;;AACD,UAAIW,KAAK,CAACmB,KAAN,KAAgB,KAAKlD,GAAzB,EAA8B;AAC1B,YAAI6B,KAAK,KAAK,KAAKjC,IAAnB,EAAyB;AACrBmC,UAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKrC,GAAnB;AACAkB,UAAAA,KAAK,CAACkB,MAAN,GAAe,CAAf;AACAK,UAAAA,MAAM,GAAG,CAAT;AACH,SAJD,MAKK,IAAIzB,KAAK,KAAK,KAAKhC,SAAnB,EAA8B;AAC/BkC,UAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKpC,KAAnB;AACAiB,UAAAA,KAAK,CAACkB,MAAN,GAAe,CAAf;AACAK,UAAAA,MAAM,GAAG,CAAT;AACH,SAJI,MAKA,IAAIzB,KAAK,KAAK,KAAK/B,cAAnB,EAAmC;AACpCiC,UAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKnC,MAAnB;AACAgB,UAAAA,KAAK,CAACkB,MAAN,GAAe,CAAf;AACAK,UAAAA,MAAM,GAAG,CAAT;AACH,SAJI,MAKA,IAAIzB,KAAK,KAAK,KAAK9B,SAAnB,EAA8B;AAC/BgC,UAAAA,KAAK,CAACmB,KAAN,GAAc,KAAKlC,KAAnB;AACAe,UAAAA,KAAK,CAACkB,MAAN,GAAe,CAAf;AACAK,UAAAA,MAAM,GAAG,CAAT;AACH;AACJ,OAvFmB,CAwFpB;AACA;AACA;AACA;AACA;;;AACA,aAAOA,MAAP;AACH,KA9FD,MA+FK;AACD,aAAO,CAAP;AACH;AACJ,GAnGD;;AAoGA5D,EAAAA,mBAAmB,CAAC+B,SAApB,CAA8BuB,aAA9B,GAA8C,UAAUjB,KAAV,EAAiB;AAC3D,QAAKA,KAAK,IAAI,KAAK9B,KAAf,IAA0B8B,KAAK,IAAI,KAAKd,IAAxC,IAAiD,EAAGc,KAAK,IAAI,KAAKb,QAAd,IAA0Ba,KAAK,IAAI,KAAK3B,UAAzC,IAChD2B,KAAK,KAAK,KAAKZ,eAD+B,CAArD,EACwC;AACpC,UAAIiB,CAAC,GAAG,EAAR;;AACA,UAAI,KAAKf,cAAL,CAAoBS,QAApB,CAA6BC,KAA7B,CAAJ,EAAyC;AACrCK,QAAAA,CAAC,GAAG,KAAKf,cAAL,CAAoBS,QAApB,CAA6BC,KAA7B,CAAJ;AACA,eAAOK,CAAC,CAACb,MAAF,GAAW,CAAlB;AACH;AACJ,KAPD,MAQK,IAAIQ,KAAK,KAAK,KAAK7B,eAAnB,EAAoC;AACrC,aAAO,CAAP;AACH;;AACD,WAAO,CAAP;AACH,GAbD;;AAcA,SAAOR,mBAAP;AACH,CAtUwC,EAAzC;;AAuUA,SAASA,mBAAT,G,CACA;AACA;;AACA,IAAImD,WAAW;AAAG;AAAe,YAAY;AACzC,WAASA,WAAT,GAAuB;AACnB;AACA,SAAKU,UAAL,GAAkB,EAAlB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,WAAL,GAAmB,CAAnB,CANmB,CAOnB;AACH;;AACDC,EAAAA,MAAM,CAACC,cAAP,CAAsBhB,WAAW,CAACpB,SAAlC,EAA6C,OAA7C,EAAsD;AAClD;AACA;;AACA;AACR;AACA;AACA;AACQqC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKP,UAAZ;AACH,KATiD;AAUlDQ,IAAAA,GAAG,EAAE,UAAUlC,KAAV,EAAiB;AAClB,WAAK0B,UAAL,GAAkB1B,KAAlB;AACH,KAZiD;AAalDmC,IAAAA,UAAU,EAAE,IAbsC;AAclDC,IAAAA,YAAY,EAAE;AAdoC,GAAtD;AAgBAL,EAAAA,MAAM,CAACC,cAAP,CAAsBhB,WAAW,CAACpB,SAAlC,EAA6C,MAA7C,EAAqD;AACjD;AACR;AACA;AACA;AACQqC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKN,SAAZ;AACH,KAPgD;AAQjDO,IAAAA,GAAG,EAAE,UAAUlC,KAAV,EAAiB;AAClB,WAAK2B,SAAL,GAAiB3B,KAAjB;AACH,KAVgD;AAWjDmC,IAAAA,UAAU,EAAE,IAXqC;AAYjDC,IAAAA,YAAY,EAAE;AAZmC,GAArD;AAcAL,EAAAA,MAAM,CAACC,cAAP,CAAsBhB,WAAW,CAACpB,SAAlC,EAA6C,OAA7C,EAAsD;AAClD;AACR;AACA;AACA;AACQqC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKL,UAAZ;AACH,KAPiD;AAQlDM,IAAAA,GAAG,EAAE,UAAUlC,KAAV,EAAiB;AAClB,WAAK4B,UAAL,GAAkB5B,KAAlB;AACH,KAViD;AAWlDmC,IAAAA,UAAU,EAAE,IAXsC;AAYlDC,IAAAA,YAAY,EAAE;AAZoC,GAAtD;AAcAL,EAAAA,MAAM,CAACC,cAAP,CAAsBhB,WAAW,CAACpB,SAAlC,EAA6C,UAA7C,EAAyD;AACrD;AACR;AACA;AACA;AACQqC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKJ,aAAZ;AACH,KAPoD;AAQrDK,IAAAA,GAAG,EAAE,UAAUlC,KAAV,EAAiB;AAClB,WAAK6B,aAAL,GAAqB7B,KAArB;AACH,KAVoD;AAWrDmC,IAAAA,UAAU,EAAE,IAXyC;AAYrDC,IAAAA,YAAY,EAAE;AAZuC,GAAzD;AAcAL,EAAAA,MAAM,CAACC,cAAP,CAAsBhB,WAAW,CAACpB,SAAlC,EAA6C,QAA7C,EAAuD;AACnD;AACR;AACA;AACA;AACQqC,IAAAA,GAAG,EAAE,YAAY;AACb,aAAO,KAAKH,WAAZ;AACH,KAPkD;AAQnDI,IAAAA,GAAG,EAAE,UAAUlC,KAAV,EAAiB;AAClB,WAAK8B,WAAL,GAAmB9B,KAAnB;AACH,KAVkD;AAWnDmC,IAAAA,UAAU,EAAE,IAXuC;AAYnDC,IAAAA,YAAY,EAAE;AAZqC,GAAvD;AAcA,SAAOpB,WAAP;AACH,CAnFgC,EAAjC;;AAoFA,SAASA,WAAT,G,CACA","sourcesContent":["/**\r\n * ArabicShapeRenderer.ts class for EJ2-PDF\r\n */\r\nimport { Dictionary } from './../../../collections/dictionary';\r\nvar ArabicShapeRenderer = /** @class */ (function () {\r\n    //#endregion\r\n    //#region Constructor\r\n    function ArabicShapeRenderer() {\r\n        //#region Constants\r\n        this.arabicCharTable = [['\\u0621', '\\uFE80'], ['\\u0622', '\\uFE81', '\\uFE82'],\r\n            ['\\u0623', '\\uFE83', '\\uFE84'],\r\n            ['\\u0624', '\\uFE85', '\\uFE86'],\r\n            ['\\u0625', '\\uFE87', '\\uFE88'],\r\n            ['\\u0626', '\\uFE89', '\\uFE8A', '\\uFE8B', '\\uFE8C'],\r\n            ['\\u0627', '\\uFE8D', '\\uFE8E'],\r\n            ['\\u0628', '\\uFE8F', '\\uFE90', '\\uFE91', '\\uFE92'],\r\n            ['\\u0629', '\\uFE93', '\\uFE94'],\r\n            ['\\u062A', '\\uFE95', '\\uFE96', '\\uFE97', '\\uFE98'],\r\n            ['\\u062B', '\\uFE99', '\\uFE9A', '\\uFE9B', '\\uFE9C'],\r\n            ['\\u062C', '\\uFE9D', '\\uFE9E', '\\uFE9F', '\\uFEA0'],\r\n            ['\\u062D', '\\uFEA1', '\\uFEA2', '\\uFEA3', '\\uFEA4'],\r\n            ['\\u062E', '\\uFEA5', '\\uFEA6', '\\uFEA7', '\\uFEA8'],\r\n            ['\\u062F', '\\uFEA9', '\\uFEAA'],\r\n            ['\\u0630', '\\uFEAB', '\\uFEAC'],\r\n            ['\\u0631', '\\uFEAD', '\\uFEAE'],\r\n            ['\\u0632', '\\uFEAF', '\\uFEB0'],\r\n            ['\\u0633', '\\uFEB1', '\\uFEB2', '\\uFEB3', '\\uFEB4'],\r\n            ['\\u0634', '\\uFEB5', '\\uFEB6', '\\uFEB7', '\\uFEB8'],\r\n            ['\\u0635', '\\uFEB9', '\\uFEBA', '\\uFEBB', '\\uFEBC'],\r\n            ['\\u0636', '\\uFEBD', '\\uFEBE', '\\uFEBF', '\\uFEC0'],\r\n            ['\\u0637', '\\uFEC1', '\\uFEC2', '\\uFEC3', '\\uFEC4'],\r\n            ['\\u0638', '\\uFEC5', '\\uFEC6', '\\uFEC7', '\\uFEC8'],\r\n            ['\\u0639', '\\uFEC9', '\\uFECA', '\\uFECB', '\\uFECC'],\r\n            ['\\u063A', '\\uFECD', '\\uFECE', '\\uFECF', '\\uFED0'],\r\n            ['\\u0640', '\\u0640', '\\u0640', '\\u0640', '\\u0640'],\r\n            ['\\u0641', '\\uFED1', '\\uFED2', '\\uFED3', '\\uFED4'],\r\n            ['\\u0642', '\\uFED5', '\\uFED6', '\\uFED7', '\\uFED8'],\r\n            ['\\u0643', '\\uFED9', '\\uFEDA', '\\uFEDB', '\\uFEDC'],\r\n            ['\\u0644', '\\uFEDD', '\\uFEDE', '\\uFEDF', '\\uFEE0'],\r\n            ['\\u0645', '\\uFEE1', '\\uFEE2', '\\uFEE3', '\\uFEE4'],\r\n            ['\\u0646', '\\uFEE5', '\\uFEE6', '\\uFEE7', '\\uFEE8'],\r\n            ['\\u0647', '\\uFEE9', '\\uFEEA', '\\uFEEB', '\\uFEEC'],\r\n            ['\\u0648', '\\uFEED', '\\uFEEE'],\r\n            ['\\u0649', '\\uFEEF', '\\uFEF0', '\\uFBE8', '\\uFBE9'],\r\n            ['\\u064A', '\\uFEF1', '\\uFEF2', '\\uFEF3', '\\uFEF4'],\r\n            ['\\u0671', '\\uFB50', '\\uFB51'],\r\n            ['\\u0679', '\\uFB66', '\\uFB67', '\\uFB68', '\\uFB69'],\r\n            ['\\u067A', '\\uFB5E', '\\uFB5F', '\\uFB60', '\\uFB61'],\r\n            ['\\u067B', '\\uFB52', '\\uFB53', '\\uFB54', '\\uFB55'],\r\n            ['\\u067E', '\\uFB56', '\\uFB57', '\\uFB58', '\\uFB59'],\r\n            ['\\u067F', '\\uFB62', '\\uFB63', '\\uFB64', '\\uFB65'],\r\n            ['\\u0680', '\\uFB5A', '\\uFB5B', '\\uFB5C', '\\uFB5D'],\r\n            ['\\u0683', '\\uFB76', '\\uFB77', '\\uFB78', '\\uFB79'],\r\n            ['\\u0684', '\\uFB72', '\\uFB73', '\\uFB74', '\\uFB75'],\r\n            ['\\u0686', '\\uFB7A', '\\uFB7B', '\\uFB7C', '\\uFB7D'],\r\n            ['\\u0687', '\\uFB7E', '\\uFB7F', '\\uFB80', '\\uFB81'],\r\n            ['\\u0688', '\\uFB88', '\\uFB89'],\r\n            ['\\u068C', '\\uFB84', '\\uFB85'],\r\n            ['\\u068D', '\\uFB82', '\\uFB83'],\r\n            ['\\u068E', '\\uFB86', '\\uFB87'],\r\n            ['\\u0691', '\\uFB8C', '\\uFB8D'],\r\n            ['\\u0698', '\\uFB8A', '\\uFB8B'],\r\n            ['\\u06A4', '\\uFB6A', '\\uFB6B', '\\uFB6C', '\\uFB6D'],\r\n            ['\\u06A6', '\\uFB6E', '\\uFB6F', '\\uFB70', '\\uFB71'],\r\n            ['\\u06A9', '\\uFB8E', '\\uFB8F', '\\uFB90', '\\uFB91'],\r\n            ['\\u06AD', '\\uFBD3', '\\uFBD4', '\\uFBD5', '\\uFBD6'],\r\n            ['\\u06AF', '\\uFB92', '\\uFB93', '\\uFB94', '\\uFB95'],\r\n            ['\\u06B1', '\\uFB9A', '\\uFB9B', '\\uFB9C', '\\uFB9D'],\r\n            ['\\u06B3', '\\uFB96', '\\uFB97', '\\uFB98', '\\uFB99'],\r\n            ['\\u06BA', '\\uFB9E', '\\uFB9F'],\r\n            ['\\u06BB', '\\uFBA0', '\\uFBA1', '\\uFBA2', '\\uFBA3'],\r\n            ['\\u06BE', '\\uFBAA', '\\uFBAB', '\\uFBAC', '\\uFBAD'],\r\n            ['\\u06C0', '\\uFBA4', '\\uFBA5'],\r\n            ['\\u06C1', '\\uFBA6', '\\uFBA7', '\\uFBA8', '\\uFBA9'],\r\n            ['\\u06C5', '\\uFBE0', '\\uFBE1'],\r\n            ['\\u06C6', '\\uFBD9', '\\uFBDA'],\r\n            ['\\u06C7', '\\uFBD7', '\\uFBD8'],\r\n            ['\\u06C8', '\\uFBDB', '\\uFBDC'],\r\n            ['\\u06C9', '\\uFBE2', '\\uFBE3'],\r\n            ['\\u06CB', '\\uFBDE', '\\uFBDF'],\r\n            ['\\u06CC', '\\uFBFC', '\\uFBFD', '\\uFBFE', '\\uFBFF'],\r\n            ['\\u06D0', '\\uFBE4', '\\uFBE5', '\\uFBE6', '\\uFBE7'],\r\n            ['\\u06D2', '\\uFBAE', '\\uFBAF'],\r\n            ['\\u06D3', '\\uFBB0', '\\uFBB1']\r\n        ];\r\n        this.alef = '\\u0627';\r\n        this.alefHamza = '\\u0623';\r\n        this.alefHamzaBelow = '\\u0625';\r\n        this.alefMadda = '\\u0622';\r\n        this.lam = '\\u0644';\r\n        this.hamza = '\\u0621';\r\n        this.zeroWidthJoiner = '\\u200D';\r\n        this.hamzaAbove = '\\u0654';\r\n        this.hamzaBelow = '\\u0655';\r\n        this.wawHamza = '\\u0624';\r\n        this.yehHamza = '\\u0626';\r\n        this.waw = '\\u0648';\r\n        this.alefMaksura = '\\u0649';\r\n        this.yeh = '\\u064A';\r\n        this.farsiYeh = '\\u06CC';\r\n        this.shadda = '\\u0651';\r\n        this.madda = '\\u0653';\r\n        this.lwa = '\\uFEFB';\r\n        this.lwawh = '\\uFEF7';\r\n        this.lwawhb = '\\uFEF9';\r\n        this.lwawm = '\\uFEF5';\r\n        this.bwhb = '\\u06D3';\r\n        this.fathatan = '\\u064B';\r\n        this.superScriptalef = '\\u0670';\r\n        this.vowel = 0x1;\r\n        // #endregion\r\n        //#region Fields\r\n        this.arabicMapTable = new Dictionary();\r\n        for (var i = 0; i < this.arabicCharTable.length; i++) {\r\n            this.arabicMapTable.setValue(this.arabicCharTable[i][0], this.arabicCharTable[i]);\r\n        }\r\n    }\r\n    //#endregion\r\n    //#region implementation\r\n    ArabicShapeRenderer.prototype.getCharacterShape = function (input, index) {\r\n        if ((input >= this.hamza) && (input <= this.bwhb)) {\r\n            var value = [];\r\n            if (this.arabicMapTable.getValue(input)) {\r\n                value = this.arabicMapTable.getValue(input);\r\n                return value[index + 1];\r\n            }\r\n        }\r\n        else if (input >= this.lwawm && input <= this.lwa) {\r\n            return (input);\r\n        }\r\n        return input;\r\n    };\r\n    ArabicShapeRenderer.prototype.shape = function (text, level) {\r\n        var builder = '';\r\n        var str2 = '';\r\n        for (var i = 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c >= '؀' && c <= 'ۿ') {\r\n                //if(c>= 0x0600.toString() && c<= 0x06FF.toString()) {\r\n                str2 = str2 + c;\r\n            }\r\n            else {\r\n                if (str2.length > 0) {\r\n                    var st = this.doShape(str2.toString(), 0);\r\n                    builder = builder + st;\r\n                    str2 = '';\r\n                }\r\n                builder = builder + c;\r\n            }\r\n        }\r\n        if (str2.length > 0) {\r\n            var st = this.doShape(str2.toString(), 0);\r\n            builder = builder + st;\r\n        }\r\n        return builder.toString();\r\n    };\r\n    ArabicShapeRenderer.prototype.doShape = function (input, level) {\r\n        var str = '';\r\n        var ligature = 0;\r\n        var len = 0;\r\n        var i = 0;\r\n        var next = '';\r\n        var previous = new ArabicShape();\r\n        var present = new ArabicShape();\r\n        while (i < input.length) {\r\n            next = input[i++];\r\n            ligature = this.ligature(next, present);\r\n            if (ligature === 0) {\r\n                var shapeCount = this.getShapeCount(next);\r\n                len = (shapeCount === 1) ? 0 : 2;\r\n                if (previous.Shapes > 2) {\r\n                    len += 1;\r\n                }\r\n                len = len % (present.Shapes);\r\n                present.Value = this.getCharacterShape(present.Value, len);\r\n                str = this.append(str, previous, level);\r\n                previous = present;\r\n                present = new ArabicShape();\r\n                present.Value = next;\r\n                present.Shapes = shapeCount;\r\n                present.Ligature++;\r\n            }\r\n        }\r\n        len = (previous.Shapes > 2) ? 1 : 0;\r\n        len = len % (present.Shapes);\r\n        present.Value = this.getCharacterShape(present.Value, len);\r\n        str = this.append(str, previous, level);\r\n        str = this.append(str, present, level);\r\n        return str.toString();\r\n    };\r\n    ArabicShapeRenderer.prototype.append = function (builder, shape, level) {\r\n        if (shape.Value !== '') {\r\n            builder = builder + shape.Value;\r\n            shape.Ligature -= 1;\r\n            if (shape.Type !== '') {\r\n                if ((level & this.vowel) === 0) {\r\n                    builder = builder + shape.Type;\r\n                    shape.Ligature -= 1;\r\n                }\r\n                else {\r\n                    shape.Ligature -= 1;\r\n                }\r\n            }\r\n            if (shape.vowel !== '') {\r\n                if ((level & this.vowel) === 0) {\r\n                    builder = builder + shape.vowel;\r\n                    shape.Ligature -= 1;\r\n                }\r\n                else {\r\n                    shape.Ligature -= 1;\r\n                }\r\n            }\r\n        }\r\n        return builder;\r\n    };\r\n    ArabicShapeRenderer.prototype.ligature = function (value, shape) {\r\n        if (shape.Value !== '') {\r\n            var result = 0;\r\n            if ((value >= this.fathatan && value <= this.hamzaBelow) || value === this.superScriptalef) {\r\n                result = 1;\r\n                if ((shape.vowel !== '') && (value !== this.shadda)) {\r\n                    result = 2;\r\n                }\r\n                if (value === this.shadda) {\r\n                    if (shape.Type == null) {\r\n                        shape.Type = this.shadda;\r\n                    }\r\n                    else {\r\n                        return 0;\r\n                    }\r\n                }\r\n                else if (value === this.hamzaBelow) {\r\n                    if (shape.Value === this.alef) {\r\n                        shape.Value = this.alefHamzaBelow;\r\n                        result = 2;\r\n                    }\r\n                    else if (value === this.lwa) {\r\n                        shape.Value = this.lwawhb;\r\n                        result = 2;\r\n                    }\r\n                    else {\r\n                        shape.Type = this.hamzaBelow;\r\n                    }\r\n                }\r\n                else if (value === this.hamzaAbove) {\r\n                    if (shape.Value === this.alef) {\r\n                        shape.Value = this.alefHamza;\r\n                        result = 2;\r\n                    }\r\n                    else if (shape.Value === this.lwa) {\r\n                        shape.Value = this.lwawh;\r\n                        result = 2;\r\n                    }\r\n                    else if (shape.Value === this.waw) {\r\n                        shape.Value = this.wawHamza;\r\n                        result = 2;\r\n                    }\r\n                    else if (shape.Value === this.yeh || shape.Value === this.alefMaksura || shape.Value === this.farsiYeh) {\r\n                        shape.Value = this.yehHamza;\r\n                        result = 2;\r\n                    }\r\n                    else {\r\n                        shape.Type = this.hamzaAbove;\r\n                    }\r\n                }\r\n                else if (value === this.madda) {\r\n                    if (shape.Value === this.alef) {\r\n                        shape.Value = this.alefMadda;\r\n                        result = 2;\r\n                    }\r\n                }\r\n                else {\r\n                    shape.vowel = value;\r\n                }\r\n                if (result === 1) {\r\n                    shape.Ligature++;\r\n                }\r\n                return result;\r\n            }\r\n            if (shape.vowel !== '') {\r\n                return 0;\r\n            }\r\n            if (shape.Value === this.lam) {\r\n                if (value === this.alef) {\r\n                    shape.Value = this.lwa;\r\n                    shape.Shapes = 2;\r\n                    result = 3;\r\n                }\r\n                else if (value === this.alefHamza) {\r\n                    shape.Value = this.lwawh;\r\n                    shape.Shapes = 2;\r\n                    result = 3;\r\n                }\r\n                else if (value === this.alefHamzaBelow) {\r\n                    shape.Value = this.lwawhb;\r\n                    shape.Shapes = 2;\r\n                    result = 3;\r\n                }\r\n                else if (value === this.alefMadda) {\r\n                    shape.Value = this.lwawm;\r\n                    shape.Shapes = 2;\r\n                    result = 3;\r\n                }\r\n            }\r\n            // else if (shape.Value === '') {\r\n            //     shape.Value = value;\r\n            //     shape.Shapes = this.getShapeCount(value);\r\n            //     result = 1;\r\n            // }\r\n            return result;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    ArabicShapeRenderer.prototype.getShapeCount = function (shape) {\r\n        if ((shape >= this.hamza) && (shape <= this.bwhb) && !((shape >= this.fathatan && shape <= this.hamzaBelow)\r\n            || shape === this.superScriptalef)) {\r\n            var c = [];\r\n            if (this.arabicMapTable.getValue(shape)) {\r\n                c = this.arabicMapTable.getValue(shape);\r\n                return c.length - 1;\r\n            }\r\n        }\r\n        else if (shape === this.zeroWidthJoiner) {\r\n            return 4;\r\n        }\r\n        return 1;\r\n    };\r\n    return ArabicShapeRenderer;\r\n}());\r\nexport { ArabicShapeRenderer };\r\n//#endregion\r\n//#region Internals\r\nvar ArabicShape = /** @class */ (function () {\r\n    function ArabicShape() {\r\n        //#region Fields\r\n        this.shapeValue = '';\r\n        this.shapeType = '';\r\n        this.shapeVowel = '';\r\n        this.shapeLigature = 0;\r\n        this.shapeShapes = 1;\r\n        //#endregion\r\n    }\r\n    Object.defineProperty(ArabicShape.prototype, \"Value\", {\r\n        //#endregion\r\n        //#region Properties \r\n        /**\r\n         * Gets or sets the values.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.shapeValue;\r\n        },\r\n        set: function (value) {\r\n            this.shapeValue = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArabicShape.prototype, \"Type\", {\r\n        /**\r\n         * Gets or sets the values.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.shapeType;\r\n        },\r\n        set: function (value) {\r\n            this.shapeType = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArabicShape.prototype, \"vowel\", {\r\n        /**\r\n         * Gets or sets the values.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.shapeVowel;\r\n        },\r\n        set: function (value) {\r\n            this.shapeVowel = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArabicShape.prototype, \"Ligature\", {\r\n        /**\r\n         * Gets or sets the values.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.shapeLigature;\r\n        },\r\n        set: function (value) {\r\n            this.shapeLigature = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArabicShape.prototype, \"Shapes\", {\r\n        /**\r\n         * Gets or sets the values.\r\n         * @private\r\n         */\r\n        get: function () {\r\n            return this.shapeShapes;\r\n        },\r\n        set: function (value) {\r\n            this.shapeShapes = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ArabicShape;\r\n}());\r\nexport { ArabicShape };\r\n//#endregion\r\n"]},"metadata":{},"sourceType":"module"}