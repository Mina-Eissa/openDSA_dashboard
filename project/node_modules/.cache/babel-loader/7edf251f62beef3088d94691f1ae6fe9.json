{"ast":null,"code":"import { Encoding, validateNullOrUndefined } from './encoding';\nimport { Save } from './save';\n/**\r\n * StreamWriter class contains the implementation for writing characters to a file in a particular encoding\r\n * ```typescript\r\n * let writer = new StreamWriter();\r\n * writer.write('Hello World');\r\n * writer.save('Sample.txt');\r\n * writer.dispose();\r\n * ```\r\n */\n\nvar StreamWriter =\n/** @class */\nfunction () {\n  /**\r\n   * Initializes a new instance of the StreamWriter class by using the specified encoding.\r\n   * @param  {Encoding} encoding?- The character encoding to use.\r\n   */\n  function StreamWriter(encoding) {\n    this.bufferBlob = new Blob(['']);\n    this.bufferText = '';\n    this.init(encoding);\n    Save.isMicrosoftBrowser = !!navigator.msSaveBlob;\n  }\n\n  Object.defineProperty(StreamWriter.prototype, \"buffer\", {\n    /**\r\n     * Gets the content written to the StreamWriter as Blob.\r\n     * @returns Blob\r\n     */\n    get: function () {\n      this.flush();\n      return this.bufferBlob;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(StreamWriter.prototype, \"encoding\", {\n    /**\r\n     * Gets the encoding.\r\n     * @returns Encoding\r\n     */\n    get: function () {\n      return this.enc;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  StreamWriter.prototype.init = function (encoding) {\n    if (encoding === null || encoding === undefined) {\n      this.enc = new Encoding(false);\n      this.enc.type = 'Utf8';\n    } else {\n      this.enc = encoding;\n      this.setBomByte();\n    }\n  };\n  /**\r\n   * Private method to set Byte Order Mark(BOM) value based on EncodingType\r\n   */\n\n\n  StreamWriter.prototype.setBomByte = function () {\n    if (this.encoding.includeBom) {\n      switch (this.encoding.type) {\n        case 'Unicode':\n          var arrayUnicode = new ArrayBuffer(2);\n          var uint8 = new Uint8Array(arrayUnicode);\n          uint8[0] = 255;\n          uint8[1] = 254;\n          this.bufferBlob = new Blob([arrayUnicode]);\n          break;\n\n        case 'Utf8':\n          var arrayUtf8 = new ArrayBuffer(3);\n          var utf8 = new Uint8Array(arrayUtf8);\n          utf8[0] = 239;\n          utf8[1] = 187;\n          utf8[2] = 191;\n          this.bufferBlob = new Blob([arrayUtf8]);\n          break;\n\n        default:\n          this.bufferBlob = new Blob(['']);\n          break;\n      }\n    }\n  };\n  /**\r\n   * Saves the file with specified name and sends the file to client browser\r\n   * @param  {string} fileName - The file name to save\r\n   * @returns {void}\r\n   */\n\n\n  StreamWriter.prototype.save = function (fileName) {\n    if (this.bufferText !== '') {\n      this.flush();\n    }\n\n    Save.save(fileName, this.buffer);\n  };\n  /**\r\n   * Writes the specified string.\r\n   * @param  {string} value - The string to write. If value is null or undefined, nothing is written.\r\n   * @returns {void}\r\n   */\n\n\n  StreamWriter.prototype.write = function (value) {\n    if (this.encoding === undefined) {\n      throw new Error('Object Disposed Exception: current writer is disposed');\n    }\n\n    validateNullOrUndefined(value, 'string');\n    this.bufferText += value;\n\n    if (this.bufferText.length >= 10240) {\n      this.flush();\n    }\n  };\n\n  StreamWriter.prototype.flush = function () {\n    if (this.bufferText === undefined || this.bufferText === null || this.bufferText.length === 0) {\n      return;\n    }\n\n    var bufferArray = this.encoding.getBytes(this.bufferText, 0, this.bufferText.length);\n    this.bufferText = '';\n    this.bufferBlob = new Blob([this.bufferBlob, bufferArray]);\n  };\n  /**\r\n   * Writes the specified string followed by a line terminator\r\n   * @param  {string} value - The string to write. If value is null or undefined, nothing is written\r\n   * @returns {void}\r\n   */\n\n\n  StreamWriter.prototype.writeLine = function (value) {\n    if (this.encoding === undefined) {\n      throw new Error('Object Disposed Exception: current writer is disposed');\n    }\n\n    validateNullOrUndefined(value, 'string');\n    this.bufferText = this.bufferText + value + '\\r\\n';\n\n    if (this.bufferText.length >= 10240) {\n      this.flush();\n    }\n  };\n  /**\r\n   * Releases the resources used by the StreamWriter\r\n   * @returns {void}\r\n   */\n\n\n  StreamWriter.prototype.destroy = function () {\n    this.bufferBlob = undefined;\n    this.bufferText = undefined;\n\n    if (this.enc instanceof Encoding) {\n      this.enc.destroy();\n    }\n\n    this.enc = undefined;\n  };\n\n  return StreamWriter;\n}();\n\nexport { StreamWriter };","map":{"version":3,"sources":["C:/Users/x/Desktop/openDSA/openDSA_dashboard/project/node_modules/@syncfusion/ej2-file-utils/src/stream-writer.js"],"names":["Encoding","validateNullOrUndefined","Save","StreamWriter","encoding","bufferBlob","Blob","bufferText","init","isMicrosoftBrowser","navigator","msSaveBlob","Object","defineProperty","prototype","get","flush","enumerable","configurable","enc","undefined","type","setBomByte","includeBom","arrayUnicode","ArrayBuffer","uint8","Uint8Array","arrayUtf8","utf8","save","fileName","buffer","write","value","Error","length","bufferArray","getBytes","writeLine","destroy"],"mappings":"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","sourcesContent":["import { Encoding, validateNullOrUndefined } from './encoding';\r\nimport { Save } from './save';\r\n/**\r\n * StreamWriter class contains the implementation for writing characters to a file in a particular encoding\r\n * ```typescript\r\n * let writer = new StreamWriter();\r\n * writer.write('Hello World');\r\n * writer.save('Sample.txt');\r\n * writer.dispose();\r\n * ```\r\n */\r\nvar StreamWriter = /** @class */ (function () {\r\n    /**\r\n     * Initializes a new instance of the StreamWriter class by using the specified encoding.\r\n     * @param  {Encoding} encoding?- The character encoding to use.\r\n     */\r\n    function StreamWriter(encoding) {\r\n        this.bufferBlob = new Blob(['']);\r\n        this.bufferText = '';\r\n        this.init(encoding);\r\n        Save.isMicrosoftBrowser = !(!navigator.msSaveBlob);\r\n    }\r\n    Object.defineProperty(StreamWriter.prototype, \"buffer\", {\r\n        /**\r\n         * Gets the content written to the StreamWriter as Blob.\r\n         * @returns Blob\r\n         */\r\n        get: function () {\r\n            this.flush();\r\n            return this.bufferBlob;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StreamWriter.prototype, \"encoding\", {\r\n        /**\r\n         * Gets the encoding.\r\n         * @returns Encoding\r\n         */\r\n        get: function () {\r\n            return this.enc;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StreamWriter.prototype.init = function (encoding) {\r\n        if (encoding === null || encoding === undefined) {\r\n            this.enc = new Encoding(false);\r\n            this.enc.type = 'Utf8';\r\n        }\r\n        else {\r\n            this.enc = encoding;\r\n            this.setBomByte();\r\n        }\r\n    };\r\n    /**\r\n     * Private method to set Byte Order Mark(BOM) value based on EncodingType\r\n     */\r\n    StreamWriter.prototype.setBomByte = function () {\r\n        if (this.encoding.includeBom) {\r\n            switch (this.encoding.type) {\r\n                case 'Unicode':\r\n                    var arrayUnicode = new ArrayBuffer(2);\r\n                    var uint8 = new Uint8Array(arrayUnicode);\r\n                    uint8[0] = 255;\r\n                    uint8[1] = 254;\r\n                    this.bufferBlob = new Blob([arrayUnicode]);\r\n                    break;\r\n                case 'Utf8':\r\n                    var arrayUtf8 = new ArrayBuffer(3);\r\n                    var utf8 = new Uint8Array(arrayUtf8);\r\n                    utf8[0] = 239;\r\n                    utf8[1] = 187;\r\n                    utf8[2] = 191;\r\n                    this.bufferBlob = new Blob([arrayUtf8]);\r\n                    break;\r\n                default:\r\n                    this.bufferBlob = new Blob(['']);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Saves the file with specified name and sends the file to client browser\r\n     * @param  {string} fileName - The file name to save\r\n     * @returns {void}\r\n     */\r\n    StreamWriter.prototype.save = function (fileName) {\r\n        if (this.bufferText !== '') {\r\n            this.flush();\r\n        }\r\n        Save.save(fileName, this.buffer);\r\n    };\r\n    /**\r\n     * Writes the specified string.\r\n     * @param  {string} value - The string to write. If value is null or undefined, nothing is written.\r\n     * @returns {void}\r\n     */\r\n    StreamWriter.prototype.write = function (value) {\r\n        if (this.encoding === undefined) {\r\n            throw new Error('Object Disposed Exception: current writer is disposed');\r\n        }\r\n        validateNullOrUndefined(value, 'string');\r\n        this.bufferText += value;\r\n        if (this.bufferText.length >= 10240) {\r\n            this.flush();\r\n        }\r\n    };\r\n    StreamWriter.prototype.flush = function () {\r\n        if (this.bufferText === undefined || this.bufferText === null || this.bufferText.length === 0) {\r\n            return;\r\n        }\r\n        var bufferArray = this.encoding.getBytes(this.bufferText, 0, this.bufferText.length);\r\n        this.bufferText = '';\r\n        this.bufferBlob = new Blob([this.bufferBlob, bufferArray]);\r\n    };\r\n    /**\r\n     * Writes the specified string followed by a line terminator\r\n     * @param  {string} value - The string to write. If value is null or undefined, nothing is written\r\n     * @returns {void}\r\n     */\r\n    StreamWriter.prototype.writeLine = function (value) {\r\n        if (this.encoding === undefined) {\r\n            throw new Error('Object Disposed Exception: current writer is disposed');\r\n        }\r\n        validateNullOrUndefined(value, 'string');\r\n        this.bufferText = this.bufferText + value + '\\r\\n';\r\n        if (this.bufferText.length >= 10240) {\r\n            this.flush();\r\n        }\r\n    };\r\n    /**\r\n     * Releases the resources used by the StreamWriter\r\n     * @returns {void}\r\n     */\r\n    StreamWriter.prototype.destroy = function () {\r\n        this.bufferBlob = undefined;\r\n        this.bufferText = undefined;\r\n        if (this.enc instanceof Encoding) {\r\n            this.enc.destroy();\r\n        }\r\n        this.enc = undefined;\r\n    };\r\n    return StreamWriter;\r\n}());\r\nexport { StreamWriter };\r\n"]},"metadata":{},"sourceType":"module"}